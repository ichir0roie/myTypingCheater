var Blowfish=function(e,t){this.key=e,"ecb"!==t&&"cbc"!==t||(this.mode=t),this.sBox0=Blowfish.sBox0.slice(),this.sBox1=Blowfish.sBox1.slice(),this.sBox2=Blowfish.sBox2.slice(),this.sBox3=Blowfish.sBox3.slice(),this.pArray=Blowfish.pArray.slice(),this.generateSubkeys(e)};Blowfish.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(e,t){if("ecb"===this.mode)return this.encryptECB(e);if("cbc"===this.mode)return this.encryptCBC(e,t);throw new Error("Неизвестный режим шифрования.")},decrypt:function(e,t){if("ecb"===this.mode)return this.decryptECB(e);if("cbc"===this.mode)return this.decryptCBC(e,t);throw new Error("Неизвестный режим шифрования.")},encryptECB:function(e){e=this.utf8Decode(e);for(var t=Math.ceil(e.length/8),s="",i=0;i<t;i++){var n,a,o=e.substr(8*i,8);if(o.length<8)for(var l=8-o.length;0<l--;)o+="\0";var r=this.split64by32(o);n=r[0],a=r[1],n=(r=this.encipher(n,a))[0],a=r[1],s+=this.num2block32(n)+this.num2block32(a)}return s},encryptCBC:function(e,t){e=this.utf8Decode(e);var s,i,n,a=Math.ceil(e.length/8);s=(n=this.split64by32(t))[0],i=n[1];for(var o="",l=0;l<a;l++){var r,h,c,u=e.substr(8*l,8);if(u.length<8)for(var d=8-u.length;0<d--;)u+="\0";r=(c=this.split64by32(u))[0],h=c[1],r=this.xor(r,s),h=this.xor(h,i),r=(c=this.encipher(r,h))[0],h=c[1],o+=this.num2block32(r)+this.num2block32(h)}return o},decryptECB:function(e){for(var t=Math.ceil(e.length/8),s="",i=0;i<t;i++){var n,a,o,l=e.substr(8*i,8);if(l.length<8)throw new Error("Зашифрованная строка повреждена: длинна зашифрованной строки должна быть кратна 8 баыйтам.");n=(o=this.split64by32(l))[0],a=o[1],n=(o=this.decipher(n,a))[0],a=o[1],s+=this.num2block32(n)+this.num2block32(a)}return this.utf8Encode(s)},decryptCBC:function(e,t){var s,i,n,a,o,l=Math.ceil(e.length/8);s=(o=this.split64by32(t))[0],i=o[1];for(var r="",h=0;h<l;h++){var c,u,d,p=e.substr(8*h,8);if(p.length<8)throw new Error("Зашифрованная строка повреждена: длинна зашифрованной строки должна быть кратна 8 байтам.");n=c=(d=this.split64by32(p))[0],a=u=d[1],c=(d=this.decipher(c,u))[0],u=d[1],c=this.xor(c,s),u=this.xor(u,i),s=n,i=a,r+=this.num2block32(c)+this.num2block32(u)}return this.utf8Encode(r)},F:function(e){var t=e>>>24,s=e<<8>>>24,i=e<<16>>>24,n=e<<24>>>24,a=this.addMod32(this.sBox0[t],this.sBox1[s]);return a=this.xor(a,this.sBox2[i]),this.addMod32(a,this.sBox3[n])},encipher:function(e,t){for(var s,i=0;i<16;i++)s=e=this.xor(e,this.pArray[i]),e=t=this.xor(this.F(e),t),t=s;return s=e,e=t,t=s,t=this.xor(t,this.pArray[16]),[e=this.xor(e,this.pArray[17]),t]},decipher:function(e,t){var s;s=e=this.xor(e,this.pArray[17]),e=t=this.xor(t,this.pArray[16]),t=s;for(var i=15;0<=i;i--)s=e,e=t,t=s,t=this.xor(this.F(e),t),e=this.xor(e,this.pArray[i]);return[e,t]},generateSubkeys:function(e){var t,s,i=0,n=0;for(t=0;t<18;t++){for(s=4;0<s;s--)i=this.fixNegative(i<<8|e.charCodeAt(n)),n=(n+1)%e.length;this.pArray[t]=this.xor(this.pArray[t],i),i=0}var a=[0,0];for(t=0;t<18;t+=2)a=this.encipher(a[0],a[1]),this.pArray[t]=a[0],this.pArray[t+1]=a[1];for(t=0;t<256;t+=2)a=this.encipher(a[0],a[1]),this.sBox0[t]=a[0],this.sBox0[t+1]=a[1];for(t=0;t<256;t+=2)a=this.encipher(a[0],a[1]),this.sBox1[t]=a[0],this.sBox1[t+1]=a[1];for(t=0;t<256;t+=2)a=this.encipher(a[0],a[1]),this.sBox2[t]=a[0],this.sBox2[t+1]=a[1];for(t=0;t<256;t+=2)a=this.encipher(a[0],a[1]),this.sBox3[t]=a[0],this.sBox3[t+1]=a[1]},block32toNum:function(e){return this.fixNegative(e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3))},num2block32:function(e){return String.fromCharCode(e>>>24)+String.fromCharCode(e<<8>>>24)+String.fromCharCode(e<<16>>>24)+String.fromCharCode(e<<24>>>24)},xor:function(e,t){return this.fixNegative(e^t)},addMod32:function(e,t){return this.fixNegative(e+t|0)},fixNegative:function(e){return e>>>0},split64by32:function(e){var t=e.substring(0,4),s=e.substring(4,8);return[this.block32toNum(t),this.block32toNum(s)]},utf8Decode:function(e){for(var t="",s=0;s<e.length;s++){var i=e.charCodeAt(s);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},utf8Encode:function(e){for(var t="",s=0,i=0,n=0,a=0;s<e.length;)(i=e.charCodeAt(s))<128?(t+=String.fromCharCode(i),s++):191<i&&i<224?(n=e.charCodeAt(s+1),t+=String.fromCharCode((31&i)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),a=e.charCodeAt(s+2),t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&a),s+=3);return t},base64Encode:function(e){for(var t,s,i,n,a,o,l,r="",h=0;h<e.length;)n=(t=e.charCodeAt(h++))>>2,a=(3&t)<<4|(s=e.charCodeAt(h++))>>4,o=(15&s)<<2|(i=e.charCodeAt(h++))>>6,l=63&i,isNaN(s)?o=l=64:isNaN(i)&&(l=64),r=r+this.keyStr.charAt(n)+this.keyStr.charAt(a)+this.keyStr.charAt(o)+this.keyStr.charAt(l);return r},base64Decode:function(e){var t,s,i,n,a,o,l="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<e.length;)t=this.keyStr.indexOf(e.charAt(r++))<<2|(n=this.keyStr.indexOf(e.charAt(r++)))>>4,s=(15&n)<<4|(a=this.keyStr.indexOf(e.charAt(r++)))>>2,i=(3&a)<<6|(o=this.keyStr.indexOf(e.charAt(r++))),l+=String.fromCharCode(t),64!=a&&(l+=String.fromCharCode(s)),64!=o&&(l+=String.fromCharCode(i));return l},trimZeros:function(e){return e.replace(/\0+$/g,"")}},Blowfish.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Blowfish.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],Blowfish.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],Blowfish.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],Blowfish.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],function(){var i,n,a,o,l,r,c,_,u,d,p,m,g="MyTyping/JS",y=g+"/1.5",f=0,S=[],v=[],I=1,x=2,s=3,M=4,k=5,N=6,e="mtjAutoArea",T="c3V0ZW1hcnVBbmRJd2FiZWU=",C=null,E="",A=[null,"media/typing-js/type.mp3"],O=[null,"media/typing-js/miss-new.mp3","media/typing-js/miss.mp3"],b=[],L=1e4,j="制限時間を超えました。再読込してください。",w=32,F=13,R=27,X=8,B={32:" ",106:"*",107:"+",109:"-",110:".",111:"/"},P="&#8203;",q="&ensp;",K="&#8006;";function t(e){i=+new Date,e&&l.empty(),r=$('<div class="mtjStage"></div>').prependTo(l),c=$('<div class="mtjHelpArea"></div>').appendTo(l),0==f&&(r[0].onselectstart=function(){return!1},c[0].onselectstart=function(){return!1},document.addEventListener("keydown",D),document.addEventListener("keyup",H),n=setInterval(V,1e3/30),a=!0,$(document).on("focusout",'textarea, input[type="text"]',function(){a=!0}),$(document).on("focusin",'textarea, input[type="text"]',function(){a=!1}),b=[]),f++,S=[],v=[],d=new Ie;var t,s=new Blowfish("");T=s.base64Decode(T),(_=new se).load(),r.addClass("mtjBr-"+_.browser),"ie"!=_.browser&&"edge"!=_.browser&&"firefox"!=_.browser||(_.isGraduallyBlink=!1),u=new xe,"ie"!=_.browser&&(window.AudioContext||window.webkitAudioContext)?(p=new le(A[_.typeSoundNo]),m=new le(O[_.missSoundNo])):(p=new oe(A[_.typeSoundNo]),m=new oe(O[_.missSoundNo])),"firefox"!=_.browser&&"safari"!=_.browser||(K="&#9744;"),t="",_.isSetUp&&_.mtjv&&_.mtjv<Number("1.4")&&(t='<h3>長文モードが追加！</h3><br>歌詞タイピング等で長文モードでプレイできるようになりました！<br>対応するタイピングプレイ中に右下の<span class="mtjDummyBtn mtjGmSc-qb"></span>から選択可能です！<br>新機能の詳細は<a href="/news/id/110" target="_blank">＜こちら＞</a>！',d.showAlert(t),_.questionView(3),_.save()),Q(I)}function U(e,t){function s(){}s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}function Q(e){if(!S.hasOwnProperty(e)||void 0===S[e]||null==S[e]){switch(e){case I:S[e]=new he(e);break;case x:S[e]=new ce(e);break;case s:S[e]=new de(e);break;case M:S[e]=new pe(e);break;case k:S[e]=new me(e);break;case N:S[e]=new ue(e)}S[e].initScreen()}for(var t=0;t<b.length;t++)e<=k&&b[t].maxScreenNo<e&&(te(b[t].errorLogId,"maxScreenNo : "+e),b[t].maxScreenNo=e);o=e,v.push(e),S[e].openScreen()}function Y(){return S[o]}function D(e){var t;if(!(C=e).altKey&&!e.ctrlKey&&!e.metaKey&&a){if((48<=e.keyCode&&e.keyCode<=111||186<=e.keyCode&&e.keyCode<=226||e.keyCode==w||e.keyCode==F||e.keyCode==R||e.keyCode==X)&&(e.preventDefault(),e.stopPropagation()),d.popUpMode!=d.MODE_CLOSE?e.keyCode==w||e.keyCode==F?d.closeOk():d.popUpMode==d.MODE_CONFIRM&&e.keyCode==R&&d.closeCancel():o&&Y().isOpened&&(t=Y().keyDown(e)),48<=e.keyCode&&e.keyCode<=111||186<=e.keyCode&&e.keyCode<=226||e.keyCode==w||e.keyCode==F||e.keyCode==R||e.keyCode==X)return!1;if(void 0!==t)return t}}function H(e){a&&d.popUpMode==d.MODE_CLOSE&&o&&Y().isOpened&&Y().keyUp(e)}function V(){o&&Y().onFrame()}function G(e){return Math.round(e/30)}function z(){return+new Date-i}function W(e){var t=0;e=escape(e);for(var s=0;s<e.length;s++,t++)"%"==e.charAt(s)&&("u"==e.charAt(++s)&&(s+=3,t++),s++);return t}function J(e,t){return void 0===t&&(t=""),null==e?t:e}function Z(e){throw console.error(e.message),r.html('<div class="mtjErrBk"><div class="mtjErrMsg">'+e.message+"</div></div>"),e.message==j&&d.showPopup(e.message,{icon:"check",html:"OK",func:function(){location.reload()}}),document.removeEventListener("keydown",D),document.removeEventListener("keyup",H),clearInterval(n),e}function ee(e,t){if(E!=e){void 0===t&&(t=L);var s=(E=e)+"\nurl             : "+location.href+"\nuserAgent       : "+navigator.userAgent+"\nappVersion      : "+navigator.appVersion+"\napplicationId   : "+y+"\ntime            : "+z()+"\ngameId          : "+_.gameId+"\ntestPass        : "+_.testPass+"\ntestQuestionNo  : "+_.testQuestionNo+"\nplayerName      : "+_.playerName+"\nrankingUserId   : "+_.rankingUserId+"\nisLoggedIn      : "+_.isLoggedIn+"\ninitCount       : "+f+"\nscreenNo        : "+o+"\nscreenNos       : "+v.join(",");C&&"key"in C&&(s+="\nevent.key       : "+C.key),C&&"keyCode"in C&&(s+="\nevent.keyCode   : "+C.keyCode),C&&"keyIdentifier"in C&&(s+="\nevent.keyIdentifier : "+C.keyIdentifier),C&&"code"in C&&(s+="\nevent.code      : "+C.code),C&&"which"in C&&(s+="\nevent.which     : "+C.which),C&&"charCode"in C&&(s+="\nevent.charCode  : "+C.charCode);var i={};i.gameId=_.gameId,i.errorCode=t,i.errorText=s,i.errorGroup=g,i.t=+new Date,$.ajax({type:"POST",url:"error-log",data:i,dataType:"json"}).done(function(e){t!=L&&"OK"==e.status&&b.push({errorLogId:e.errorLogId,maxScreenNo:o})})}}function te(e,t){var s={};s.errorLogId=e,s.addErrorText=t,s.t=+new Date,$.ajax({type:"POST",url:"add-error-log",data:s,dataType:"json"})}$(document).ready(function(){0<$("#"+e).length&&(l=$("#"+e),t()),$(".mtjRunBtn").click(function(){l=$("#"+$(this).attr("mainAreaId")),t(!0)})}),window.onerror=function(e,t,s,i,n){var a=!0,o=e+"\nscriptUrl       : "+t+"\nline            : "+s+"\ncol             : "+i;n&&"message"in n&&(o+="\nerror.message   : "+n.message),n&&"stack"in n&&(o+="\nerror.stack     : "+n.stack);var l=100;0==s&&0==i&&(l=0,a=!1),(e==j||""==t||null==t||void 0===t||0<=t.indexOf("https://apis.google.com/"))&&(a=!1),a&&ee(o,l)};var se=function(){this.siteUrl=null,this.COOKIE_KEY="game",this.COOKIE_OPTION={expires:365,path:"/"},this.SAVE_KEYS=["inputMode","rankingUserId","playerName","bestScoreList","bestScoreAgeList","isSuccessList","isPlaySe","volume","isShowKeyboard","isRomaLower","questionAlign","isSetUp","uuId","mtjv","clMtjv","separateLock","separateView","excludeStats","hideMishitRoma","settingMode","typeSoundNo","missSoundNo","questionView","hideRoma","inputLog","qbStyle","nextType","qbFont"],this.SAVE_STORAGE_KEYS=["excludeStats","hideMishitRoma","settingMode","typeSoundNo","missSoundNo","questionView","hideRoma","inputLog","qbStyle","nextType","qbFont"],this.STORAGE_KEY="game",this.SAVE_DB_SETTING_KEYS=["inputMode","rankingUserId","playerName","isPlaySe","volume","isShowKeyboard","isRomaLower","questionAlign","isSetUp","mtjv","separateLock","separateView","excludeStats","hideMishitRoma","settingMode","typeSoundNo","missSoundNo","questionView","hideRoma","inputLog","qbStyle","nextType","qbFont"],this.gameId,this.browser=getBrowser(),this.OS_WIN=0,this.OS_MAC=1,this.Os=this.OS_WIN,navigator.platform.indexOf("Win")<0&&(this.Os=this.OS_MAC),this.gameIni,this.isTest,this.testQuestionNo,this.inputMode,this.playerName,this.bestScoreList,this.bestScoreAgeList,this.BEST_SCORE_LIST_MAX=100,this.isSuccessList,this.rankingUserId,this.isLoggedIn,this._rank,this.isRankOk,this._questionCount,this._romaCount,this._kanaCount,this._missCount,this._passedTime,this._questionMax,this.playCount,this.isPlaySe,this._volume,this.isShowKeyboard,this.isRomaLower,this.questionAlign,this.qbBaseName,this.qbSetType,this.qbOrder,this.qbSizes,this.qbOrderIni={A:["kana","kanji","roma"],B:["kana","roma","kanji"],C:["roma","kana","kanji"],D:["roma","kanji","kana"],E:["kanji","kana","roma"],F:["kanji","roma","kana"]},this.qbSetIni=[{style:"DJASSL",name:"かな：上"},{style:"DNCSSL",name:"ローマ字：上"}],this.nextType,this.qbFont,this.isSetUp,this.mtjv,this.clMtjv,this.dbSettingMode,this.separateLock,this.separateView,this.testPass,this.rankingKeyId,this.rankingKey,this.originalQuestions,this.successIni,this.useMemo,this.autoTextAlign,this.AUTO_ALIGN_LEFT_LENGTH=40,this.uuId,this.version,this.isPartRetry,this.partRetryQuestionNos,this.readMeUrl,this.keyStats,this.questionStats,this.isGraduallyBlink,this.excludeStats,this.hideMishitRoma,this.settingMode,this.hideRoma,this.inputLog,this.questionLine,this.useTextMode,this.typeSoundNo,this.missSoundNo,this.keyLog,this.stats,this.QUESTION_SCORE=0,this.ROMA_SCORE=10,this.MISS_SCORE=-10,this.kanaToRomaInis={"あ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"a"}}},"い":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"i"}}},"う":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"u"}}},"え":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"e"}}},"お":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"o"}}},"か":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"ka",1:"ca"}}},"き":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ki"}}},"く":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"ku",1:"cu",2:"qu"}}},"け":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ke"}}},"こ":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"ko",1:"co"}}},"が":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ga"}}},"ぎ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"gi"}}},"ぐ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"gu"}}},"げ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ge"}}},"ご":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"go"}}},"さ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"sa"}}},"し":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"si",4:"shi",8:"ci"}}},"す":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"su"}}},"せ":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"se",8:"ce"}}},"そ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"so"}}},"ざ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"za"}}},"じ":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"zi",16:"ji"}}},"ず":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"zu"}}},"ぜ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ze"}}},"ぞ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"zo"}}},"た":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ta"}}},"ち":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"ti",32:"chi"}}},"つ":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"tu",64:"tsu"}}},"て":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"te"}}},"と":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"to"}}},"だ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"da"}}},"ぢ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"di"}}},"づ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"du"}}},"で":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"de"}}},"ど":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"do"}}},"な":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"na"}}},"に":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ni"}}},"ぬ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"nu"}}},"ね":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ne"}}},"の":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"no"}}},"は":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ha"}}},"ひ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"hi"}}},"ふ":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"hu",128:"fu"}}},"へ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"he"}}},"ほ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ho"}}},"ば":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ba"}}},"び":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"bi"}}},"ぶ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"bu"}}},"べ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"be"}}},"ぼ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"bo"}}},"ぱ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"pa"}}},"ぴ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"pi"}}},"ぷ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"pu"}}},"ぺ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"pe"}}},"ぽ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"po"}}},"ま":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ma"}}},"み":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"mi"}}},"む":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"mu"}}},"め":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"me"}}},"も":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"mo"}}},"や":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ya"}}},"ゆ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"yu"}}},"よ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"yo"}}},"ら":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ra"}}},"り":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ri"}}},"る":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ru"}}},"れ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"re"}}},"ろ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"ro"}}},"わ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"wa"}}},"を":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"wo"}}},"ん":{separateFlag:0,xlMode:0,onlyOne:!1,romaInis:{uniXl:{0:"nn",524288:"xn"}}},"ヴ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"vu"}}},"ぁ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xa"},uniL:{0:"la"}}},"ぃ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xi"},uniL:{0:"li"}}},"ぅ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xu"},uniL:{0:"lu"}}},"ぇ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xe"},uniL:{0:"le"}}},"ぉ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xo"},uniL:{0:"lo"}}},"っ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xtu",64:"xtsu"},uniL:{0:"ltu",64:"ltsu"}}},"ゃ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xya"},uniL:{0:"lya"}}},"ゅ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xyu"},uniL:{0:"lyu"}}},"ょ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xyo"},uniL:{0:"lyo"}}},"ゎ":{separateFlag:0,xlMode:1,onlyOne:!1,romaInis:{uniX:{0:"xwa"},uniL:{0:"lwa"}}},"うぁ":{separateFlag:49,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"wha"},sepX:{0:"uxa"},sepL:{0:"ula"}}},"うぃ":{separateFlag:50,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"wi",256:"whi"},sepX:{0:"uxi"},sepL:{0:"uli"}}},"うぇ":{separateFlag:48,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"we",256:"whe"},sepX:{0:"uxe"},sepL:{0:"ule"}}},"うぉ":{separateFlag:49,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"who"},sepX:{0:"uxo"},sepL:{0:"ulo"}}},"ヴぁ":{separateFlag:47,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"va"},sepX:{0:"vuxa"},sepL:{0:"vula"}}},"ヴぃ":{separateFlag:47,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"vi"},sepX:{0:"vuxi"},sepL:{0:"vuli"}}},"ヴぇ":{separateFlag:47,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ve"},sepX:{0:"vuxe"},sepL:{0:"vule"}}},"ヴぉ":{separateFlag:47,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"vo"},sepX:{0:"vuxo"},sepL:{0:"vulo"}}},"きゃ":{separateFlag:27,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"kya"},sepX:{0:"kixya"},sepL:{0:"kilya"}}},"きぃ":{separateFlag:28,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"kyi"},sepX:{0:"kixi"},sepL:{0:"kili"}}},"きゅ":{separateFlag:27,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"kyu"},sepX:{0:"kixyu"},sepL:{0:"kilyu"}}},"きぇ":{separateFlag:28,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"kye"},sepX:{0:"kixe"},sepL:{0:"kile"}}},"きょ":{separateFlag:27,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"kyo"},sepX:{0:"kixyo"},sepL:{0:"kilyo"}}},"ぎゃ":{separateFlag:20,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gya"},sepX:{0:"gixya"},sepL:{0:"gilya"}}},"ぎぃ":{separateFlag:21,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gyi"},sepX:{0:"gixi"},sepL:{0:"gili"}}},"ぎゅ":{separateFlag:20,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gyu"},sepX:{0:"gixyu"},sepL:{0:"gilyu"}}},"ぎぇ":{separateFlag:21,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gye"},sepX:{0:"gixe"},sepL:{0:"gile"}}},"ぎょ":{separateFlag:20,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gyo"},sepX:{0:"gixyo"},sepL:{0:"gilyo"}}},"くぁ":{separateFlag:53,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qa",1024:"qwa",2048:"kwa"},sepX:{0:"kuxa",1:"cuxa",2:"quxa"},sepL:{0:"kula",1:"cula",2:"qula"}}},"くぃ":{separateFlag:53,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qi",512:"qyi",1024:"qwi"},sepX:{0:"kuxi",1:"cuxi",2:"quxi"},sepL:{0:"kuli",1:"culi",2:"quli"}}},"くぅ":{separateFlag:35,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qwu"},sepX:{0:"kuxu",1:"cuxu",2:"quxu"},sepL:{0:"kulu",1:"culu",2:"qulu"}}},"くぇ":{separateFlag:53,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qe",512:"qye",1024:"qwe"},sepX:{0:"kuxe",1:"cuxe",2:"quxe"},sepL:{0:"kule",1:"cule",2:"qule"}}},"くぉ":{separateFlag:53,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qo",1024:"qwo"},sepX:{0:"kuxo",1:"cuxo",2:"quxo"},sepL:{0:"kulo",1:"culo",2:"qulo"}}},"くゃ":{separateFlag:36,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qya"},sepX:{0:"kuxya",1:"cuxya",2:"quxya"},sepL:{0:"kulya",1:"culya",2:"qulya"}}},"くゅ":{separateFlag:36,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qyu"},sepX:{0:"kuxyu",1:"cuxyu",2:"quxyu"},sepL:{0:"kulyu",1:"culyu",2:"qulyu"}}},"くょ":{separateFlag:36,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"qyo"},sepX:{0:"kuxyo",1:"cuxyo",2:"quxyo"},sepL:{0:"kulyo",1:"culyo",2:"qulyo"}}},"ぐぁ":{separateFlag:19,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gwa"},sepX:{0:"guxa"},sepL:{0:"gula"}}},"ぐぃ":{separateFlag:19,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gwi"},sepX:{0:"guxi"},sepL:{0:"guli"}}},"ぐぅ":{separateFlag:19,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gwu"},sepX:{0:"guxu"},sepL:{0:"gulu"}}},"ぐぇ":{separateFlag:19,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gwe"},sepX:{0:"guxe"},sepL:{0:"gule"}}},"ぐぉ":{separateFlag:19,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"gwo"},sepX:{0:"guxo"},sepL:{0:"gulo"}}},"しゃ":{separateFlag:40,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"sya",4096:"sha"},sepX:{0:"sixya",4:"shixya",8:"cixya"},sepL:{0:"silya",4:"shilya",8:"cilya"}}},"しぃ":{separateFlag:42,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"syi"},sepX:{0:"sixi",4:"shixi",8:"cixi"},sepL:{0:"sili",4:"shili",8:"cili"}}},"しゅ":{separateFlag:40,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"syu",4096:"shu"},sepX:{0:"sixyu",4:"shixyu",8:"cixyu"},sepL:{0:"silyu",4:"shilyu",8:"cilyu"}}},"しぇ":{separateFlag:41,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"sye",4096:"she"},sepX:{0:"sixe",4:"shixe",8:"cixe"},sepL:{0:"sile",4:"shile",8:"cile"}}},"しょ":{separateFlag:40,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"syo",4096:"sho"},sepX:{0:"sixyo",4:"shixyo",8:"cixyo"},sepL:{0:"silyo",4:"shilyo",8:"cilyo"}}},"じゃ":{separateFlag:24,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ja",8192:"jya",16384:"zya"},sepX:{0:"zixya",16:"jixya"},sepL:{0:"zilya",16:"jilya"}}},"じぃ":{separateFlag:26,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"jyi",16384:"zyi"},sepX:{0:"zixi",16:"jixi"},sepL:{0:"zili",16:"jili"}}},"じゅ":{separateFlag:24,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ju",8192:"jyu",16384:"zyu"},sepX:{0:"zixyu",16:"jixyu"},sepL:{0:"zilyu",16:"jilyu"}}},"じぇ":{separateFlag:25,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"je",8192:"jye",16384:"zye"},sepX:{0:"zixe",16:"jixe"},sepL:{0:"zile",16:"jile"}}},"じょ":{separateFlag:24,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"jo",8192:"jyo",16384:"zyo"},sepX:{0:"zixyo",16:"jixyo"},sepL:{0:"zilyo",16:"jilyo"}}},"すぁ":{separateFlag:39,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"swa"},sepX:{0:"suxa"},sepL:{0:"sula"}}},"すぃ":{separateFlag:39,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"swi"},sepX:{0:"suxi"},sepL:{0:"suli"}}},"すぅ":{separateFlag:39,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"swu"},sepX:{0:"suxu"},sepL:{0:"sulu"}}},"すぇ":{separateFlag:39,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"swe"},sepX:{0:"suxe"},sepL:{0:"sule"}}},"すぉ":{separateFlag:39,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"swo"},sepX:{0:"suxo"},sepL:{0:"sulo"}}},"ちゃ":{separateFlag:3,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tya",32768:"cha",65536:"cya"},sepX:{0:"tixya",32:"chixya"},sepL:{0:"tilya",32:"chilya"}}},"ちぃ":{separateFlag:5,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tyi",65536:"cyi"},sepX:{0:"tixi",32:"chixi"},sepL:{0:"tili",32:"chili"}}},"ちゅ":{separateFlag:3,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tyu",32768:"chu",65536:"cyu"},sepX:{0:"tixyu",32:"chixyu"},sepL:{0:"tilyu",32:"chilyu"}}},"ちぇ":{separateFlag:4,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tye",32768:"che",65536:"cye"},sepX:{0:"tixe",32:"chixe"},sepL:{0:"tile",32:"chile"}}},"ちょ":{separateFlag:3,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tyo",32768:"cho",65536:"cyo"},sepX:{0:"tixyo",32:"chixyo"},sepL:{0:"tilyo",32:"chilyo"}}},"ぢゃ":{separateFlag:14,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dya"},sepX:{0:"dixya"},sepL:{0:"dilya"}}},"ぢぃ":{separateFlag:15,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dyi"},sepX:{0:"dixi"},sepL:{0:"dili"}}},"ぢゅ":{separateFlag:14,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dyu"},sepX:{0:"dixyu"},sepL:{0:"dilyu"}}},"ぢぇ":{separateFlag:15,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dye"},sepX:{0:"dixe"},sepL:{0:"dile"}}},"ぢょ":{separateFlag:14,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dyo"},sepX:{0:"dixyo"},sepL:{0:"dilyo"}}},"つぁ":{separateFlag:45,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tsa"},sepX:{0:"tuxa",64:"tsuxa"},sepL:{0:"tula",64:"tsula"}}},"つぃ":{separateFlag:45,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tsi"},sepX:{0:"tuxi",64:"tsuxi"},sepL:{0:"tuli",64:"tsuli"}}},"つぇ":{separateFlag:45,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tse"},sepX:{0:"tuxe",64:"tsuxe"},sepL:{0:"tule",64:"tsule"}}},"つぉ":{separateFlag:45,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tso"},sepX:{0:"tuxo",64:"tsuxo"},sepL:{0:"tulo",64:"tsulo"}}},"てゃ":{separateFlag:43,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tha"},sepX:{0:"texya"},sepL:{0:"telya"}}},"てぃ":{separateFlag:44,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"thi"},sepX:{0:"texi"},sepL:{0:"teli"}}},"てゅ":{separateFlag:43,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"thu"},sepX:{0:"texyu"},sepL:{0:"telyu"}}},"てぇ":{separateFlag:43,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"the"},sepX:{0:"texe"},sepL:{0:"tele"}}},"てょ":{separateFlag:43,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"tho"},sepX:{0:"texyo"},sepL:{0:"telyo"}}},"でゃ":{separateFlag:6,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dha"},sepX:{0:"dexya"},sepL:{0:"delya"}}},"でぃ":{separateFlag:7,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dhi"},sepX:{0:"dexi"},sepL:{0:"deli"}}},"でゅ":{separateFlag:8,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dhu"},sepX:{0:"dexyu"},sepL:{0:"delyu"}}},"でぇ":{separateFlag:6,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dhe"},sepX:{0:"dexe"},sepL:{0:"dele"}}},"でょ":{separateFlag:6,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dho"},sepX:{0:"dexyo"},sepL:{0:"delyo"}}},"とぁ":{separateFlag:46,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"twa"},sepX:{0:"toxa"},sepL:{0:"tola"}}},"とぃ":{separateFlag:46,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"twi"},sepX:{0:"toxi"},sepL:{0:"toli"}}},"とぅ":{separateFlag:46,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"twu"},sepX:{0:"toxu"},sepL:{0:"tolu"}}},"とぇ":{separateFlag:46,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"twe"},sepX:{0:"toxe"},sepL:{0:"tole"}}},"とぉ":{separateFlag:46,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"two"},sepX:{0:"toxo"},sepL:{0:"tolo"}}},"どぁ":{separateFlag:9,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dwa"},sepX:{0:"doxa"},sepL:{0:"dola"}}},"どぃ":{separateFlag:11,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dwi"},sepX:{0:"doxi"},sepL:{0:"doli"}}},"どぅ":{separateFlag:13,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dwu"},sepX:{0:"doxu"},sepL:{0:"dolu"}}},"どぇ":{separateFlag:10,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dwe"},sepX:{0:"doxe"},sepL:{0:"dole"}}},"どぉ":{separateFlag:12,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"dwo"},sepX:{0:"doxo"},sepL:{0:"dolo"}}},"にゃ":{separateFlag:31,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"nya"},sepX:{0:"nixya"},sepL:{0:"nilya"}}},"にぃ":{separateFlag:32,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"nyi"},sepX:{0:"nixi"},sepL:{0:"nili"}}},"にゅ":{separateFlag:31,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"nyu"},sepX:{0:"nixyu"},sepL:{0:"nilyu"}}},"にぇ":{separateFlag:32,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"nye"},sepX:{0:"nixe"},sepL:{0:"nile"}}},"にょ":{separateFlag:31,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"nyo"},sepX:{0:"nixyo"},sepL:{0:"nilyo"}}},"ひゃ":{separateFlag:22,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"hya"},sepX:{0:"hixya"},sepL:{0:"hilya"}}},"ひぃ":{separateFlag:23,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"hyi"},sepX:{0:"hixi"},sepL:{0:"hili"}}},"ひゅ":{separateFlag:22,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"hyu"},sepX:{0:"hixyu"},sepL:{0:"hilyu"}}},"ひぇ":{separateFlag:23,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"hye"},sepX:{0:"hixe"},sepL:{0:"hile"}}},"ひょ":{separateFlag:22,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"hyo"},sepX:{0:"hixyo"},sepL:{0:"hilyo"}}},"びゃ":{separateFlag:1,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"bya"},sepX:{0:"bixya"},sepL:{0:"bilya"}}},"びぃ":{separateFlag:2,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"byi"},sepX:{0:"bixi"},sepL:{0:"bili"}}},"びゅ":{separateFlag:1,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"byu"},sepX:{0:"bixyu"},sepL:{0:"bilyu"}}},"びぇ":{separateFlag:2,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"bye"},sepX:{0:"bixe"},sepL:{0:"bile"}}},"びょ":{separateFlag:1,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"byo"},sepX:{0:"bixyo"},sepL:{0:"bilyo"}}},"ぴゃ":{separateFlag:33,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"pya"},sepX:{0:"pixya"},sepL:{0:"pilya"}}},"ぴぃ":{separateFlag:34,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"pyi"},sepX:{0:"pixi"},sepL:{0:"pili"}}},"ぴゅ":{separateFlag:33,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"pyu"},sepX:{0:"pixyu"},sepL:{0:"pilyu"}}},"ぴぇ":{separateFlag:34,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"pye"},sepX:{0:"pixe"},sepL:{0:"pile"}}},"ぴょ":{separateFlag:33,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"pyo"},sepX:{0:"pixyo"},sepL:{0:"pilyo"}}},"ふぁ":{separateFlag:16,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fa",131072:"fwa"},sepX:{0:"huxa",128:"fuxa"},sepL:{0:"hula",128:"fula"}}},"ふぃ":{separateFlag:16,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fi",131072:"fwi",262144:"fyi"},sepX:{0:"huxi",128:"fuxi"},sepL:{0:"huli",128:"fuli"}}},"ふぅ":{separateFlag:17,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fwu"},sepX:{0:"huxu",128:"fuxu"},sepL:{0:"hulu",128:"fulu"}}},"ふぇ":{separateFlag:16,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fe",131072:"fwe",262144:"fye"},sepX:{0:"huxe",128:"fuxe"},sepL:{0:"hule",128:"fule"}}},"ふぉ":{separateFlag:16,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fo",131072:"fwo"},sepX:{0:"huxo",128:"fuxo"},sepL:{0:"hulo",128:"fulo"}}},"ふゃ":{separateFlag:18,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fya"},sepX:{0:"huxya",128:"fuxya"},sepL:{0:"hulya",128:"fulya"}}},"ふゅ":{separateFlag:18,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fyu"},sepX:{0:"huxyu",128:"fuxyu"},sepL:{0:"hulyu",128:"fulyu"}}},"ふょ":{separateFlag:18,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"fyo"},sepX:{0:"huxyo",128:"fuxyo"},sepL:{0:"hulyo",128:"fulyo"}}},"みゃ":{separateFlag:29,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"mya"},sepX:{0:"mixya"},sepL:{0:"milya"}}},"みぃ":{separateFlag:30,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"myi"},sepX:{0:"mixi"},sepL:{0:"mili"}}},"みゅ":{separateFlag:29,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"myu"},sepX:{0:"mixyu"},sepL:{0:"milyu"}}},"みぇ":{separateFlag:30,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"mye"},sepX:{0:"mixe"},sepL:{0:"mile"}}},"みょ":{separateFlag:29,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"myo"},sepX:{0:"mixyo"},sepL:{0:"milyo"}}},"りゃ":{separateFlag:37,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"rya"},sepX:{0:"rixya"},sepL:{0:"rilya"}}},"りぃ":{separateFlag:38,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ryi"},sepX:{0:"rixi"},sepL:{0:"rili"}}},"りゅ":{separateFlag:37,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ryu"},sepX:{0:"rixyu"},sepL:{0:"rilyu"}}},"りぇ":{separateFlag:38,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"rye"},sepX:{0:"rixe"},sepL:{0:"rile"}}},"りょ":{separateFlag:37,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ryo"},sepX:{0:"rixyo"},sepL:{0:"rilyo"}}},"いぇ":{separateFlag:51,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"ye"},sepX:{0:"ixe"},sepL:{0:"ile"}}},"ヴゃ":{separateFlag:52,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"vya"},sepX:{0:"vuxya"},sepL:{0:"vulya"}}},"ヴゅ":{separateFlag:52,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"vyu"},sepX:{0:"vuxyu"},sepL:{0:"vulyu"}}},"ヴょ":{separateFlag:52,xlMode:1,onlyOne:!1,romaInis:{uniXl:{0:"vyo"},sepX:{0:"vuxyo"},sepL:{0:"vulyo"}}},"０":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"0"}}},"１":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"1"}}},"２":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"2"}}},"３":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"3"}}},"４":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"4"}}},"５":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"5"}}},"６":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"6"}}},"７":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"7"}}},"８":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"8"}}},"９":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"9"}}},"ａ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"a"}}},"ｂ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"b"}}},"ｃ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"c"}}},"ｄ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"d"}}},"ｅ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"e"}}},"ｆ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"f"}}},"ｇ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"g"}}},"ｈ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"h"}}},"ｉ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"i"}}},"ｊ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"j"}}},"ｋ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"k"}}},"ｌ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"l"}}},"ｍ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"m"}}},"ｎ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"n"}}},"ｏ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"o"}}},"ｐ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"p"}}},"ｑ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"q"}}},"ｒ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"r"}}},"ｓ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"s"}}},"ｔ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"t"}}},"ｕ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"u"}}},"ｖ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"v"}}},"ｗ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"w"}}},"ｘ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"x"}}},"ｙ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"y"}}},"ｚ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"z"}}},"　":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:" "}}},"、":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:","}}},"。":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"."}}},"！":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"!"}}},"”":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:'"'}}},"＃":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"#"}}},"＄":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"$"}}},"％":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"%"}}},"＆":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"&"}}},"’":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"'"}}},"（":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"("}}},"）":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:")"}}},"＝":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"="}}},"～":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"~"}}},"｜":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"|"}}},"‘":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"`"}}},"｛":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"{"}}},"｝":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"}"}}},"＊":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"*"}}},"＋":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"+"}}},"＜":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"<"}}},"＞":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:">"}}},"？":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"?"}}},"＿":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"_"}}},"ー":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"-"}}},"－":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"-"}}},"＾":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"^"}}},"￥":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"\\"}}},"＠":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"@"}}},"「":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"["}}},"」":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"]"}}},"［":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"["}}},"］":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"]"}}},"；":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:";"}}},"：":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:":"}}},"・":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"/"}}},"／":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"/"}}},"，":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:","}}},"．":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"."}}},"Ａ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"A"}}},"Ｂ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"B"}}},"Ｃ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"C"}}},"Ｄ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"D"}}},"Ｅ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"E"}}},"Ｆ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"F"}}},"Ｇ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"G"}}},"Ｈ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"H"}}},"Ｉ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"I"}}},"Ｊ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"J"}}},"Ｋ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"K"}}},"Ｌ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"L"}}},"Ｍ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"M"}}},"Ｎ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"N"}}},"Ｏ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"O"}}},"Ｐ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"P"}}},"Ｑ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Q"}}},"Ｒ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"R"}}},"Ｓ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"S"}}},"Ｔ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"T"}}},"Ｕ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"U"}}},"Ｖ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"V"}}},"Ｗ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"W"}}},"Ｘ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"X"}}},"Ｙ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Y"}}},"Ｚ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Z"}}},0:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"0"}}},1:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"1"}}},2:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"2"}}},3:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"3"}}},4:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"4"}}},5:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"5"}}},6:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"6"}}},7:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"7"}}},8:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"8"}}},9:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"9"}}},a:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"a"}}},b:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"b"}}},c:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"c"}}},d:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"d"}}},e:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"e"}}},f:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"f"}}},g:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"g"}}},h:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"h"}}},i:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"i"}}},j:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"j"}}},k:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"k"}}},l:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"l"}}},m:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"m"}}},n:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"n"}}},o:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"o"}}},p:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"p"}}},q:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"q"}}},r:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"r"}}},s:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"s"}}},t:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"t"}}},u:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"u"}}},v:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"v"}}},w:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"w"}}},x:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"x"}}},y:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"y"}}},z:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"z"}}},A:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"A"}}},B:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"B"}}},C:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"C"}}},D:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"D"}}},E:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"E"}}},F:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"F"}}},G:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"G"}}},H:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"H"}}},I:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"I"}}},J:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"J"}}},K:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"K"}}},L:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"L"}}},M:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"M"}}},N:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"N"}}},O:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"O"}}},P:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"P"}}},Q:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Q"}}},R:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"R"}}},S:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"S"}}},T:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"T"}}},U:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"U"}}},V:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"V"}}},W:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"W"}}},X:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"X"}}},Y:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Y"}}},Z:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"Z"}}}," ":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:" "}}},"!":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"!"}}},'"':{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:'"'}}},"#":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"#"}}},$:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"$"}}},"%":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"%"}}},"&":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"&"}}},"'":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"'"}}},"(":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"("}}},")":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:")"}}},"=":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"="}}},"~":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"~"}}},"|":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"|"}}},"`":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"`"}}},"{":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"{"}}},"}":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"}"}}},"*":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"*"}}},"+":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"+"}}},"<":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"<"}}},">":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:">"}}},"?":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"?"}}},_:{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"_"}}},"-":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"-"}}},"^":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"^"}}},"\\":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"\\"}}},"@":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"@"}}},"[":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"["}}},"]":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"]"}}},";":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:";"}}},":":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:":"}}},"/":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"/"}}},",":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:","}}},".":{separateFlag:0,xlMode:0,onlyOne:!0,romaInis:{uniXl:{0:"."}}}},this.allTypeFlags={},this.valuationInis=[{border:7500,valuation:"神",comment:"もはや神の域！すごい！すごすぎる！"},{border:7250,valuation:"光",comment:"あなたがタイプするその指はまさに光速！"},{border:7e3,valuation:"王",comment:"タイピング王と呼ぶにふさわしい腕前です！"},{border:6750,valuation:"S++",comment:"タイピングマスターといってもいいほどの速さです！"},{border:6500,valuation:"S+",comment:"目にもとまらぬタイピングスピードです！"},{border:6250,valuation:"S",comment:"すごい！自慢できるスピードです！"},{border:6e3,valuation:"A++",comment:""},{border:5750,valuation:"A+",comment:""},{border:5500,valuation:"A",comment:""},{border:5250,valuation:"B++",comment:""},{border:5e3,valuation:"B+",comment:""},{border:4750,valuation:"B",comment:""},{border:4500,valuation:"C++",comment:""},{border:4250,valuation:"C+",comment:""},{border:4e3,valuation:"C",comment:""},{border:3750,valuation:"D++",comment:""},{border:3500,valuation:"D+",comment:""},{border:3250,valuation:"D",comment:""},{border:3e3,valuation:"E++",comment:""},{border:2750,valuation:"E+",comment:""},{border:2500,valuation:"E",comment:""},{border:2250,valuation:"F++",comment:""},{border:2e3,valuation:"F+",comment:""},{border:1750,valuation:"F",comment:""},{border:1500,valuation:"G++",comment:""},{border:1e3,valuation:"G+",comment:""},{border:0,valuation:"G",comment:""}]};se.prototype.initData=function(){this.siteUrl=location.protocol+"//"+location.hostname+"/",this.gameId=0,this.isRankOk=!1,this.playCount=0,this.gameIni=null,this.inputMode=new ie,this.playerName="",this.rankingUserId=0,this.isLoggedIn=!1,this.bestScoreList={},this.bestScoreAgeList=[],this.isSuccessList={},this.isPlaySe=!0,this.volume(.8),this.isShowKeyboard=!0,this.isRomaLower=!1,this.questionAlign=0,this.qbStyle(this.qbSetIni[0].style),this.nextType=1,this.qbFont=0,this.isSetUp=!1,this.testPass="",this.isTest=!1,this.testQuestionNo=0,this.originalQuestions=null,this.successIni=null,this.separateLock=1,this.separateView=1,this.readMeUrl="",this.isGraduallyBlink=!0,this.dbSettingMode=0,this.excludeStats=0,this.hideMishitRoma=!1,this.hideRoma=0,this.inputLog=0,this.settingMode=0,this.typeSoundNo=1,this.missSoundNo=1,this.questionLine=3,this.useTextMode=0,this.uuId=this.getUuId(),this.bookmarkListId=0,this.bookmarkSortNo=0;new Object;for(var e=location.search.substring(1).split("&"),t=0;t<e.length;t++){var s=e[t].split("=");1<s.length&&("blid"==s[0]?this.bookmarkListId=Number(s[1]):"bsn"==s[0]&&(this.bookmarkSortNo=Number(s[1])))}},se.prototype.resetGame=function(){this.isPartRetry=!1,this.partRetryQuestionNos=[]},se.prototype.initGame=function(){if(this._questionCount=new ae,this._romaCount=new ae,this._kanaCount=new ae,this._missCount=new ae,this._rank=new ae,this._passedTime=new ae,this._questionMax=new ae,this.playCount++,this.isPartRetry?this.isRankOk=!1:this.isRankOk=!0,this.keyLog=new Se,this.stats={},this.keyStats=new ne,this.questionStats=new ne,null==this.originalQuestions&&(this.originalQuestions=this.gameIni.questions.slice()),this.isTest||this.isPartRetry||null==this.gameIni.groupIni||""==this.gameIni.groupIni||this.makeGroupQuestions(),this.successIni={},null!=this.gameIni.successIni&&""!=this.gameIni.successIni)for(var e=this.gameIni.successIni.split(/, */),t=0;t<e.length;t++){var s=e[t].split(/: */);this.successIni[s[0]]=s[1]}this.gameIni.isEnglish&&(this.gameIni.useFurigana=1,this.isCaseSensitive=!0)},se.prototype.rank=function(e){if(void 0===e)return this._rank.getValue();this._rank.setValue(e)},se.prototype.questionCount=function(e){if(void 0===e)return this._questionCount.getValue();this._questionCount.setValue(e)},se.prototype.romaCount=function(e){if(void 0===e)return this._romaCount.getValue();this._romaCount.setValue(e)},se.prototype.kanaCount=function(e){if(void 0===e)return this._kanaCount.getValue();this._kanaCount.setValue(e)},se.prototype.missCount=function(e){if(void 0===e)return this._missCount.getValue();this._missCount.setValue(e)},se.prototype.passedTime=function(e){if(void 0===e)return this._passedTime.getValue();e<=0&&(e=1),this._passedTime.setValue(e)},se.prototype.questionMax=function(e){return _.isPartRetry?this.partRetryQuestionNos.length:0==this.gameIni.questionMax||this.isTest?this.gameIni.questions.length:this.gameIni.questionMax},se.prototype.volume=function(e){if(void 0===e)return this._volume;this._volume=Math.round(100*e)/100},se.prototype.qbStyle=function(e){if(void 0===e){var t=this.qbSetType;return"roma"==this.qbBaseName?t+="R":"kana"==this.qbBaseName?t+="N":t+="J",t+=this.qbOrder,t+=this.qbSizes.roma,t+=this.qbSizes.kana,t+=this.qbSizes.kanji}for(var s=!1,i=0;i<this.qbSetIni.length;i++)if(this.qbSetIni[i].style==e){s=!0;break}if(s){var n=e.split("");this.qbSetType=n[0];var a=n[1];this.qbBaseName="R"==a?"roma":"N"==a?"kana":"kanji",this.qbOrder=n[2],this.qbSizes={roma:n[3],kana:n[4],kanji:n[5]}}},se.prototype.questionView=function(e){if(void 0===e)return Number(this.questionLine)+Number(this.useTextMode);this.questionLine=Number(3&e),this.useTextMode=Number(48&e)},se.prototype.setGameIni=function(e){var t;this.gameIni=e;var s=["gameId","gameVersion","timeMax","useFurigana","isOfficial","endMode","questionMax","isTraining","isOpened","isLimitOpened","keyboardType","isStatic","isMovie","isLinkedSong","songType","isMovieLoop","movieAspectRatio","isSkillCheck","regulateFlag","questionAlign","prPlatformId","useNextQuestion","isEnglish","useTextMode","memoType","useAutoTrim"];for(t=0;t<s.length;t++)this.gameIni[s[t]]=Number(this.gameIni[s[t]]);for(this.autoTextAlign=2,this.useMemo=!1,t=0;t<this.gameIni.questions.length;t++){try{new ge(this.gameIni.questions[t].kana)}catch(e){console.error(e.message);var i="問題の決定失敗("+t+")";console.error(i),this.gameIni.questions.splice(t,1),t--,ee(i);continue}if(this.gameIni.questions[t].questionOption=Number(this.gameIni.questions[t].questionOption),this.gameIni.questions[t].nextQuestionNo=-1,0<t&&128&this.gameIni.questions[t].questionOption&&(this.gameIni.questions[t-1].nextQuestionNo=t),!this.useMemo&&this.gameIni.questions[t].memo&&(this.useMemo=!0),2==this.autoTextAlign)for(var n=this.gameIni.questions[t].kanji.split(/\r?\n/),a=0;a<n.length;a++){if(W(n[a])>=this.AUTO_ALIGN_LEFT_LENGTH){this.autoTextAlign=1;break}}}0==this.gameIni.questions.length&&Z(new Error("問題が見つかりませんでした。再読込してください。")),this.readMeUrl="/img/training/read-me-"+this.gameId+".png?v=186",10==this.gameIni.useTextMode&&(1==this.gameIni.useNextQuestion||2==this.gameIni.useNextQuestion&&this.gameIni.musicCode?this.gameIni.useTextMode=2:this.gameIni.useTextMode=0),2==this.gameIni.useNextQuestion&&(this.gameIni.musicCode||this.gameIni.useTextMode?this.gameIni.useNextQuestion=1:this.gameIni.useNextQuestion=0),1==this.gameIni.memoType&&(this.useMemo=!1),this.testQuestionNo=Math.min(this.gameIni.questions.length,Math.max(0,this.testQuestionNo))},se.prototype.getUuId=function(){var e,t,s="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(s+="-"),s+=(12==e?4:16==e?3&t|8:t).toString(16);return s},se.prototype.getStats=function(e){return e||(e=0),this.stats.hasOwnProperty("mode"+e)||(this.stats["mode"+e]=this.keyLog.makeStats(e)),this.stats["mode"+e]},se.prototype.isValidKana=function(e){return this.kanaToRomaInis.hasOwnProperty(e)},se.prototype.getAllTypeFlag=function(e,t){if(this.allTypeFlags.hasOwnProperty(e)||(this.allTypeFlags[e]={}),this.allTypeFlags[e].hasOwnProperty(t))return this.allTypeFlags[e][t];this.allTypeFlags[e]={};var s=0;for(var i in this.kanaToRomaInis[e].romaInis[t])s+=Number(i);return this.allTypeFlags[e][t]=s},se.prototype.getNextQuestionTextMaxLength=function(){return this.gameIni.isEnglish?46:21},se.prototype.score=function(){var e=Math.floor((this.questionCount()*this.QUESTION_SCORE+this.romaCount()*this.ROMA_SCORE+this.missCount()*this.MISS_SCORE)/this.passedTime()*1e3);return(e<0||isNaN(e))&&(e=0),e},se.prototype.bestScore=function(e){if(void 0===e)return this.bestScoreList.hasOwnProperty("id"+this.gameId)?this.bestScoreList["id"+this.gameId]:0;this.bestScoreList["id"+this.gameId]=e;var t=this.bestScoreAgeList.indexOf(this.gameId);0<=t&&this.bestScoreAgeList.splice(t,1),this.bestScoreAgeList.push(this.gameId),this.limitBestScoreList()},se.prototype.limitBestScoreList=function(e){if(void 0===e&&(e=this.BEST_SCORE_LIST_MAX),this.bestScoreAgeList.length>e){for(var t=0;t<this.bestScoreAgeList.length-e;t++)delete this.bestScoreList["id"+this.bestScoreAgeList[t]];this.bestScoreAgeList.splice(0,this.bestScoreAgeList.length-e)}},se.prototype.isSuccess=function(){var e=!1,t=0,s=0;for(var i in this.successIni)t++,"T"==i&&10*this.successIni[i]>=this.passedTime()?s++:"S"==i&&this.score()>=this.successIni[i]?s++:"R"==i&&this.romaCount()/(this.romaCount()+this.missCount())*100>=this.successIni[i]&&s++;return 0<s&&t<=s&&(e=!0,this.isSuccessList["id"+this.gameId]=!0),e},se.prototype.wasSuccess=function(){return this.isSuccessList.hasOwnProperty("id"+this.gameId)?this.isSuccessList["id"+this.gameId]:this.isSuccess()},se.prototype.isSuccessMode=function(){for(var e in this.successIni)return!0;return!1},se.prototype.successCondition=function(){var e="";return this.successIni.hasOwnProperty("S")&&(e+=this.successIni.S+"点以上"),this.successIni.hasOwnProperty("T")&&(""!=e&&(e+="、"),e+=this.successIni.T+"秒以内"),this.successIni.hasOwnProperty("R")&&(""!=e&&(e+="、"),e+="正誤率"+this.successIni.R+"%以上"),e},se.prototype.successRateText=function(e,t){void 0===e&&(e=this.romaCount()),void 0===t&&(t=this.missCount());var s="";return"100.0%"==(s=0<e+t?Number(Math.floor(e/(e+t)*1e3)/10).toFixed(1)+"%":"0.0%")&&(s="100%"),s},se.prototype.speedText=function(e,t,s){return void 0===e&&(e=this.romaCount()),void 0===t&&(t=this.passedTime()),void 0===s&&(s=1),Number(Math.floor(e/t*10*Math.pow(10,s))/Math.pow(10,s)).toFixed(s)},se.prototype.passedTimeText=function(e,t){void 0===e&&(e=this.passedTime()),void 0===t&&(t=1);return 1e4<=e?Math.floor(e/10).toString():Number(e/10).toFixed(t)},se.prototype.save=function(){try{var e,t;for($.cookie(this.COOKIE_KEY+".saveTime",JSON.stringify(new Date,this.COOKIE_OPTION)),e=0;e<this.SAVE_KEYS.length;e++)t=this.getSaveData(this.SAVE_KEYS[e]),$.cookie(this.COOKIE_KEY+"."+this.SAVE_KEYS[e],JSON.stringify(t),this.COOKIE_OPTION);for(e=0;e<this.SAVE_STORAGE_KEYS.length;e++)t=this.getSaveData(this.SAVE_STORAGE_KEYS[e]),localStorage.setItem(this.STORAGE_KEY+"."+this.SAVE_STORAGE_KEYS[e],JSON.stringify(t))}catch(e){}},se.prototype.saveDbSetting=function(){if(this.dbSettingMode){var e={};try{for(var t=0;t<this.SAVE_DB_SETTING_KEYS.length;t++)e[this.SAVE_DB_SETTING_KEYS[t]]=this.getSaveData(this.SAVE_DB_SETTING_KEYS[t]);var s={};s.dbSetting=JSON.stringify(e),s.t=+new Date,$.ajax({type:"POST",url:"user/save-game-db-setting",data:s,dataType:"json"}).done(function(e,t,s){"OK"!=e.status&&(e.hasOwnProperty("message")?Z(new Error(e.message)):Z(new Error("設定の保存に失敗しました。\nあとでもう一度お試しください。")))}).fail(function(e,t,s){d.showAlert("設定の通信に失敗しました。\n再読込してください。")})}catch(e){d.showAlert("設定の通信で異常が発生しました。\n再読込してください。")}}},se.prototype.getSaveData=function(e){return"inputMode"==e?this.inputMode.getSaveData():"volume"==e?this.volume():"mtjv"==e?"1.5":"qbStyle"==e?this.qbStyle():"questionView"==e?this.questionView():this[e]},se.prototype.load=function(){var e,t;this.initData();try{for(e=0;e<this.SAVE_KEYS.length;e++)null!==(t=$.cookie(this.COOKIE_KEY+"."+this.SAVE_KEYS[e]))&&(t=JSON.parse(t),this.setLoadData(this.SAVE_KEYS[e],t))}catch(e){}try{for(e=0;e<this.SAVE_STORAGE_KEYS.length;e++)null!==(t=localStorage.getItem(this.STORAGE_KEY+"."+this.SAVE_STORAGE_KEYS[e]))&&this.setLoadData(this.SAVE_STORAGE_KEYS[e],JSON.parse(t))}catch(e){}this.clMtjv=this.mtjv;var s=[];for(var i in this.bestScoreList)s.push({id:Number(i.substring(2)),score:this.bestScoreList[i]});if(s.length!=this.bestScoreAgeList.length)for(this.bestScoreAgeList=[],s.sort(function(e,t){return e.score<t.score?-1:e.score>t.score?1:0}),e=0;e<s.length;e++)this.bestScoreAgeList.push(s[e].id);this.limitBestScoreList()},se.prototype.loadDbSetting=function(e){if(this.dbSettingMode)try{var t=new Blowfish(""),s=JSON.parse(t.base64Decode(e));if(null!==s)for(var i=0;i<this.SAVE_DB_SETTING_KEYS.length;i++){var n=this.SAVE_DB_SETTING_KEYS[i];s.hasOwnProperty(n)&&("playerName"==n?this.setLoadData(n,decodeURIComponent(escape(s[n]))):this.setLoadData(n,s[n]))}}catch(e){}},se.prototype.setLoadData=function(e,t){"inputMode"==e?this.inputMode.setLoadData(t):"volume"==e?this.volume(t):"qbStyle"==e?this.qbStyle(t):"questionView"==e?this.questionView(t):this[e]=t},se.prototype.getValuation=function(e){var t=this.getValuationNo(e);return this.valuationInis[t].valuation},se.prototype.getLevel=function(e){if(this.gameIni.levels.length<1)return this.getValuation(e);var t=this.getValuationNo(e),s=Math.floor((t+1)/this.valuationInis.length*this.gameIni.levels.length)-1;return s>=this.gameIni.levels.length&&(s=this.gameIni.levels.length-1),s<0&&(s=0),this.gameIni.levels[s]},se.prototype.getValuationNo=function(e){for(var t=this.valuationInis.length-1,s=0;s<this.valuationInis.length;s++)if(e>=this.valuationInis[s].border){t=s;break}return Number(t)},se.prototype.makeGroupQuestions=function(){if(null!=this.gameIni.groupIni&&""!=this.gameIni.groupIni){for(var e=[],t={},s=this.gameIni.groupIni.split(/, */),i=0;i<s.length;i++){var n=s[i].split(/: */);t[n[0]]={count:n[1],questions:[],isMade:!1}}for(i=0;i<this.originalQuestions.length;i++)t.hasOwnProperty(this.originalQuestions[i].groupName)&&t[this.originalQuestions[i].groupName].questions.push(this.originalQuestions[i]);for(i=0;i<this.originalQuestions.length;i++)if(t.hasOwnProperty(this.originalQuestions[i].groupName)){var a=t[this.originalQuestions[i].groupName];if(0==a.isMade){var o=[];0==a.count&&(a.count=a.questions.length);for(var l=-1,r=0;r<a.count;r++){if(0==o.length)for(var h=0;h<a.questions.length;h++)o.push(h);var c=Math.floor(Math.random()*o.length);o[c]==l&&(c=(c+1)%o.length),e.push(a.questions[o[c]]),l=o[c],o.splice(c,1)}a.isMade=!0}}else e.push(this.originalQuestions[i]);this.gameIni.questions=e}},se.prototype.getRankingUrl=function(){var e="/ranking?gameId="+this.gameId;return 0<this.rankingUserId&&(e+="&rankingUserId="+this.rankingUserId),this.trainingUrl&&(e+="&trainingUrl="+encodeURIComponent(this.trainingUrl)),this.gameIni.isLimitOpened&&(e+="&pw="+encodeURIComponent(this.testPass)),0<this.bookmarkListId&&(e+="&blid="+this.bookmarkListId),0<this.bookmarkSortNo&&(e+="&bsn="+this.bookmarkSortNo),e};var ie=function(){this.XL_MODE_NOUSE=0,this.XL_MODE_USE=1,this.TYPE_DEFAULT=0,this.TYPE_CA=1,this.TYPE_QU=2,this.TYPE_SHI=4,this.TYPE_CI=8,this.TYPE_JI=16,this.TYPE_CHI=32,this.TYPE_TSU=64,this.TYPE_FU=128,this.TYPE_WHI=256,this.TYPE_QYI=512,this.TYPE_QWA=1024,this.TYPE_KWA=2048,this.TYPE_SHA=4096,this.TYPE_JYA=8192,this.TYPE_ZYA=16384,this.TYPE_CHA=32768,this.TYPE_CYA=65536,this.TYPE_FWA=131072,this.TYPE_FYI=262144,this.TYPE_XN=524288,this.XL_L=0,this.XL_X=1,this.SEPARATE_NONE=0,this.SEPARATE_BYA=1,this.SEPARATE_BYI=2,this.SEPARATE_CYA=3,this.SEPARATE_CYE=4,this.SEPARATE_CYI=5,this.SEPARATE_DHA=6,this.SEPARATE_DHI=7,this.SEPARATE_DHU=8,this.SEPARATE_DWA=9,this.SEPARATE_DWE=10,this.SEPARATE_DWI=11,this.SEPARATE_DWO=12,this.SEPARATE_DWU=13,this.SEPARATE_DYA=14,this.SEPARATE_DYI=15,this.SEPARATE_FA=16,this.SEPARATE_FWU=17,this.SEPARATE_FYA=18,this.SEPARATE_GWA=19,this.SEPARATE_GYA=20,this.SEPARATE_GYI=21,this.SEPARATE_HYA=22,this.SEPARATE_HYI=23,this.SEPARATE_JYA=24,this.SEPARATE_JYE=25,this.SEPARATE_JYI=26,this.SEPARATE_KYA=27,this.SEPARATE_KYI=28,this.SEPARATE_MYA=29,this.SEPARATE_MYI=30,this.SEPARATE_NYA=31,this.SEPARATE_NYI=32,this.SEPARATE_PYA=33,this.SEPARATE_PYI=34,this.SEPARATE_QWA=35,this.SEPARATE_QYA=36,this.SEPARATE_RYA=37,this.SEPARATE_RYI=38,this.SEPARATE_SWA=39,this.SEPARATE_SYA=40,this.SEPARATE_SYE=41,this.SEPARATE_SYI=42,this.SEPARATE_THA=43,this.SEPARATE_THI=44,this.SEPARATE_TSA=45,this.SEPARATE_TWA=46,this.SEPARATE_VA=47,this.SEPARATE_WE=48,this.SEPARATE_WHA=49,this.SEPARATE_WI=50,this.SEPARATE_YE=51,this.SEPARATE_VYA=52,this.SEPARATE_QA=53,this.separateFlags={},this.typeFlag=0,this.xlFlag=this.XL_L;var e=[];e[1]=[this.SEPARATE_VA,this.SEPARATE_KYA,this.SEPARATE_GYA,this.SEPARATE_SYA,this.SEPARATE_SYE,this.SEPARATE_JYA,this.SEPARATE_JYE,this.SEPARATE_CYA,this.SEPARATE_CYE,this.SEPARATE_NYA,this.SEPARATE_HYA,this.SEPARATE_BYA,this.SEPARATE_PYA,this.SEPARATE_FA,this.SEPARATE_MYA,this.SEPARATE_RYA],e[2]=[this.SEPARATE_WHA,this.SEPARATE_WI,this.SEPARATE_WE,this.SEPARATE_VA,this.SEPARATE_KYA,this.SEPARATE_GYA,this.SEPARATE_QA,this.SEPARATE_SYA,this.SEPARATE_SYE,this.SEPARATE_JYA,this.SEPARATE_JYE,this.SEPARATE_CYA,this.SEPARATE_CYE,this.SEPARATE_THI,this.SEPARATE_DHI,this.SEPARATE_DHU,this.SEPARATE_NYA,this.SEPARATE_HYA,this.SEPARATE_BYA,this.SEPARATE_PYA,this.SEPARATE_FA,this.SEPARATE_MYA,this.SEPARATE_RYA,this.SEPARATE_YE];this.separateFlags[this.SEPARATE_NONE]=!1,this.defaultSeparateLocks=[],this.defaultSeparateLocks[1]=[],this.defaultSeparateLocks[2]=[];for(var t=1;t<=53;t++){this.separateFlags[t]=!1;for(var s=1;s<=2;s++)0<=e[s].indexOf(t)?this.defaultSeparateLocks[s][t]=!0:this.defaultSeparateLocks[s][t]=!1}};ie.prototype.getSaveData=function(){var e={};for(var t in e.xlFlag=this.xlFlag,e.typeFlag=this.typeFlag,e.separateFlags={},this.separateFlags)e.separateFlags[t]=Number(this.separateFlags[t]);return e},ie.prototype.setLoadData=function(e){if(e.hasOwnProperty("xlFlag")&&(this.xlFlag=Number(e.xlFlag)),e.hasOwnProperty("typeFlag")&&(this.typeFlag=Number(e.typeFlag)),e.hasOwnProperty("separateFlags"))for(var t in e.separateFlags)this.separateFlags[t]=Boolean(e.separateFlags[t])},ie.prototype.changeMode=function(e,t,s,i){this.typeFlag=this.typeFlag-(this.typeFlag&_.getAllTypeFlag(e,s))+Number(i),this.getRomaIniKey(t)!=s&&("uniL"==s||"sepL"==s?this.xlFlag=this.XL_L:"uniX"!=s&&"sepX"!=s||(this.xlFlag=this.XL_X),0<t.separateFlag&&(this.separateFlags[t.separateFlag]="sepL"==s||"sepX"==s))},ie.prototype.getRomaIniKey=function(e){return e.separateFlag==this.SEPARATE_NONE?e.xlMode==this.XL_MODE_NOUSE?"uniXl":this.xlFlag==this.XL_X?"uniX":"uniL":this.separateFlags[e.separateFlag]?this.xlFlag==this.XL_X?"sepX":"sepL":"uniXl"},ie.prototype.getOrderRomaIniKeys=function(e){if(e.separateFlag!=this.SEPARATE_NONE&&3!=_.separateLock&&(0==_.separateLock||this.defaultSeparateLocks[_.separateLock][e.separateFlag]))return["uniXl"];var t=this.getRomaIniKey(e);return"uniXl"==t?["uniXl","uniL","uniX","sepL","sepX"]:"uniL"==t?["uniL","uniX","uniXl","sepL","sepX"]:"uniX"==t?["uniX","uniL","uniXl","sepX","sepL"]:"sepL"==t?["sepL","sepX","uniXl","uniL","uniX"]:"sepX"==t?["sepX","sepL","uniXl","uniX","uniL"]:void 0};var ne=function(){this._stats={},this.preTime=0,this._orderIndexes={}};ne.prototype.stats=function(){return this._stats},ne.prototype.csvStats=function(){var e={};for(var t in this._stats)e[t]=this._stats[t].successCount+","+this._stats[t].missCount+","+this._stats[t].time;return e},ne.prototype.add=function(e){this._stats[e]={successCount:0,missCount:0,time:0,no:0,index:e},this._stats[e].no=Object.keys(this._stats).length-1},ne.prototype.countSuccess=function(e,t){this._stats.hasOwnProperty(e)||this.add(e),this._stats[e].successCount++,this._stats[e].time+=t-this.preTime,this.preTime=t},ne.prototype.countMiss=function(e){this._stats.hasOwnProperty(e)||this.add(e),this._stats[e].missCount++},ne.prototype.getOrderIndexes=function(e){if(!this._orderIndexes.hasOwnProperty(e)){this._orderIndexes[e]=[];var n=1,a=-1,o=e;0<=o.search(/^-/)&&(n=-1,a=1,o=e.replace(/^-/,""));var t=[];for(var s in this._stats)t.push(this._stats[s]);t=t.sort(function(e,t){var s=e[o],i=t[o];return"index"==o&&(s=e,i=t),i<s?n:s<i?a:0});for(var i=0;i<t.length;i++)this._orderIndexes[e].push(t[i].index)}return this._orderIndexes[e]};var ae=function(e){void 0===e&&(e=0),this.MULTI_MIN=11,this.MULTI_MAX=99,this.ADD_MIN=1000001,this.ADD_MAX=9999999,this.MIN=-99999999,this.MAX=99999999,this._value,this._checkValue,this._random,this._constA=-1*(Math.floor(Math.random()*(this.MULTI_MAX-this.MULTI_MIN+1))+this.MULTI_MIN),this._constB=Math.floor(Math.random()*(this.ADD_MAX-this.ADD_MIN+1))+this.ADD_MIN,this._constC=Math.floor(Math.random()*(this.MULTI_MAX-this.MULTI_MIN+1))+this.MULTI_MIN,this._constD=Math.floor(Math.random()*(this.ADD_MAX-this.ADD_MIN+1))+this.ADD_MIN,this.setValue(e)};ae.prototype.getValue=function(){var e=(this._value-this._constB-this._random)/this._constA;return e!=(this._checkValue-this._constD-this._random)/this._constC&&Z(new Error("value error")),e+0},ae.prototype.setValue=function(e){(e>this.MAX||e<this.MIN)&&Z(new Error("value range error")),this._random=Math.floor(Math.random()*(this.ADD_MAX-this.ADD_MIN+1))+this.ADD_MIN,this._value=this._constA*e+this._constB+this._random,this._checkValue=this._constC*e+this._constD+this._random};var oe=function(e){if(this.src=e,this.src){this.soundMax=10,this.soundNo=0,this.audios=[];try{for(var t=0;t<this.soundMax;t++)this.audios.push(new Audio(e+"?t="+t))}catch(e){ee(e.message),this.src=null,this.audios=[]}this.setVolume(_.volume())}};oe.prototype.play=function(){if(_.isPlaySe&&this.src)try{this.audios[this.soundNo].currentTime=0,this.audios[this.soundNo].play(),this.soundNo++,this.soundNo>=this.soundMax&&(this.soundNo=0)}catch(e){}},oe.prototype.setVolume=function(e){if(this.src)try{for(var t=0;t<this.audios.length;t++)this.audios[t].volume=e}catch(e){}},oe.prototype.readyState=function(){var e=4;if(!this.src)return e;for(var t=0;t<this.audios.length;t++)this.audios[t].readyState<e&&(e=this.audios[t].readyState);return e};var le=function(e){if(this.src=e,this.src){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.request=new XMLHttpRequest,this.source=null,this.context.createGain=this.context.createGain||this.context.createGainNode,this.gainNode=this.context.createGain(),this.buffer=null;var t=this;this.request.onreadystatechange=function(){4===t.request.readyState&&(0!==t.request.status&&200!==t.request.status||(t.context.decodeAudioData(t.request.response,function(e){t.buffer=e}),document.addEventListener("keydown",function e(){try{t.context.resume().then(function(){document.removeEventListener("keydown",e)})}catch(e){}})))},this.request.open("GET",e,!0),this.request.responseType="arraybuffer",this.request.send("")}catch(e){this.src=null}this.setVolume(_.volume())}};le.prototype.play=function(){if(_.isPlaySe&&this.src)try{var e=this.context.createBufferSource();e.buffer=this.buffer,e.connect(this.gainNode),this.gainNode.connect(this.context.destination),e.start(0),this.source=e}catch(e){}},le.prototype.setVolume=function(e){if(this.src)try{this.gainNode.gain.value=e}catch(e){}},le.prototype.readyState=function(){return this.src?this.request.readyState:4};var re=function(e,t){this.screenNo=e,this.className=t,this.screenSelector,this.frame=0,this.openedFrame=0,this._selectors={},this.isInitStyle=!1,this.isOpened=!1,this.initStyles={},this.openAnimes={},this.closeAnimes={},this.MARGIN=20,this.offStageTop=-(451+this.MARGIN),this.offStageBottom=451+this.MARGIN,this.offStageLeft=-(724+this.MARGIN),this.offStageRight=724+this.MARGIN,this.PADDING=5,this.onStageTop=this.PADDING,this.onStageBottom=451+this.MARGIN,this.onStageLeft=this.PADDING,this.onStageRight=-this.PADDING,r.append('<div class="'+this.className+' mtjSc">'),this.screenSelector=r.find("."+this.className),this.screenSelector.hide(),this.initStyles={screen:{opacity:0}},this.openAnimes={screen:{params:{opacity:1}}},this.closeAnimes={screen:{params:{opacity:0}}},this.blinks={},this.shortCuts=[]};re.prototype.initScreen=function(){},re.prototype.selector=function(e){var t;return"screen"==e?t=this.screenSelector:(this._selectors.hasOwnProperty(e)||(this._selectors[e]=r.find("."+this.className+"-"+e)),t=this._selectors[e]),t},re.prototype.removeSelector=function(e){this._selectors.hasOwnProperty(e)&&delete this._selectors[e]},re.prototype.getFontSize=function(e,t,s){return Math.min(Math.floor(t/e.length),s)},re.prototype.initStyle=function(){for(var e in this.initStyles){var t=this.selector(e);for(var s in this.initStyles[e])t.css(s,this.initStyles[e][s])}this.isInitStyle=!0},re.prototype.openScreen=function(e){var t;for(var s in this.frame=0,this.openedFrame=0,this.blinks)this.blinks[s].enabled=!0,this.startBlink(s);this.isInitStyle||this.initStyle(),this.screenSelector.show(),t=void 0===e?this.animate(this.openAnimes):e;var i=this;setTimeout(function(){i.isOpened=!0,i.openedFrame=i.frame},t,this),this.showShortCuts(),c.animate({opacity:1},500)},re.prototype.closeScreen=function(e,t){var s;this.isOpened=!1,void 0===t?(s=this.animate(this.closeAnimes),this.screenNo==e&&(s+=300)):s=t;var i=this;setTimeout(function(){i.screenSelector.hide(),Q(e)},s),c.animate({opacity:0},500)},re.prototype.animate=function(e){this.isInitStyle=!1;var t=0;for(var s in e){var i,n;t<(i=e[s].hasOwnProperty("delay")?e[s].delay:0)+(n=e[s].hasOwnProperty("duration")?e[s].duration:500)&&(t=i+n),this.animatePart(s,e[s].params,n,i)}return t},re.prototype.animatePart=function(e,t,s,i){var n=this.selector(e);0<i?setTimeout(function(){n.animate(t,s)},i,s):n.animate(t,s)},re.prototype.keyDown=function(e){},re.prototype.keyUp=function(e){},re.prototype.onFrame=function(){this.frame++},re.prototype.getImageText=function(e,t){e+="";var s="mtjIt";t&&(s="mtjItRed");for(var i="",n=0;n<e.length;n++)switch(e.charAt(n)){case"/":i+='<span class="'+s+' mtjIt-slash"></span>';break;default:i+='<span class="'+s+" mtjIt-"+e.charAt(n)+'"></span>'}return i},re.prototype.blink=function(e){if(this.blinks[e].isBlink&&this.blinks[e].enabled){var t,s=this.blinks[e].startFrame,i=this.blinks[e].showFrame,n=this.blinks[e].hideFrame,a=this.blinks[e].intervalFrame,o=(this.blinks[e].blinkFrame+s)%(i+n+2*a);o<i?t=1:o<i+a?t=_.isGraduallyBlink?(i+a-o)/a:1:o<i+a+n?t=0:o<i+2*a+n&&(t=_.isGraduallyBlink?(o-(i+a+n))/a:0),this.selector(e).css("opacity",t),this.blinks[e].blinkFrame++}},re.prototype.startBlink=function(e){this.blinks[e].isBlink=!0,this.blinks[e].blinkFrame=0,this.blinks[e].hasOwnProperty("startTime")||(this.blinks[e].startTime=0),this.blinks[e].startFrame=G(this.blinks[e].startTime),this.blinks[e].showFrame=G(this.blinks[e].showTime),this.blinks[e].hideFrame=G(this.blinks[e].hideTime),this.blinks[e].intervalFrame=G(this.blinks[e].intervalTime)},re.prototype.stopBlink=function(e,t){1==t&&this.selector(e).css("opacity",1),this.blinks[e].isBlink=!1},re.prototype.showShortCuts=function(){for(var e="",t=[],s=0;s<this.shortCuts.length;s++)if(!(0<=t.indexOf(this.shortCuts[s].key)||this.shortCuts[s].hasOwnProperty("linkPartsName")&&this.shortCuts[s].linkPartsName&&!isVisible(this.selector(this.shortCuts[s].linkPartsName)))){t.push(this.shortCuts[s].key);var i=this.shortCuts[s].name;if(this.shortCuts[s].hasOwnProperty("linkPartsName")&&this.shortCuts[s].linkPartsName){var n=this.selector(this.shortCuts[s].linkPartsName).find("span:eq(1)").html();i=i.replace(/<NAME>/,n)}e+='<span class="mtjShortCut"><span class="mtjShortCutKey">'+this.shortCuts[s].key+"</span>"+i+"</span>",this.shortCuts[s].hasOwnProperty("after")&&(e+=this.shortCuts[s].after)}e||(e="&nbsp;"),e='<div class="mtjShortCuts">'+e+"</div>",c.html(e)};var he=function(e){re.call(this,e,"mtjLdSc"),this.isSetGameIni=!1,this.IMAGE_LOAD_LIMIT=150,this.AUDIO_LOAD_LIMIT=90,this.IMAGE_CHECK_404=30,this.isComplete=!1,this.loadImages=[],this.loadSounds=[],this.loadAudioCount=0,this.loadImageCount=0;var t='<div class="'+this.className+'-loading mtjPt mtjFont">読み込み中</div>';this.screenSelector[0].innerHTML=t,this.initStyles={screen:{opacity:1},loading:{left:0,top:195}},this.blinks={loading:{showTime:900,hideTime:300,intervalTime:150}}};U(he,re),he.prototype.initScreen=function(){if(this.isSetGameIni=!1,re.prototype.initScreen.call(this),_.gameId=Number(J(l.attr("gameId"),0)),_.testPass=J(l.attr("testPass")),_.testQuestionNo=Number(J(l.attr("testQuestionNo"),0)),_.playerName||(_.playerName=J(l.attr("playerName"))),Number(J(l.attr("rankingUserId"),0))&&(_.rankingUserId=Number(J(l.attr("rankingUserId"),0))),_.isLoggedIn=Boolean(J(l.attr("isLoggedIn"))),_.testPass&&(_.isTest=!0),l.attr("pw")&&(_.testPass=l.attr("pw")),_.dbSettingMode=Number(J(l.attr("dbSettingMode"),0)),_.loadDbSetting(l.attr("dbSetting")),0<l.find(".mtjLoad img").length){var t=this;l.find(".mtjLoad img").each(function(e){t.loadImages.push($(this)[0])})}this.loadSounds.push(p),this.loadSounds.push(m);var e={};e.gameId=_.gameId,_.isTest&&(e.testPass=_.testPass),_.testPass&&(e.pw=_.testPass),e.t=+new Date,$.ajax({type:"POST",url:"game-json",data:e,dataType:"json",context:this}).done(function(e,t,s){"OK"!=e.status&&(e.hasOwnProperty("message")?Z(new Error(e.message)):Z(new Error("タイピングデータが不正です。"))),_.setGameIni(e.data);var i=l.find(".mtjLoad");0==this.loadImages.length&&(0==l.find(".mtjLoad").length&&l.append('<div class="mtjLoad"></div>'),this.loadImages.push($('<img src="'+_.gameIni.backgroundImageUrl1+'" />').appendTo(i)[0]),this.loadImages.push($('<img src="'+_.gameIni.backgroundImageUrl2+'" />').appendTo(i)[0])),_.gameIni.readMeImageUrl&&this.loadImages.push($('<img src="'+_.readMeUrl+'" />').appendTo(i)[0]),this.isSetGameIni=!0}).fail(function(e,t,s){d.showAlert("通信に失敗しました。\n再読込してください。")})},he.prototype.onFrame=function(){if(re.prototype.onFrame.call(this),this.isOpened&&!this.isComplete){this.blink("loading");var e,t=!0;if(this.isSetGameIni){for(e=0;e<this.loadImages.length&&!(this.loadImageCount>this.IMAGE_LOAD_LIMIT);e++)if(0==e&&this.loadImageCount++,!this.loadImages[e].complete){if(this.loadImageCount%this.IMAGE_CHECK_404!=1||"ie"!=_.browser){t=!1;break}var s;if((s=new XMLHttpRequest).open("HEAD",this.loadImages[e].src,!1),s.send(null),404!=s.status){t=!1;break}}for(e=0;e<this.loadSounds.length&&!(this.loadAudioCount>this.AUDIO_LOAD_LIMIT);e++)if(0==e&&this.loadAudioCount++,this.loadSounds[e].readyState()<=1){t=!1;break}}else t=!1;t&&(this.isComplete=!0,_.isSetUp?this.closeScreen(x):this.closeScreen(N))}};var ce=function(e){re.call(this,e,"mtjStSc");var t='<text x="50%" y="50%" dy="0.4em">'+h(_.gameIni.title)+"</text>";"ie"!=_.browser&&"safari"!=_.browser||(t+=t);var s='<div class="'+this.className+'-backgroundImage mtjPt mtjMainBk"><img src="'+_.gameIni.backgroundImageUrl1+'"></div><div class="'+this.className+'-title mtjPt"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">'+t+'</svg></div><div class="'+this.className+'-producedBy mtjPt">Produced by '+h(_.gameIni.userName)+' and myTyping. JS-1.5.</div><div class="'+this.className+'-playerCount mtjPt">You are the '+_.gameIni.playCount+"th player, since "+_.gameIni.sinceDate+'.</div><div class="'+this.className+'-btnArea mtjPt"><div class="'+this.className+'-startBtn mtjRectBtn mtjPt"><span>'+u.getHtml("start")+'<span>スタート</span></span></div><div class="'+this.className+'-settingBtn mtjRectBtn mtjPt"><span>'+u.getHtml("setting")+'<span>設定</span></span></div><div class="'+this.className+'-rankingBtn mtjRectBtn mtjPt"><span>'+u.getHtml("crown")+"<span>ランキング</span></span></div></div>";_.gameIni.hasOwnProperty("prUrl")&&_.gameIni.prUrl&&(s+='<div class="'+this.className+'-pr mtjPt"><a href="'+_.gameIni.prUrl+'" rel="nofollow" target="_blank"><img src="'+_.gameIni.prImage.croppedImageUrl1+'"></a><div class="mtjText">&lt;PR&gt;</div></div>'),this.screenSelector[0].innerHTML=s,this.initStyles={screen:{opacity:1},backgroundImage:{opacity:0},title:{left:this.offStageLeft,top:38,"font-size":this.getFontSize(_.gameIni.title,704,64)},reviewRate:{left:this.offStageLeft,top:373},playerCount:{left:this.offStageLeft,top:389},producedBy:{left:this.offStageLeft,top:407},startBtn:{left:this.offStageLeft,top:230},settingBtn:{left:this.offStageLeft,top:280},rankingBtn:{left:this.offStageLeft,top:330}},_.gameIni.hasOwnProperty("prUrl")&&_.gameIni.prUrl&&(this.initStyles.pr={left:this.offStageLeft,top:105},this.initStyles.title.top=-25,this.initStyles.producedBy.width=360);var i=0,n=100;if(this.openAnimes={backgroundImage:{params:{opacity:.8},delay:i+=n},title:{params:{left:0},delay:i+=n},reviewRate:{params:{left:0},delay:i+=n},producedBy:{params:{left:0},delay:i+=n},playerCount:{params:{left:0},delay:i+=n},startBtn:{params:{left:295},delay:i+=n},settingBtn:{params:{left:295},delay:i+=n},rankingBtn:{params:{left:295},delay:i+=n}},_.gameIni.hasOwnProperty("prUrl")&&_.gameIni.prUrl){this.openAnimes.producedBy.params.left=8,this.openAnimes.playerCount.params.left+=-172,this.openAnimes.startBtn.params.left+=-172,this.openAnimes.settingBtn.params.left+=-172,this.openAnimes.rankingBtn.params.left+=-172,this.openAnimes.pr={params:{left:380},delay:i+=n}}this.shortCuts=[{key:"SPACE",name:"スタート"},{key:"S",name:"設定"},{key:"R",name:"ランキング"}]};U(ce,re),ce.prototype.initScreen=function(){re.prototype.initScreen.call(this),this.selector("startBtn").click({self:this},function(e){e.data.self.openGame()}),this.selector("settingBtn").click({self:this},function(e){e.data.self.openSetting()}),this.selector("rankingBtn").click({self:this},function(e){e.data.self.openRanking()})},ce.prototype.keyDown=function(e){e.keyCode==w||e.keyCode==F?this.openGame():83==e.keyCode?this.openSetting():82==e.keyCode&&this.openRanking()},ce.prototype.openGame=function(){_.resetGame(),_.gameIni.readMeImageUrl?this.closeScreen(s):this.closeScreen(M)},ce.prototype.openRanking=function(){location.href=_.getRankingUrl()},ce.prototype.openSetting=function(){this.closeScreen(N)};var ue=function(e){re.call(this,e,"mtjSeSc");for(var t='<select class="'+this.className+'-qbStyleSelect" name="'+this.className+'-qbStyleSelect">',s=0;s<_.qbSetIni.length;s++)t+='<option value="'+_.qbSetIni[s].style+'">'+_.qbSetIni[s].name+"</option>";t+="</select>";var i='<div class="'+this.className+'-backgroundImage mtjPt mtjMainBk"><img src="'+_.gameIni.backgroundImageUrl1+'"></div><div class="'+this.className+'-box mtjModalBox mtjInputBox"><h3>◆お好みの設定を選んでください</h3><div class="'+this.className+'-switchBtn mtjIsSetUp"><span class="mtjTagBtn mtjSimple">詳細表示</span><span class="mtjTagBtn mtjAdvanced">簡易表示</span></div><div class="'+this.className+'-settingMain"><div class="'+this.className+'-settingList mtjSettingList"><div class="mtjCategory"><div class="mtjTitle">・効果音</div><div class="mtjItems"><div class="'+this.className+'-isPlaySe"><span class="'+this.className+'-isPlaySe-1 mtjIconItem"><span class="mtjBtn mtjFont">あり</span></span><span class="'+this.className+'-isPlaySe-0 mtjIconItem"><span class="mtjBtn mtjFont">なし</span></span></div><div class="'+this.className+'-typeSoundNo mtjAdvanced"><span class="mtjTitle">打鍵音</span><select class="'+this.className+'-typeSoundNoSelect" name="'+this.className+'-typeSoundNoSelect"><option value="1">あり(初期値)</option><option value="0">なし</option></select></div><div class="'+this.className+'-missSoundNo mtjAdvanced"><span class="mtjTitle">ミス音</span><select class="'+this.className+'-missSoundNoSelect" name="'+this.className+'-missSoundNoSelect"><option value="1">あり(初期値)</option><option value="2">ブザー音</option><option value="0">なし</option></select></div></div></div><div class="mtjCategory"><div class="mtjTitle">・キーボード</div><div class="mtjItems"><div class="'+this.className+'-isShowKeyboard"><span class="'+this.className+'-isShowKeyboard-1 mtjIconItem"><span class="mtjBtn mtjFont">表示</span></span><span class="'+this.className+'-isShowKeyboard-0 mtjIconItem"><span class="mtjBtn mtjFont">非表示</span></span></div></div></div><div class="mtjCategory"><div class="mtjTitle">・ローマ字</div><div class="mtjItems"><div class="'+this.className+'-isRomaLower"><span class="'+this.className+'-isRomaLower-0 mtjIconItem"><span class="mtjBtn mtjFont">大文字</span></span><span class="'+this.className+'-isRomaLower-1 mtjIconItem"><span class="mtjBtn mtjFont">小文字</span></span></div><div class="'+this.className+'-inputLog mtjIsSetUp"><span class="mtjTitle">入力履歴</span><select class="'+this.className+'-inputLogSelect" name="'+this.className+'-inputLogSelect"><option value="1">画面上部</option><option value="2">ローマ字表示部分</option><option value="0">なし(初期値)</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div><div class="'+this.className+'-hideRoma mtjAdvanced"><label><input type="checkbox" class="'+this.className+'-hideRomaCheck" name="'+this.className+'-hideRomaCheck">未入力のローマ字を表示をしない</label><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div></div></div><div class="mtjCategory mtjIsSetUp mtjAdvanced"><div class="mtjTitle">・長文モード</div><div class="mtjItems"><div class="'+this.className+'-useTextMode"><select class="'+this.className+'-useTextModeSelect" name="'+this.className+'-useTextModeSelect"><option value="0">自動</option><option value="16">できるだけ無効</option><option value="32">できるだけ有効</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div></div></div><div class="mtjCategory mtjIsSetUp"><div class="mtjTitle">・文字の表示順</div><div class="mtjItems"><div class="'+this.className+'-qbStyle">'+t+'</div></div></div><div class="mtjCategory mtjIsSetUp"><div class="mtjTitle">・行揃え</div><div class="mtjItems"><div class="'+this.className+'-questionAlign"><span class="'+this.className+'-questionAlign-0 mtjIconItem"><span class="mtjBtn mtjFont">自動</span></span><span class="'+this.className+'-questionAlign-1 mtjIconItem"><span class="mtjBtn mtjFont">左寄せ</span></span><span class="'+this.className+'-questionAlign-2 mtjIconItem"><span class="mtjBtn mtjFont">中央寄せ</span></span></div></div></div><div class="mtjCategory mtjIsSetUp mtjAdvanced"><div class="mtjTitle">・かな、ローマ字の行数</div><div class="mtjItems"><div class="'+this.className+'-questionLine"><select class="'+this.className+'-questionLineSelect" name="'+this.className+'-questionLineSelect"><option value="1">1行で固定</option><option value="2">2行で固定</option><option value="3">自動(タイピングごとに固定)</option><option value="0">固定しない</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div></div></div><div class="mtjCategory mtjIsSetUp mtjAdvanced"><div class="mtjTitle">・フォント</div><div class="mtjItems"><div class="'+this.className+'-qbFont"><select class="'+this.className+'-qbFontSelect" name="'+this.className+'-qbFontSelect"><option value="0">ゴシック体</option><option value="1">明朝体</option></select></div></div></div><div class="mtjCategory mtjIsSetUp"><div class="mtjTitle">・拗音の入力</div><div class="mtjItems"><div class="'+this.className+'-separateLock"><select class="'+this.className+'-separateLockSelect" name="'+this.className+'-separateLockSelect"><option value="1">基本的な拗音は分割不可</option><option value="2">一般的な拗音は分割不可</option><option value="0">すべて分割不可</option><option value="3">すべて分割可能</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div><div class="'+this.className+'-separateView mtjAdvanced"><label><input type="checkbox" class="'+this.className+'-separateViewCheck" name="'+this.className+'-separateViewCheck">つづりの表示は常に分割しない</label></div></div></div><div class="mtjCategory mtjIsSetUp mtjAdvanced"><div class="mtjTitle">・次の問題文</div><div class="mtjItems"><div class="'+this.className+'-nextType"><select class="'+this.className+'-nextTypeSelect" name="'+this.className+'-nextTypeSelect"><option value="1">漢字表示</option><option value="2">かな表示</option><option value="0">非表示</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span></div></div></div><div class="'+this.className+'-resetRoma mtjIsSetUp"><span class="mtjTagBtn"><span>'+u.getHtml("reload")+'<span>つづりをリセットする</span></span></div></div></div><div class="mtjModalBtnArea"><div class="mtjModalLine"><div class="'+this.className+'-settingBtn mtjRectBtn"><span>'+u.getHtml("check")+'<span>OK</span></span></div><div class="'+this.className+'-returnBtn mtjRectBtn"><span>'+u.getHtml("turn")+"<span>キャンセル</span></span></div></div></div></div>";this.screenSelector[0].innerHTML=i,this.initStyles={screen:{opacity:0},backgroundImage:{left:0,top:0}},this.shortCuts=[{key:"SPACE",name:"次の画面・決定"},{key:"ESC",name:"前の画面・戻る"}]};U(ue,re),ue.prototype.initScreen=function(){re.prototype.initScreen.call(this),this.selector("settingList .mtjBtn").click({self:this},function(e){var t=$(this).closest(".mtjIconItem");t.hasClass(e.data.self.className+"-isPlaySe-1")?(e.data.self.selector("isPlaySe-1").addClass("mtjEnable"),e.data.self.selector("isPlaySe-0").removeClass("mtjEnable")):t.hasClass(e.data.self.className+"-isPlaySe-0")?(e.data.self.selector("isPlaySe-1").removeClass("mtjEnable"),e.data.self.selector("isPlaySe-0").addClass("mtjEnable")):t.hasClass(e.data.self.className+"-isShowKeyboard-1")?(e.data.self.selector("isShowKeyboard-1").addClass("mtjEnable"),e.data.self.selector("isShowKeyboard-0").removeClass("mtjEnable")):t.hasClass(e.data.self.className+"-isShowKeyboard-0")?(e.data.self.selector("isShowKeyboard-1").removeClass("mtjEnable"),e.data.self.selector("isShowKeyboard-0").addClass("mtjEnable")):t.hasClass(e.data.self.className+"-isRomaLower-1")?(e.data.self.selector("isRomaLower-1").addClass("mtjEnable"),e.data.self.selector("isRomaLower-0").removeClass("mtjEnable")):t.hasClass(e.data.self.className+"-isRomaLower-0")?(e.data.self.selector("isRomaLower-1").removeClass("mtjEnable"),e.data.self.selector("isRomaLower-0").addClass("mtjEnable")):t.hasClass(e.data.self.className+"-questionAlign-2")?(e.data.self.selector("questionAlign-2").addClass("mtjEnable"),e.data.self.selector("questionAlign-1").removeClass("mtjEnable"),e.data.self.selector("questionAlign-0").removeClass("mtjEnable")):t.hasClass(e.data.self.className+"-questionAlign-1")?(e.data.self.selector("questionAlign-2").removeClass("mtjEnable"),e.data.self.selector("questionAlign-1").addClass("mtjEnable"),e.data.self.selector("questionAlign-0").removeClass("mtjEnable")):t.hasClass(e.data.self.className+"-questionAlign-0")&&(e.data.self.selector("questionAlign-2").removeClass("mtjEnable"),e.data.self.selector("questionAlign-1").removeClass("mtjEnable"),e.data.self.selector("questionAlign-0").addClass("mtjEnable"))}),this.selector("switchBtn").click({self:this},function(e){e.data.self.switchSettingMode(isVisible($(this).find(".mtjSimple")))}),this.selector("resetRoma").click({self:this},function(e){d.showConfirm("ローマ字のつづりを初期状態にします。<br>よろしいですか？<br>(※この操作は戻せません。)",{func:function(){_.inputMode=new ie}})}),this.selector("settingBtn").click({self:this},function(e){e.data.self.endSetting()}),this.selector("returnBtn").click({self:this},function(e){e.data.self.cancel()}),this.selector("separateLock").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>拗音の分割</h3><div class="mtjText">例えば「しゃ」を「し」＋「ゃ」でも入力できるかどうかの設定です。<br>拗音の分割不可の場合：sha、syaのみ入力可能です。<br>拗音の分割可能の場合：上記に加えて、silya、sixya、shilya、shixaなども入力可能になります。<br></div>')}),this.selector("hideRoma").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>未入力のローマ字を表示しない</h3><div class="mtjText">ローマ字を見ずに入力したい人のための設定です。<br>ただし、ふりがなが表示されないタイピングは、未入力のローマ字が表示されます。<br></div>')}),this.selector("inputLog").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>入力履歴</h3><div class="mtjText">タイピング中の誤入力(ミス)を赤文字で表示する機能です。<ul><li>ローマ字表示部分：ローマ字に混じって表示されます。</li><li>画面上部：入力履歴として問題文の上に表示されます。</li><li>なし：誤入力(ミス)を表示しません。(以前と同様の設定)</li></ul></div>')}),this.selector("nextType").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>次の問題文</h3><div class="mtjText">問題文の右下に表示される「次の問題文」のタイプを選びます。<br>(※右下に「次の問題文」が表示されるのは一部のタイピングのみです)<br></div>')}),this.selector("useTextMode").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>長文モード</h3><div class="mtjText">長文モードでは、キーボードが消えて、問題文が一度に表示されます。<br>先の問題まで見えるので、早打ちしたい場合に便利です。<br>タイピング作成時の設定によっては、長文モードにできないタイピングや、強制的に長文モードになるタイピングもあります。<br></div>')}),this.selector("questionLine").find(".mtjHelpBtn").click({self:this},function(e){d.showAlert('<h3>かな、ローマ字の行数</h3><div class="mtjText">かな、ローマ字の行数を指定できます。<br>文字数が多い場合は、打った分だけ左に文字が流れていきます。<br>(※英語タイピングや改行があるタイピングは、2行固定でも3行になることがあります)<br></div>')})},ue.prototype.keyDown=function(e){e.keyCode==w||e.keyCode==F?this.endSetting():e.keyCode==R&&this.cancel()},ue.prototype.switchSettingMode=function(e){e?(this.selector("box").find(".mtjSimple").hide(),this.selector("box").find(".mtjAdvanced").show(),this.selector("box").removeClass("mtjSettingMode-0"),this.selector("box").addClass("mtjSettingMode-1")):(this.selector("box").find(".mtjSimple").show(),this.selector("box").find(".mtjAdvanced").hide(),this.selector("box").removeClass("mtjSettingMode-1"),this.selector("box").addClass("mtjSettingMode-0"))},ue.prototype.endSetting=function(){this.setting(),this.closeScreen(x)},ue.prototype.cancel=function(){this.closeScreen(x)},ue.prototype.openScreen=function(){this.selector("box").show(),this.selector("settingMain").find("span").removeClass("mtjEnable"),_.isSetUp?(this.selector("box").removeClass("mtjSettingModeFirst"),this.selector("settingBtn").find(".mtjBtnText").html("設定完了"),this.selector("returnBtn").show(),this.selector("box").find(".mtjIsSetUp").show(),this.switchSettingMode(_.settingMode)):(this.selector("box").addClass("mtjSettingModeFirst"),this.selector("settingBtn").find(".mtjBtnText").html("OK"),this.selector("returnBtn").hide(),this.selector("box").find(".mtjIsSetUp").hide(),this.switchSettingMode(0),this.selector("box").removeClass("mtjSettingMode-0")),_.isPlaySe?this.selector("isPlaySe-1").addClass("mtjEnable"):this.selector("isPlaySe-0").addClass("mtjEnable"),_.isShowKeyboard?this.selector("isShowKeyboard-1").addClass("mtjEnable"):this.selector("isShowKeyboard-0").addClass("mtjEnable"),_.isRomaLower?this.selector("isRomaLower-1").addClass("mtjEnable"):this.selector("isRomaLower-0").addClass("mtjEnable"),2==_.questionAlign?this.selector("questionAlign-2").addClass("mtjEnable"):1==_.questionAlign?this.selector("questionAlign-1").addClass("mtjEnable"):this.selector("questionAlign-0").addClass("mtjEnable"),this.selector("qbStyleSelect").val(_.qbStyle()),this.selector("nextTypeSelect").val(_.nextType),this.selector("qbFontSelect").val(_.qbFont),this.selector("separateLockSelect").val(_.separateLock),this.selector("separateViewCheck").prop("checked",_.separateView),this.selector("hideRomaCheck").prop("checked",_.hideRoma),this.selector("inputLogSelect").val(_.inputLog),this.selector("typeSoundNoSelect").val(_.typeSoundNo),this.selector("missSoundNoSelect").val(_.missSoundNo),this.selector("useTextModeSelect").val(_.useTextMode),this.selector("questionLineSelect").val(_.questionLine),re.prototype.openScreen.call(this)},ue.prototype.setting=function(){_.isPlaySe=this.selector("isPlaySe-1").hasClass("mtjEnable"),_.isShowKeyboard=this.selector("isShowKeyboard-1").hasClass("mtjEnable"),_.isRomaLower=this.selector("isRomaLower-1").hasClass("mtjEnable"),this.selector("questionAlign-2").hasClass("mtjEnable")?_.questionAlign=2:this.selector("questionAlign-1").hasClass("mtjEnable")?_.questionAlign=1:_.questionAlign=0,_.qbStyle(this.selector("qbStyleSelect").val()),_.nextType=Number(this.selector("nextTypeSelect").val()),_.qbFont=Number(this.selector("qbFontSelect").val()),_.separateLock=this.selector("separateLockSelect").val(),_.separateView=Number(this.selector("separateViewCheck").prop("checked")),_.settingMode=Number(isVisible(this.selector("switchBtn").find(".mtjAdvanced"))),_.hideRoma=Number(this.selector("hideRomaCheck").prop("checked")),_.inputLog=Number(this.selector("inputLogSelect").val());var e=Number(this.selector("typeSoundNoSelect").val()),t=Number(this.selector("missSoundNoSelect").val());e!=_.typeSoundNo&&(_.typeSoundNo=e,p=p instanceof le?new le(A[_.typeSoundNo]):new oe(A[_.typeSoundNo])),t!=_.missSoundNo&&(_.missSoundNo=t,m=m instanceof le?new le(O[_.missSoundNo]):new oe(O[_.missSoundNo])),_.useTextMode=Number(this.selector("useTextModeSelect").val()),_.questionLine=Number(this.selector("questionLineSelect").val()),_.isSetUp=!0,_.save(),_.saveDbSetting()};var de=function(e){re.call(this,e,"mtjRmSc");var t='<div class="'+this.className+'-backgroundImage mtjPt "><img src="'+_.readMeUrl+'"></div><div class="'+this.className+'-btnArea mtjPt"><span class="'+this.className+'-startBtn mtjBtn mtjFont"><span>'+u.getHtml("next2","largeBtn")+"<span>練習開始</span></span></span></div>";this.screenSelector[0].innerHTML=t,this.initStyles={screen:{opacity:1},backgroundImage:{left:0,top:0,opacity:0},btnArea:{left:0,top:300,opacity:0}},this.openAnimes={backgroundImage:{params:{opacity:1},delay:300},btnArea:{params:{opacity:1},delay:300}},this.shortCuts=[{key:"SPACE",name:"次の画面・決定"},{key:"ESC",name:"前の画面・戻る"}]};U(de,re),de.prototype.initScreen=function(){re.prototype.initScreen.call(this),this.selector("startBtn").click({self:this},function(e){e.data.self.closeScreen(M)})},de.prototype.keyDown=function(e){e.keyCode==w||e.keyCode==F?this.closeScreen(M):e.keyCode==R&&this.closeScreen(x)};var pe=function(e){re.call(this,e,"mtjGmSc"),this.isStarted=!1,this.QUESTION_BOX_HEIGHT_MAX=214,this.QUESTION_BOX_WIDTH_MIN=520,this.QUESTION_BOX_WIDTH_MAX=670,this.QUESTION_BOX_TEXTMODE_HEIGHT_MAX=360,this.questionLine=0,this.isTextMode=0,this.sentence,this._startMilliSeconds,this._endMilliSeconds,this._startPauseMilliSeconds,this._totalPauseMilliSeconds,this._questionNo,this._nextQuestionNo,this.isTestQuestionSet,this.INPUT_LOG_TOP_MAX=16,this.POSITION_TOP_MISS=185,this.POSITION_TOP_TEXTMODE_MISS=285,this.isVolumeMovable=!1,this.VOLUME_MIN_Y=4,this.VOLUME_MAX_Y=76,this.PLAY_TIME_MAX=36e6,this.questionInputtedCount=0,this.STOCK_QUESTION_COUNT_MIN=30,this.stockQuestionNos=null,this.isMovingQbScroll=!1,this.TEXT_QUESTION_SPEED=6,this.TEXT_QUESTION_DISTANCE_LINE=3,this.scrollBoxLineHeight=0,this._kanaLineMax=0,this.qbScrolledByUser=!1,this.setQbScrollEvent=!1,this.scrollPaddingTop=0,this.isOpenedQbSetting=!1,this.qbOrders=null,this.qbBaseTop=0,this.QB_TOP_MIN=3,this.qbSizeIni={kanji:{S:{fontSize:18,heightMax:45},M:{fontSize:21,heightMax:52},L:{fontSize:24,heightMax:59}},kana:{S:{fontSize:18,heightMax:45,charLen2Line:56,charLen3Line:112},M:{fontSize:21,heightMax:52,charLen2Line:46,charLen3Line:92},L:{fontSize:24,heightMax:59,charLen2Line:40,charLen3Line:80}},roma:{S:{fontSize:16,heightMax:41},M:{fontSize:19,heightMax:46},L:{fontSize:22,heightMax:54}}},this.keyboard=new fe;for(var t="",s=0;s<_.qbSetIni.length;s++)t+='<span class="'+this.className+'-qbStyle mtjChoice" value="'+_.qbSetIni[s].style+'">'+_.qbSetIni[s].name+"</span>";var i="※表示されているローマ字以外でも入力可能です(「ち」→「chi」「ti」など) <br><br>";_.gameIni.isEnglish&&(i='<span class="'+this.className+'-readyMemoStrong">※英語タイピングのため、大文字小文字が区別されます</span><br><br>');var n='<div class="'+this.className+'-readyArea mtjFont mtjPt"><div class="'+this.className+'-readyStart mtjPt">スペースを押すとスタートします！</div><div class="'+this.className+'-readyStartEng mtjPt">Press space bar to start!</div><div class="'+this.className+'-readyMemo mtjPt">'+i+'※始まらない場合は、日本語入力モードを解除して<br>ゲームをクリックしてからスペースを押してください<br><br>※プレイ中にEscを押すとリトライできます<br><br></div></div><div class="'+this.className+'-gameArea mtjPt"><div class="'+this.className+'-backgroundImage mtjPt mtjMainBk"><img src="'+_.gameIni.backgroundImageUrl1+'"></div><div class="'+this.className+'-questionArea mtjPt"></div><div class="'+this.className+'-time mtjPt"></div><div class="'+this.className+'-questionCount mtjPt"></div><div class="'+this.className+'-mode mtjPt mtjFont"></div><div class="'+this.className+'-inputLog mtjPt mtjFont"></div><div class="'+this.className+'-keyboard mtjPt">'+this.keyboard.initKeyboard()+'</div><div class="'+this.className+'-missArea mtjPt"><div class="'+this.className+'-miss"></div></div><div class="'+this.className+'-setting mtjPt"><div class="'+this.className+'-qbSettingLayer"></div><div class="'+this.className+'-se"><div class="'+this.className+'-volume"><div class="'+this.className+'-volumeLine"></div><div class="'+this.className+'-volumePoint"></div><div class="'+this.className+'-volumeHitArea"></div></div><div class="'+this.className+'-isPlaySe mtjBtn"></div></div><div class="'+this.className+'-isShowKeyboard mtjBtn"></div><div class="'+this.className+'-qbSettingArea"><div class="'+this.className+'-qbSettingBox"><span class="'+this.className+'-qbSettingCloseBtn mtjIconBtn">'+u.getHtml("close","iconBtn")+'</span><table class="mtjChoiceTable"><tr><th class="mtjChoiceTitle">文字寄せ<td class="mtjChoices"><span class="'+this.className+'-questionAlign mtjChoice" value="0">自動</span><span class="'+this.className+'-questionAlign mtjChoice" value="1">左</span><span class="'+this.className+'-questionAlign mtjChoice" value="2">中央</span><tr class="'+this.className+'-isRomaLower-tr"><th class="mtjChoiceTitle">ローマ字<td class="mtjChoices"><span class="'+this.className+'-isRomaLower mtjChoice" value="0">大文字</span><span class="'+this.className+'-isRomaLower mtjChoice" value="1">小文字</span><tr class="'+this.className+'-qbStyle-tr"><th class="mtjChoiceTitle">文字順序<td class="mtjChoices">'+t+'<tr><th class="mtjChoiceTitle">フォント<td class="mtjChoices"><span class="'+this.className+'-qbFont mtjChoice" value="0">ゴシック体</span><span class="'+this.className+'-qbFont mtjChoice" value="1">明朝体</span><tr class="'+this.className+'-nextType-tr"><th class="mtjChoiceTitle">次の問題文<td class="mtjChoices"><span class="'+this.className+'-nextType mtjChoice" value="1">漢字表示</span><span class="'+this.className+'-nextType mtjChoice" value="2">かな表示</span><span class="'+this.className+'-nextType mtjChoice" value="0">非表示</span><tr class="'+this.className+'-useTextMode-tr"><th class="mtjChoiceTitle">長文モード<td class="mtjChoices"><span class="'+this.className+'-useTextMode mtjChoice" value="0">自動</span><span class="'+this.className+'-useTextMode mtjChoice" value="16">無効</span><span class="'+this.className+'-useTextMode mtjChoice" value="32">有効</span><tr class="'+this.className+'-useTextMode-noChoice-tr"><th class="mtjChoiceTitle">長文モード<td class="mtjChoices"><span class="mtjNoChoice">変更不可</span></table></div><div class="'+this.className+'-qb mtjBtn"></div></div></div></div>';this.screenSelector[0].innerHTML=n,_.gameIni.isEnglish&&(this.selector("qbStyle-tr").hide(),this.selector("isRomaLower-tr").hide()),this.initStyles={screen:{opacity:1},readyStart:{left:0,top:50},readyStartEng:{left:0,top:150},readyMemo:{left:0,top:250},readyArea:{left:0,top:0},gameArea:{left:0,top:0},backgroundImage:{left:0,top:0},time:{left:0,top:0},questionCount:{left:0,top:0},mode:{left:0,top:418},inputLog:{left:0,top:0},questionArea:{left:0,top:32},keyboard:{left:110,top:245},setting:{left:0,top:420}},this.blinks={readyStartEng:{showTime:900,hideTime:300,intervalTime:150}},this.shortCuts=[]};U(pe,re),pe.prototype.initScreen=function(){re.prototype.initScreen.call(this),_.gameIni.isEnglish&&this.screenSelector.addClass("mtjIsEnglish"),this.selector("isPlaySe").click({self:this},function(e){_.isPlaySe=!_.isPlaySe,_.save(),e.data.self.setSetting()}),this.selector("isShowKeyboard").click({self:this},function(e){e.data.self.isTextMode?d.showAlert("長文モードではキーボードを表示できません。"):(_.isShowKeyboard=!_.isShowKeyboard,_.save(),e.data.self.setSetting())}),this.selector("se").mouseenter({self:this},function(e){r.find("."+e.data.self.className+"-volume").show()}),this.selector("se").mouseleave({self:this},function(e){r.find("."+e.data.self.className+"-volume").hide(),this.isVolumeMovable=!1}),this.selector("volumeHitArea").mousedown({self:this},function(e){this.isVolumeMovable=!0}),this.selector("volumeHitArea").mousemove({self:this},function(e){if(this.isVolumeMovable){var t=Math.min(e.data.self.VOLUME_MAX_Y,Math.max(e.offsetY,e.data.self.VOLUME_MIN_Y));_.volume((e.data.self.VOLUME_MAX_Y-t)/(e.data.self.VOLUME_MAX_Y-e.data.self.VOLUME_MIN_Y)),_.isPlaySe=!0,e.data.self.setSetting()}}),this.selector("volumeHitArea").mouseleave({self:this},function(e){this.isVolumeMovable&&(_.save(),e.data.self.setSetting(),this.isVolumeMovable=!1)}),this.selector("volumeHitArea").mouseup({self:this},function(e){if(this.isVolumeMovable){var t=Math.min(e.data.self.VOLUME_MAX_Y,Math.max(e.offsetY,e.data.self.VOLUME_MIN_Y));_.volume((e.data.self.VOLUME_MAX_Y-t)/(e.data.self.VOLUME_MAX_Y-e.data.self.VOLUME_MIN_Y)),_.isPlaySe=!0,_.save(),e.data.self.setSetting(),this.isVolumeMovable=!1}}),this.selector("qb").click({self:this},function(e){e.data.self.isOpenedQbSetting=!0,e.data.self.selector("qbSettingBox").show(),e.data.self.selector("qbSettingLayer").show(),e.data.self.selector("qbSettingBox").css("top",-e.data.self.selector("qbSettingBox").height()-15)}),this.selector("qbSettingCloseBtn").click({self:this},function(e){e.data.self.closeQbSetting()}),this.selector("qbSettingLayer").click({self:this},function(e){e.data.self.closeQbSetting()}),this.selector("isRomaLower").click({self:this},function(e){_.isRomaLower="0"!=$(this).attr("value"),_.save(),e.data.self.setSetting(),e.data.self.inputQuestionBox()}),this.selector("questionAlign").click({self:this},function(e){_.questionAlign=$(this).attr("value"),e.data.self.setQbSetting()}),this.selector("qbStyle").click({self:this},function(e){_.qbStyle($(this).attr("value")),e.data.self.setQbSetting()}),this.selector("qbFont").click({self:this},function(e){_.qbFont=$(this).attr("value"),e.data.self.setQbSetting()}),this.selector("nextType").click({self:this},function(e){_.nextType=$(this).attr("value"),_.save(),e.data.self.setSetting(),e.data.self.setQuestionFooterText(),e.data.self.ajustQuestionBox(),_.gameIni.useFurigana||2!=_.nextType||d.showAlert("ふりがなが表示されないタイピングのため、次の問題文は漢字で表示されます。")}),this.selector("useTextMode").click({self:this},function(e){var t=e.data.self,s=$(this).attr("value");d.showConfirm("この設定を変更すると再挑戦となります。よろしいですか？",{func:function(){_.useTextMode=s,_.save(),t.closeQbSetting(),t.closeScreen(M)}})})},pe.prototype.getQuestionBoxCharMaxList=function(){var e,t={};t.inputtedKanaMax=8,t.kanaMax=28,t.inputtedRomaMax=14,t.romaMax=50,_.gameIni.isEnglish?(e=11,1==_.qbFont&&(e=9.9)):e=parseInt(this.selector("kana").css("font-size"));var s=10.7;return 1==_.qbFont&&(s=10.9),t.kanaMax=Math.floor(this.selector("kana").width()/e),t.romaMax=Math.floor(this.selector("roma").width()/s),1!=this.questionLine&&(_.gameIni.isEnglish?t.kanaMax=108:t.kanaMax*=2,t.romaMax*=2),t},pe.prototype.setQbSetting=function(){_.save(),this.setSetting(),this.makeQuestionBox(!0),this.ajustQuestionBox()},pe.prototype.closeQbSetting=function(){this.isOpenedQbSetting=!1,this.selector("qbSettingBox").hide(),this.selector("qbSettingLayer").hide()},pe.prototype.setSetting=function(){var e;this.selector("nextType-tr").hide(),this.selector("useTextMode-tr").hide(),this.selector("useTextMode-noChoice-tr").hide(),_.isPlaySe?(this.selector("isPlaySe").addClass("mtjEnable"),e=this.VOLUME_MAX_Y-_.volume()*(this.VOLUME_MAX_Y-this.VOLUME_MIN_Y)):(this.selector("isPlaySe").removeClass("mtjEnable"),e=this.VOLUME_MAX_Y-0*(this.VOLUME_MAX_Y-this.VOLUME_MIN_Y)),this.selector("volumePoint").css("top",e),p.setVolume(_.volume()),m.setVolume(_.volume()),this.selector("isRomaLower").removeClass("mtjOn"),this.selector("isRomaLower").filter('[value="'+(_.isRomaLower?"1":"0")+'"]').addClass("mtjOn"),this.selector("questionAlign").removeClass("mtjOn"),this.selector("questionAlign").filter('[value="'+_.questionAlign+'"]').addClass("mtjOn"),this.selector("qbStyle").removeClass("mtjOn"),this.selector("qbStyle").filter('[value="'+_.qbStyle()+'"]').addClass("mtjOn"),this.selector("qbFont").removeClass("mtjOn"),this.selector("qbFont").filter('[value="'+_.qbFont+'"]').addClass("mtjOn"),this.selector("nextType").removeClass("mtjOn"),this.selector("nextType").filter('[value="'+_.nextType+'"]').addClass("mtjOn"),this.selector("useTextMode").removeClass("mtjOn"),this.selector("useTextMode").filter('[value="'+_.useTextMode+'"]').addClass("mtjOn"),this.questionLine=0,1&_.questionView()&&2&_.questionView()?1<this.getKanaLineMax()?this.questionLine=2:this.questionLine=1:1&_.questionView()?this.questionLine=1:2&_.questionView()&&(this.questionLine=2),this.isTextMode=0,_.isPartRetry||(1==_.gameIni.useTextMode?(this.isTextMode=1,this.selector("useTextMode-noChoice-tr").show()):_.gameIni.useTextMode&&(16&_.questionView()?this.isTextMode=0:32&_.questionView()?this.isTextMode=1:2==_.gameIni.useTextMode?this.isTextMode=0:3==_.gameIni.useTextMode&&(this.isTextMode=1),this.selector("useTextMode-tr").show())),!this.isTextMode&&_.gameIni.useNextQuestion&&this.selector("nextType-tr").show(),_.isShowKeyboard&&!this.isTextMode?(this.selector("isShowKeyboard").addClass("mtjEnable"),this.selector("keyboard").show()):(this.selector("isShowKeyboard").removeClass("mtjEnable"),this.selector("keyboard").hide())},pe.prototype.getKanaLineMax=function(){if(this._kanaLineMax<=0){this._kanaLineMax=1;for(var e=this.qbSizeIni.kana[_.qbSizes.kana],t=0;t<_.gameIni.questions.length;t++){if(W(_.gameIni.questions[t].kana)>e.charLen3Line)this._kanaLineMax=3;else{var s=_.gameIni.questions[t].kana.split(/\r?\n/);if(1<s.length){this._kanaLineMax=s.length;for(var i=0;i<s.length;i++){if(W(s[i])>e.charLen2Line){this._kanaLineMax=3;break}}}}if(3==this._kanaLineMax)break;this._kanaLineMax<2&&W(_.gameIni.questions[t].kana)>e.charLen2Line&&(this._kanaLineMax=2)}}return this._kanaLineMax},pe.prototype.onFrame=function(){if(re.prototype.onFrame.call(this),this.isOpened)if(this.isStarted){if(this.passedMilliSeconds()>this.PLAY_TIME_MAX)Z(new Error(j));else if(_.isTest||1==_.gameIni.endMode||_.isPartRetry?this.selector("time")[0].innerHTML=this.getImageText(Math.floor(this.passedMilliSeconds()/100)):(1e3*_.gameIni.timeMax<=this.passedMilliSeconds()&&this.endGame(10*_.gameIni.timeMax),this.remainMilliSeconds()<1e4?this.selector("time")[0].innerHTML=this.getImageText(Math.ceil(this.remainMilliSeconds()/100),!0):this.selector("time")[0].innerHTML=this.getImageText(Math.ceil(this.remainMilliSeconds()/100))),this.isTextMode&&this.isMovingQbScroll){var e=this.selector("qbScrollBox").scrollTop();if(this.qbScrollTop-e>this.scrollBoxLineHeight*this.TEXT_QUESTION_DISTANCE_LINE){var t=this.qbScrollTop-this.scrollBoxLineHeight*this.TEXT_QUESTION_DISTANCE_LINE+this.TEXT_QUESTION_SPEED;this.selector("qbScrollBox").scrollTop(t)}else this.qbScrollTop>e&&(e+=this.TEXT_QUESTION_SPEED,this.selector("qbScrollBox").scrollTop(e));(this.qbScrollTop<e||Math.abs(this.qbScrollTop-e)<this.TEXT_QUESTION_SPEED)&&(this.selector("qbScrollBox").scrollTop(this.qbScrollTop),this.isMovingQbScroll=!1)}}else this.blink("readyStartEng")},pe.prototype.keyDown=function(e){if(this.isStarted){this.isOpenedQbSetting&&this.closeQbSetting();var t=this.keyboard.getTypingEvent(e),s=this.passedMilliSeconds();if(48!=t.keyCode||1!=e.shiftKey||"0"!=t.key)if(_.keyLog.logKeyDown(_.questionCount(),this.questionNo(),this.sentence.nowLetter().kana(),t.key,t.keyCode,s),16!=t.keyCode)if(t.keyCode!=R){if(t.keyCode==F&&1==e.shiftKey)return _.isRankOk=!1,void this.endGame();if(1==t.key.length){var i={};this.questionInputtedCount++;var n=this.sentence.input(t.key);if(n&this.sentence.INPUT_LETTER_RETURN&&(_.kanaCount(_.kanaCount()-1),n=this.sentence.input(t.key)+this.sentence.INPUT_LETTER_RETURN,i.kana=this.sentence.nowKana()),_.keyLog.setLastLogResult(n,i),n&this.sentence.INPUT_SUCCESS)p.play(),_.romaCount(_.romaCount()+1),this.inputQuestionBox(),this.keyboard.setOnKey(this.sentence.remainRoma().substr(0,1)),_.keyStats.countSuccess(t.key,s),n&this.sentence.INPUT_END_LETTER&&_.kanaCount(_.kanaCount()+1),n&this.sentence.INPUT_END_SENTENCE&&(_.questionStats.countSuccess(this.questionNo(),s),_.questionCount(_.questionCount()+1),this.setQuestion(),this.selector("inputLog").html(""));else{var a;m.play(),this.isTextMode?a=this.selector("questionArea").position().top+this.selector("qbScrollBox").position().top+3*parseInt(this.selector("qbScrollBox").css("line-height")):(a=this.selector("questionArea").position().top+this.selector("questionBox").position().top+this.selector("questionBox").height())<this.POSITION_TOP_MISS&&(a=this.POSITION_TOP_MISS),this.selector("missArea").css("top",a);var o=this.selector("miss").clone().css("opacity",1);this.selector("missArea").append(o),setTimeout(function(){o.animate({opacity:0,top:30},200,"swing",function(){o.remove()})},1e3),2==_.inputLog&&this.inputQuestionBox(),this.keyboard.setMiss(t.key,t.keyCode,this.sentence.remainRoma().substr(0,1)),_.keyStats.countMiss(this.sentence.remainRoma().substr(0,1)),_.questionStats.countMiss(this.questionNo()),_.missCount(_.missCount()+1)}if(1==_.inputLog){var l=this.getInputLog(this.INPUT_LOG_TOP_MAX,!0);this.selector("inputLog").html(l.html)}!this.isMovingQbScroll&&this.qbScrolledByUser&&(this.isMovingQbScroll=!0,this.qbScrolledByUser=!1)}}else this.closeScreen(M);else this.keyboard.shiftDown()}else e.keyCode==w||e.keyCode==F?this.startGame():e.keyCode==R&&this.closeScreen(x)},pe.prototype.keyUp=function(e){if(this.isStarted){var t=this.keyboard.getTypingEvent(e);_.keyLog.logKeyUp(_.questionCount(),this.questionNo(),this.sentence.nowLetter().kana(),t.key,t.keyCode,this.passedMilliSeconds()),16==t.keyCode&&this.keyboard.shiftUp()}},pe.prototype.openScreen=function(){this.selector("readyArea").show(),this.isStarted=!1,this.shortCuts=[{key:"SPACE",name:"タイピング開始"},{key:"ESC",name:"前の画面"}],this.showShortCuts(),_.initGame(),this.isVolumeMovable=!1,this.selector("volume").hide(),this.selector("qbSettingBox").hide(),this.selector("mode").hide(),_.isTest&&(this.selector("mode").html("TEST MODE"),this.selector("mode").show()),this.setSetting(),_.gameIni.isEnglish&&_.gameIni.useAutoTrim&&this.trimQuestions(),this.makeQuestionBox(),re.prototype.openScreen.call(this,0)},pe.prototype.questionNo=function(e){if(void 0===e)return this._questionNo.getValue();this._questionNo.setValue(e)},pe.prototype.nextQuestionNo=function(e){if(void 0===e)return this._nextQuestionNo.getValue();this._nextQuestionNo.setValue(e)},pe.prototype.startMilliSeconds=function(e){if(void 0===e)return this._startMilliSeconds;this._startMilliSeconds=e},pe.prototype.passedMilliSeconds=function(){return z()-this.startMilliSeconds()-this.totalPauseMilliSeconds()},pe.prototype.endMilliSeconds=function(e){if(void 0===e)return this._endMilliSeconds.getValue();this._endMilliSeconds.setValue(e)},pe.prototype.remainMilliSeconds=function(){return this.endMilliSeconds()-this.passedMilliSeconds()},pe.prototype.totalPauseMilliSeconds=function(e){if(void 0===e)return this._totalPauseMilliSeconds.getValue();this._totalPauseMilliSeconds.setValue(e)},pe.prototype.startGame=function(){this.shortCuts=[{key:"ESC",name:"前の画面・再挑戦"},{key:"SHIFT+ENTER",name:"ギブアップ"}],this.showShortCuts(),this._startMilliSeconds=z(),this._endMilliSeconds=new ae(1e3*_.gameIni.timeMax),this._startPauseMilliSeconds=new ae,this._totalPauseMilliSeconds=new ae,this._questionNo=new ae(-1),this._nextQuestionNo=new ae(-1),this.stockQuestionNos=[],this.qbScrollTop=0,this.scrollPaddingTop=0,this.isTestQuestionSet=!1,_.keyLog=new Se,_.keyStats=new ne,_.questionStats=new ne,this.setQuestion(),this.selector("readyArea").hide(),this.isStarted=!0},pe.prototype.setQuestion=function(){if(0<=this.questionNo()&&this.nextQuestionNo()<0)this.endGame();else if(this.questionNo()<0&&this.setNextQuestion(),this.questionNo(this.nextQuestionNo()),_.gameIni.isEnglish&&_.gameIni.useAutoTrim&&1==_.gameIni.endMode&&_.questionMax()==_.questionCount()+1?this.sentence=new ge(_.gameIni.questions[this.questionNo()].kana.replace(/ $/,"")):this.sentence=new ge(_.gameIni.questions[this.questionNo()].kana),this.setNextQuestion(),this.questionInputtedCount=0,1==_.gameIni.endMode||_.isPartRetry||_.isTest?this.selector("questionCount")[0].innerHTML=this.getImageText(_.questionCount()+1+"/"+_.questionMax()):this.selector("questionCount")[0].innerHTML=this.getImageText(_.questionCount()+1),this.setQuestionText(),this.setQuestionFooterText(),this.ajustQuestionBox(),this.keyboard.setOnKey(this.sentence.remainRoma().substr(0,1)),this.selector("inputLog").html(""),_.isTest&&!this.isTestQuestionSet&&0<_.testQuestionNo&&(this.isTestQuestionSet=!0,this.questionNo(_.testQuestionNo-2),_.questionCount(_.testQuestionNo-2),this.setNextQuestion(),_.questionCount(_.testQuestionNo-1),this.setQuestion(),this.isTextMode)){for(var e=this.selector("qbScrollBox"),t=0;t<_.testQuestionNo-1;t++)e.find("#mtjTextNo"+t).addClass("mtjInputtedString");var s=$("#mtjTextNo"+_.questionCount()).position().top;this.qbScrollTop=this.selector("qbScrollBox").scrollTop()+s-this.scrollPaddingTop,this.isMovingQbScroll=!0}},pe.prototype.setNextQuestion=function(){if(_.gameIni.hasOwnProperty("questions")&&0!=_.gameIni.questions.length)if(0<=this.questionNo()&&(1==_.gameIni.endMode||_.isTest||_.isPartRetry)&&_.questionCount()+1>=_.questionMax())this.nextQuestionNo(-1);else if(_.isPartRetry)this.questionNo()<0?this.nextQuestionNo(_.partRetryQuestionNos[0]):this.nextQuestionNo(_.partRetryQuestionNos[_.questionCount()+1]);else{if(1==_.gameIni.endMode||_.isTest)0==this.stockQuestionNos.length&&this.addStockQuestionNos(_.questionMax(),_.questionMax());else{var e=this.stockQuestionNos.length;(_.questionCount()<0||this.stockQuestionNos.length-_.questionCount()<=this.STOCK_QUESTION_COUNT_MIN/2)&&(this.addStockQuestionNos(this.STOCK_QUESTION_COUNT_MIN),this.isTextMode&&0<e&&(_.gameIni.isEnglish?this.selector("kana").find("#mtjTextTail").before(this.getTextModeQuestionText("kana",e)):this.selector("kanji").find("#mtjTextTail").before(this.getTextModeQuestionText("kanji",e))))}this.questionNo()<0?this.nextQuestionNo(this.stockQuestionNos[0].getValue()):this.nextQuestionNo(this.stockQuestionNos[_.questionCount()+1].getValue())}else Z(new Error("問題がありません！"))},pe.prototype.addStockQuestionNos=function(e,t){for(var s,i=0;i<e;)if("order"==_.gameIni.questionType||_.isTest)for(s=0;s<_.gameIni.questions.length;s++)this.stockQuestionNos.push(new ae(s)),i++;else{var n=-1;0<this.stockQuestionNos.length&&(n=this.stockQuestionNos[this.stockQuestionNos.length-1].getValue());var a=[];for(s=0;s<_.gameIni.questions.length;s++)128&_.gameIni.questions[s].questionOption||a.push(s);for(128&_.gameIni.questions[0].questionOption&&(i+=this.addNextQuestionNos(this.stockQuestionNos,0),n=this.stockQuestionNos[this.stockQuestionNos.length-1].getValue()),s=0;0<a.length;s++){var o=Math.floor(Math.random()*a.length);0==s&&a[o]==n&&(o=(o+1)%a.length),i+=this.addNextQuestionNos(this.stockQuestionNos,a[o]),n=this.stockQuestionNos[this.stockQuestionNos.length-1].getValue(),a.splice(o,1)}}void 0!==t&&this.stockQuestionNos.length>t&&this.stockQuestionNos.splice(t)},pe.prototype.addNextQuestionNos=function(e,t){var s=0;return e.push(new ae(t)),s++,0<=_.gameIni.questions[t].nextQuestionNo&&(s+=this.addNextQuestionNos(e,_.gameIni.questions[t].nextQuestionNo)),s},pe.prototype.trimQuestions=function(){for(var e="order"==_.gameIni.questionType,t=0;t<_.gameIni.questions.length;t++){var s=_.gameIni.questions[t].kana.replace(/(^ +| *$)/g,""),i=4&_.gameIni.questions[t].questionOption||0<_.gameIni.questions[t].nextQuestionNo&&0==(7&_.gameIni.questions[t].questionOption);this.isTextMode&&i?s+=" ":(e||0<_.gameIni.questions[t].nextQuestionNo)&&!s.match(/[!?.]$/)&&(s+=" "),_.gameIni.questions[t].kana=s}},pe.prototype.endGame=function(e){e?_.passedTime(e):_.passedTime(Math.floor(this.passedMilliSeconds()/100)),this.closeScreen(k)},pe.prototype.getNextQuestionText=function(){var e=!1;return _.gameIni.useNextQuestion&&!this.isTextMode&&0<_.nextType&&(e="",0<=this.nextQuestionNo()&&(e=1==_.nextType||0==_.gameIni.useFurigana?_.gameIni.questions[this.nextQuestionNo()].kanji:_.gameIni.questions[this.nextQuestionNo()].kana)),e},pe.prototype.setQuestionText=function(){var e=_.gameIni.questions[this.questionNo()].kanji,t=_.gameIni.questions[this.questionNo()].kana,s=this.sentence.remainRomaForQb(),i=this.getQuestionBoxCharMaxList();if(_.gameIni.isEnglish&&2!=_.inputLog?this.selector("roma")[0].innerHTML="":this.selector("roma")[0].innerHTML='<span class="mtjNowInput">'+h(s.substr(0,1)).replace(/\s/,q)+'</span><span class="mtjRemain">'+h(s.substr(1,i.romaMax-1)).replace(/\s/g,q)+"</span>",_.gameIni.isEnglish?this.selector("kanji")[0].innerHTML="":this.isTextMode?0==_.questionCount()?this.selector("kanji")[0].innerHTML=this.getTextModeQuestionText("kanji"):this.updateTextModeQuestionText():this.selector("kanji")[0].innerHTML=h(e).replace(/(\r\n|\r|\n)/g,"<br>").replace(/\s/g,q),_.gameIni.useFurigana)if(_.gameIni.isEnglish&&this.isTextMode)0==_.questionCount()?this.selector("kana")[0].innerHTML=this.getTextModeQuestionText("kana"):(this.updateTextModeQuestionText(),this.selector("qbScrollBox").find(".mtjNowInputString")[0].innerHTML=this.getNowInputStringKana());else{t=t.replace(/(\r\n|\r|\n)/g,"\n");_.gameIni.isEnglish&&_.gameIni.useAutoTrim&&1==_.gameIni.endMode&&_.questionMax()==_.questionCount()+1&&(t=t.replace(/ $/,"")),1==this.questionLine?this.selector("kana")[0].innerHTML='<span class="mtjNowInput">'+h(t.substr(0,this.sentence.nowKana().length)).replace(/\s/g,q)+'</span><span class="mtjRemain">'+h(t.substr(this.sentence.nowKana().length,i.kanaMax-this.sentence.nowKana().length)).replace(/\n/g,"<br>").replace(/\s/g,q)+"</span>":this.selector("kana")[0].innerHTML='<span class="mtjNowInput">'+h(t.substr(0,this.sentence.nowKana(!0).length)).replace(/\n/g,"<br>").replace(/\s/g,q)+'</span><span class="mtjRemain">'+h(t.substr(this.sentence.nowKana(!0).length,2*i.kanaMax-this.sentence.nowKana(!0).length)).replace(/\n/g,"<br>").replace(/\s/g,q)+"</span>"}else this.selector("kana")[0].innerHTML=""},pe.prototype.getTextModeQuestionText=function(e,t){null==t&&(t=0);for(var s="",i=t;i<this.stockQuestionNos.length;i++){var n=this.stockQuestionNos[i].getValue(),a=_.gameIni.questions[n][e];_.gameIni.isEnglish&&_.gameIni.useAutoTrim&&1==_.gameIni.endMode&&i==this.stockQuestionNos.length-1&&(a=a.replace(/ $/,""));var o=h(a).replace(/(\r\n|\r|\n)/g,"<br>").replace(/\s/g,q),l=J(_.gameIni.questions[n].questionOption,0);i<_.questionCount()?s+='<span id="mtjTextNo'+i+'" class="mtjInputtedString">'+o+"</span>":i==_.questionCount()?s+="kana"==e?'<span id="mtjTextNo'+i+'" class="mtjNowInputString">'+this.getNowInputStringKana()+"</span>":'<span id="mtjTextNo'+i+'" class="mtjNowInputString">'+o+"</span>":s+='<span id="mtjTextNo'+i+'">'+o+"</span>",7&l?(1&l&&(s+="<br>"),2&l&&(s+="<br><br>")):_.gameIni.questions[n].nextQuestionNo<0&&(s+="<br>")}return 0==t&&(s+='<div id="mtjTextTail"><br><br><br><br><br><br><br><br><br></div>'),s},pe.prototype.updateTextModeQuestionText=function(){var e=this.selector("qbScrollBox");e.find(".mtjNowInputString").addClass("mtjInputtedString").removeClass("mtjNowInputString"),e.find("#mtjTextNo"+_.questionCount()).addClass("mtjNowInputString")},pe.prototype.setQuestionFooterText=function(e,t){var s="",i="";if(_.useMemo&&(s=void 0===e?h(_.gameIni.questions[this.questionNo()].memo):e),!s&&this.isTextMode&&_.useMemo&&(s=q),this.selector("memo").css("max-width","none"),this.selector("memo")[0].innerHTML=s,void 0===t){var n=this.getNextQuestionText();n?i=h(n.substr(0,_.getNextQuestionTextMaxLength())).replace(/(\r\n|\r|\n)/g,"<br>").replace(/\s/g,q):!1!==n&&(i=P)}else i=t;this.selector("next")[0].innerHTML=i;""!=s||""!=i?(this.selector("footer").css("display","table"),i&&i!=P?(this.selector("nextIcon").show(),this.selector("nextIcon").css("left",this.selector("next").position().left-15)):this.selector("nextIcon").hide()):this.selector("footer").css("display","none")},pe.prototype.makeQuestionBox=function(e){void 0===e&&(e=!1);var t={};e?(t.kana=this.selector("kana")[0].innerHTML,t.kanji=this.selector("kanji")[0].innerHTML,t.roma=this.selector("roma")[0].innerHTML,t.memo=this.selector("memo")[0].innerHTML,t.next=this.selector("next")[0].innerHTML):(t.kana="&nbsp;",t.kanji="&nbsp;",t.roma="&nbsp;",t.memo="",t.next=""),this.selector("qbScrollBox").off("scroll"),this.removeSelector("kana"),this.removeSelector("kanji"),this.removeSelector("roma"),this.removeSelector("memo"),this.removeSelector("next"),this.removeSelector("nextIcon"),this.removeSelector("nextBox"),this.removeSelector("footer"),this.removeSelector("questionBox"),this.removeSelector("qbScrollBox"),this.qbOrders=_.qbOrderIni[_.qbOrder],this.qbBaseTop=this.QB_TOP_MIN;_.qbBaseName;if(!_.gameIni.isEnglish)for(var s="",i=0;i<this.qbOrders.length&&(s=this.qbOrders[i])!=_.qbBaseName;i++)this.qbBaseTop+=this.qbSizeIni[this.qbOrders[i]][_.qbSizes[s]].heightMax;var n=" mtjQbFont-"+_.qbFont;_.gameIni.isEnglish&&this.getKanaLineMax()<3&&2!=_.inputLog&&!this.isTextMode&&(n+=" isLowQb");var a=this.QUESTION_BOX_WIDTH_MIN;(this.isTextMode||3<=this.getKanaLineMax()&&!_.gameIni.isEnglish)&&(a=this.QUESTION_BOX_WIDTH_MAX),_.hideRoma&&_.gameIni.useFurigana&&(n+=" hideRoma");var o="";(2==_.questionAlign||0==_.questionAlign&&2==_.autoTextAlign)&&(o=" mtjAilgnCenter");var l=this.qbOrders.slice();l.push("footer"),this.isTextMode&&(_.gameIni.isEnglish?(l.splice(l.indexOf("kana"),1),l.push("kana")):(l.splice(l.indexOf("kanji"),1),l.push("kanji")));var r='<div class="'+this.className+"-questionBox"+n+'" style="width:'+a+'px;">';for(i=0;i<l.length;i++)if("footer"==(s=l[i]))r+='<div class="'+this.className+'-footer"><div class="'+this.className+'-memo"></div><div class="'+this.className+'-nextBox"><div class="'+this.className+'-nextIcon">'+u.getHtml("triangleR","miniIconBtn")+'</div><div class="'+this.className+'-next"></div></div></div>';else{var h=this.qbSizeIni[s][_.qbSizes[s]].fontSize;1==_.qbFont&&"roma"==s&&(h+=2),r+='<div class="'+this.className+"-"+s+o+'" style="font-size:'+h+'px;">'+t[s]+"</div>"}r+="</div>",this.selector("questionArea")[0].innerHTML=r,e?this.setQuestionFooterText(t.memo):this.setQuestionFooterText("",""),this.selector("roma").addClass(this.className+"-qbNoScrollBox"),this.isTextMode?(this.selector("questionBox").addClass("mtjTextMode"),_.gameIni.isEnglish?this.selector("kana").addClass(this.className+"-qbScrollBox"):(this.selector("kana").addClass(this.className+"-qbNoScrollBox"),this.selector("kanji").addClass(this.className+"-qbScrollBox")),this.selector("qbScrollBox").on("scroll",{self:this},function(e){e.data.self.qbScrolledByUser=!0})):(this.selector("kanji").addClass(this.className+"-qbNoScrollBox"),this.selector("kana").addClass(this.className+"-qbNoScrollBox")),1==this.questionLine?this.selector("questionBox").addClass("mtjLine1"):2==this.questionLine&&this.selector("questionBox").addClass("mtjLine2"),_.gameIni.isEnglish&&(this.selector("kanji").hide(),2!=_.inputLog&&(this.selector("roma").hide(),!_.useMemo&&this.isTextMode&&this.selector("qbScrollBox").addClass("mtjOnlyQbScrollBox"))),_.gameIni.useFurigana||this.selector("kana").hide()},pe.prototype.ajustQuestionBox=function(){this.selector("questionBox").outerHeight()>this.QUESTION_BOX_HEIGHT_MAX&&this.selector("questionBox").css("width",this.QUESTION_BOX_WIDTH_MAX);var e=this.selector("memo").outerWidth({margin:!0}),t=this.selector("next").outerWidth({margin:!0}),s=this.selector("questionBox").width();if(s<e+t&&this.selector("memo").css("max-width",s-e-(t-this.selector("memo").width())),this.isTextMode&&this.selector("questionBox").height()>this.QUESTION_BOX_TEXTMODE_HEIGHT_MAX&&this.selector("qbScrollBox").height(this.selector("qbScrollBox").outerHeight()-(this.selector("questionBox").height()-this.QUESTION_BOX_TEXTMODE_HEIGHT_MAX)),this.isTextMode){if(this.selector("questionBox").css("top",this.QB_TOP_MIN),0==_.questionCount()&&(this.scrollPaddingTop=$("#mtjTextNo0").position().top),this.scrollBoxLineHeight=parseInt(this.selector("qbScrollBox").css("line-height")),0<_.questionCount()){var i=$("#mtjTextNo"+(_.questionCount()-1)).position().top,n=$("#mtjTextNo"+_.questionCount()).position().top;i<n&&(this.qbScrollTop=this.selector("qbScrollBox").scrollTop()+n-this.scrollPaddingTop,this.isMovingQbScroll=!0)}}else{var a=0;_.gameIni.isEnglish?a=2==_.inputLog?15:30:2==_.autoTextAlign&&(a=30);var o=_.qbBaseName;_.gameIni.isEnglish&&(o="kana"),this.selector("questionBox").css("top",Math.max(this.qbBaseTop-this.selector(o).position().top+a,this.QB_TOP_MIN))}},pe.prototype.getNowInputStringKana=function(){var e=this.sentence.inputtedKana(!0),t="";return e&&(t='<span class="mtjInputted">'+h(e).replace(/\n/g,"<br>").replace(/\s/g,q)+"</span>"),t+='<span class="mtjNowInput">'+h(this.sentence.nowKana(!0)).replace(/\n/g,"<br>").replace(/\s/g,q)+'</span><span class="mtjRemain">'+h(this.sentence.remainKana(!0)).substring(this.sentence.nowKana(!0).length).replace(/\n/g,"<br>").replace(/\s/g,q)+"</span>"},pe.prototype.inputQuestionBox=function(){var e="",t=this.getQuestionBoxCharMaxList();if(_.gameIni.useFurigana){var s,i,n=!0;if(_.gameIni.isEnglish&&this.isTextMode){n=!0;i=this.sentence.inputtedKana(n),this.selector("qbScrollBox").find(".mtjNowInputString")[0].innerHTML=this.getNowInputStringKana()}else 1==this.questionLine&&(n=!1),i=this.sentence.remainKana(n).length+t.inputtedKanaMax>t.kanaMax?this.sentence.inputtedKana(n).slice(-t.inputtedKanaMax):this.sentence.inputtedKana(n).slice(-t.kanaMax+this.sentence.remainKana(n).length),s='<span class="mtjInputted">'+h(i).replace(/\n/g,"<br>").replace(/\s/g,q)+'</span><span class="mtjNowInput">'+h(this.sentence.nowKana(n)).replace(/\n/g,"<br>").replace(/\s/g,q)+'</span><span class="mtjRemain">'+h(this.sentence.remainKana(n).slice(this.sentence.nowKana(n).length,t.kanaMax-i.length)).replace(/\n/g,"<br>").replace(/\s/g,q)+"</span>",this.selector("kana")[0].innerHTML=s}if(!_.gameIni.isEnglish||2==_.inputLog){var a=this.sentence.remainRoma().length,o=this.getInputLog(Math.max(t.inputtedRomaMax,t.romaMax-a),2==_.inputLog),l="";0<this.questionInputtedCount&&(l=o.html),e='<span class="mtjInputted">'+l+'</span><span class="mtjNowInput">'+h(this.sentence.remainRomaForQb().substr(0,1)).replace(/\s/g,q)+'</span><span class="mtjRemain">'+h(this.sentence.remainRomaForQb().substr(1,t.romaMax-o.length-1)).replace(/\s/g,q)+"</span>",this.selector("roma")[0].innerHTML=e}},pe.prototype.getInputLog=function(e,t,s){for(var i="",n=0,a=_.keyLog.inputLogs.length-1;0<=a&&!(e<=n);a--){var o;o=_.keyLog.inputLogs[a].code==w?s?K:q:_.isCaseSensitive?h(_.keyLog.inputLogs[a].key):_.isRomaLower?h(_.keyLog.inputLogs[a].key.toLowerCase()):h(_.keyLog.inputLogs[a].key.toUpperCase()),_.keyLog.inputLogs[a].result?(i=o+i,n++):t&&(i='<span class="mtjMiss">'+o+"</span>"+i,n++)}return{html:i,length:n}};var me=function(e){re.call(this,e,"mtjRsSc"),this.SP_TRAININGS=[{keys:["a","z"],trainingUrl:"game/160",advice:"左手小指の特訓をオススメします！"},{keys:["w","s"],trainingUrl:"game/161",advice:"左手薬指の特訓をオススメします！"},{keys:["e","d"],trainingUrl:"game/162",advice:"左手中指の特訓をオススメします！"},{keys:["r","f","v","t","g","b"],trainingUrl:"game/163",advice:"左手人差し指の特訓をオススメします！"},{keys:["y","h","n","u","j","m"],trainingUrl:"game/164",advice:"右手人差し指の特訓をしてみましょう！"},{keys:["i","k"],trainingUrl:"game/165",advice:"右手中指の特訓をしてみましょう！"},{keys:["o"],trainingUrl:"game/166",advice:"右手薬指の特訓をしてみましょう！"},{keys:["p","-"],trainingUrl:"game/167",advice:"右手小指の特訓をしてみましょう！"}],this.MASTAR_TAGS=[{name:"公式練習",multi:1,href:"/list/tagName/%E5%85%AC%E5%BC%8F%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA"},{name:"オススメ",multi:0,href:"/list/sort/pickup"},{name:"さくっと単語",multi:0,href:"/list/tagName/%E5%85%AC%E5%BC%8F%E3%81%95%E3%81%8F%E3%81%A3%E3%81%A8%E5%8D%98%E8%AA%9E"},{name:"タグ一覧",multi:3,href:"/tag"},{name:"歌詞",multi:1,href:"/list/tagName/%E6%AD%8C%E8%A9%9E"},{name:"アニメ・マンガ",multi:1,href:"/list/tagName/%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BB%E3%83%9E%E3%83%B3%E3%82%AC"},{name:"学習",multi:0,href:"/list/tagName/%E5%AD%A6%E7%BF%92"},{name:"人気ランキング",multi:1,href:"/list/sort/rank"}],this.RANKING_PHASE_CLOSE=0,this.RANKING_PHASE_OPEN=1,this.RANKING_PHASE_SENT=2,this.rankingPhase=this.RANKING_PHASE_CLOSE,this.nowIdvFunc=null,this.preIdvScrollTop=null,this.preIdvSortNo=0,this.filterQuestionNos=[],this.IDV_SORT_KEYS=["index","-sr","sr","-sp","sp"],this.IDV_SCROLL_HEIGHT=128,this.isScrolling=!1,this.strKana="かな",this.strKanaRoma="かな・ローマ字",_.gameIni.isEnglish&&(this.strKana="英字",this.strKanaRoma="英字");var t='<span class="'+this.className+'-idvQuestionBtn mtjSwitchBtn">問題</span><span class="'+this.className+'-idvKanaBtn mtjSwitchBtn">'+this.strKana+"</span>";_.gameIni.isEnglish||(t+='<span class="'+this.className+'-idvRomaBtn mtjSwitchBtn">ローマ字</span>');var s='<div class="'+this.className+'-backgroundImage mtjPt mtjMainBk"><img src="'+_.gameIni.backgroundImageUrl1+'"></div><div class="'+this.className+'-btnArea mtjPt"><div class="'+this.className+'-registRankingBtn mtjRectBtn"><span class="'+this.className+'-registRankingBlink">'+u.getHtml("trophy")+'<span>ランキング登録</span></span></div><div class="'+this.className+'-ranking mtjFont"></div><div class="'+this.className+'-detailBtn mtjRectBtn"><span>'+u.getHtml("window")+'<span class="mtjBtnText">詳細結果</span></span></div><div class="'+this.className+'-returnScoreBtn mtjRectBtn"><span>'+u.getHtml("prev")+'<span class="mtjBtnText">スコアへ戻る</span></span></div><div class="'+this.className+'-tweetBtn mtjRectBtn"><span>'+u.getHtml("tweet")+'<span>ツイート</span></span></div><div class="'+this.className+'-btnSpace"></div><div class="'+this.className+'-retryBtn mtjRectBtn"><span>'+u.getHtml("reload")+'<span class="mtjBtnText">再挑戦</span></span></div><div class="'+this.className+'-missRetryBtn mtjRectBtn"><span>'+u.getHtml("check")+'<span class="mtjBtnText">ミスのみ再挑戦</span></span></div><div class="'+this.className+'-rankingBtn mtjRectBtn"><span>'+u.getHtml("crown")+'<span>ランキング</span></span></div><div class="'+this.className+'-returnBtn mtjRectBtn"><span>'+u.getHtml("prev")+'<span class="mtjBtnText">タイトルへ戻る</span></span></div><div class="'+this.className+'-returnEditDetailBtn mtjRectBtn"><span>'+u.getHtml("prev")+'<span>詳細編集へ戻る</span></span></div><div class="'+this.className+'-returnEditQuestionBtn mtjRectBtn"><span>'+u.getHtml("turn")+'<span>問題編集へ戻る</span></span></div><div class="'+this.className+'-nextBtn mtjRectBtn"><span>'+u.getHtml("next")+'<span class="mtjBtnText"></span></span></div></div><div class="'+this.className+'-pr"></div><div class="'+this.className+'-resultArea mtjPt"><div class="'+this.className+'-title">&lt;タイピング結果&gt;</div><div class="'+this.className+'-detailArea"><div class="'+this.className+'-speed mtjPt mtjFont"><span class="mtjName">打鍵/秒</span><span class="mtjValue"></span></div><div class="'+this.className+'-successRate mtjPt mtjFont"><span class="mtjName">正誤率</span><span class="mtjValue"></span></div><div class="'+this.className+'-passedTime mtjPt mtjFont"><span class="mtjName">時間</span><span class="mtjValue"></span></div><div class="'+this.className+'-questionCount mtjPt mtjFont"><span class="mtjName">問題数</span><span class="mtjValue"></span></div><div class="'+this.className+'-keyCount mtjPt mtjFont"><span class="mtjName">打鍵数</span><span class="mtjValue"></span></div><div class="'+this.className+'-missCount mtjPt mtjFont"><span class="mtjName">ミス</span><span class="mtjValue"></span></div></div><div class="'+this.className+'-score mtjPt mtjFont"><span class="mtjName">Score</span><span class="mtjValue"></span></div><div class="'+this.className+'-bestScore mtjPt"></div><div class="'+this.className+'-levelArea"><div class="'+this.className+'-level1 mtjPt"></div><div class="'+this.className+'-level2 mtjPt"></div></div><div class="'+this.className+'-successArea"><div class="'+this.className+'-success mtjPt mtjFont"><span>合格！</span></div><div class="'+this.className+'-failure mtjPt mtjFont"><span>不合格…</span></div><div class="'+this.className+'-successCondition mtjPt mtjFont"></div><div class="'+this.className+'-successAdvice mtjPt mtjFont"></div><div class="'+this.className+'-successLevel mtjPt mtjFont"></div></div><div class="'+this.className+'-testArea mtjPt mtjFont">テスト完了！</div><div class="'+this.className+'-adviceArea mtjPt"></div><div class="'+this.className+'-isBestScore"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94.27 14.47"><defs><style>.a{fill:#f39;}</style></defs><path class="a" d="M4.87,14.25H.71V.35H5.83a5.32,5.32,0,0,1,3.32.86,3.22,3.22,0,0,1,1.08,2.66,3.49,3.49,0,0,1-.36,1.6,4.08,4.08,0,0,1-1.1,1.32,3.86,3.86,0,0,1,1.51,1.46,4,4,0,0,1,.52,2.06,3.69,3.69,0,0,1-1.21,2.9,4.72,4.72,0,0,1-3.28,1.08H6l-.51,0V10.77h.88A.86.86,0,0,0,7,10.58a1,1,0,0,0,.18-.68A1,1,0,0,0,7,9.25a.86.86,0,0,0-.65-.19H5.49V5.67h.32a.85.85,0,0,0,.63-.2,1.05,1.05,0,0,0,.19-.69.89.89,0,0,0-.19-.65.83.83,0,0,0-.63-.19H4.87Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M20.19,13.3a5.84,5.84,0,0,1-1.61.92,5.3,5.3,0,0,1-1.79.31,5.14,5.14,0,0,1-2.91-.91,4.92,4.92,0,0,1-1.71-1.86A5.24,5.24,0,0,1,12,7.3,5.2,5.2,0,0,1,13.1,5.61a5.41,5.41,0,0,1,1.7-1.16,5.24,5.24,0,0,1,2-.4,5,5,0,0,1,3.77,1.57A5.67,5.67,0,0,1,22,9.67v.21H16.55a.4.4,0,0,1-.38-.22A1.38,1.38,0,0,1,16,9a1.45,1.45,0,0,1,.13-.71A.41.41,0,0,1,16.55,8H18.2V8a1,1,0,0,0-.34-.78,1.47,1.47,0,0,0-.94-.29,1.43,1.43,0,0,0-1.2.6,2.54,2.54,0,0,0-.46,1.6,2.8,2.8,0,0,0,.42,1.64,1.36,1.36,0,0,0,1.16.59,1.47,1.47,0,0,0,.71-.2,1.18,1.18,0,0,0,.5-.49Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M22.45,14.21v-4a2.3,2.3,0,0,0,1.49-.36,2.42,2.42,0,0,0,.46-1.62,4.55,4.55,0,0,1,1.07-3,3.64,3.64,0,0,1,2.74-1h1.48v4h-.21a1.31,1.31,0,0,0-.58.12.86.86,0,0,0-.38.35,2.53,2.53,0,0,0-.28,1.13,6.24,6.24,0,0,1-.15,1.18,4,4,0,0,1-1.66,2.32,5.3,5.3,0,0,1-3.06.87c-.17,0-.45,0-.85,0Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M36.07,8.52H34.44l0,.14v.21a1.8,1.8,0,0,0,.36,1.22,1.31,1.31,0,0,0,1.07.42h.23v4l-.2,0h-.33A4.56,4.56,0,0,1,32,13.05a5.49,5.49,0,0,1-1.37-3.89V.62h3.81V4.33h1.63Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M42.54,14.29V10.34l.45.07.31,0a1.15,1.15,0,0,0,.81-.27,1,1,0,0,0,.29-.77,2.69,2.69,0,0,0-.5-1.33l-.08-.14-.09-.13a5.67,5.67,0,0,1-1-2.92,4.62,4.62,0,0,1,1.42-3.36A4.57,4.57,0,0,1,47.56.07a5,5,0,0,1,1,.11A7.16,7.16,0,0,1,49.68.5v4A3.93,3.93,0,0,0,49,4.29a2.24,2.24,0,0,0-.51-.07,1,1,0,0,0-.76.3,1,1,0,0,0-.3.76A2.72,2.72,0,0,0,48,6.53l.14.26a6.3,6.3,0,0,1,.65,1.47A5.22,5.22,0,0,1,49,9.73a4.79,4.79,0,0,1-5.55,4.75A7.31,7.31,0,0,1,42.54,14.29Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M56.87,9.3H60.7v0A4.94,4.94,0,0,1,59.17,13a5.3,5.3,0,0,1-5.23,1.26,5.24,5.24,0,0,1-3.72-5,5.11,5.11,0,0,1,.41-2,5,5,0,0,1,1.14-1.69,5.41,5.41,0,0,1,1.7-1.16,5.23,5.23,0,0,1,2-.4,5.17,5.17,0,0,1,3.38,1.19,4.93,4.93,0,0,1,1.76,3.08H56.78a2.11,2.11,0,0,0-.59-.45,1.57,1.57,0,0,0-1.73.26,1.33,1.33,0,0,0-.44,1,1.39,1.39,0,0,0,.43,1,1.44,1.44,0,0,0,1.93.11A1.76,1.76,0,0,0,56.87,9.3Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M61.42,9.3a5.17,5.17,0,0,1,.23-1.51,5.11,5.11,0,0,1,.65-1.38,5.15,5.15,0,0,1,4.35-2.36,5.1,5.1,0,0,1,2,.41A5.39,5.39,0,0,1,71.5,7.31a5.28,5.28,0,0,1-2.85,6.82,5.29,5.29,0,0,1-2,.4,5.31,5.31,0,0,1-4.83-3.24A5,5,0,0,1,61.42,9.3Zm3.88,0a1.33,1.33,0,0,0,1.35,1.34,1.34,1.34,0,0,0,1-.39A1.29,1.29,0,0,0,68,9.3a1.37,1.37,0,0,0-1.36-1.37,1.29,1.29,0,0,0-1,.4A1.33,1.33,0,0,0,65.3,9.3Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M76.81,10.06v4.19H73V9.41a8.53,8.53,0,0,1,.3-2.55,4.09,4.09,0,0,1,1-1.64,4.22,4.22,0,0,1,1.29-.86,3.93,3.93,0,0,1,1.48-.31l.72,0c.23,0,.46,0,.68.09v4l-.2,0-.4-.05a.92.92,0,0,0-.86.4A3.28,3.28,0,0,0,76.81,10.06Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M88,13.3a6,6,0,0,1-1.62.92,5.3,5.3,0,0,1-1.79.31,5.14,5.14,0,0,1-2.91-.91A5,5,0,0,1,80,11.76a5.24,5.24,0,0,1-.21-4.46,5.42,5.42,0,0,1,2.85-2.85,5.15,5.15,0,0,1,2-.4,4.94,4.94,0,0,1,3.77,1.57,5.67,5.67,0,0,1,1.47,4.05v.21H84.38A.4.4,0,0,1,84,9.66,1.5,1.5,0,0,1,83.87,9,1.57,1.57,0,0,1,84,8.26.41.41,0,0,1,84.38,8H86V8a1,1,0,0,0-.35-.78,1.45,1.45,0,0,0-.94-.29,1.43,1.43,0,0,0-1.2.6,2.6,2.6,0,0,0-.46,1.6,2.8,2.8,0,0,0,.42,1.64,1.36,1.36,0,0,0,1.16.59,1.47,1.47,0,0,0,.71-.2,1.18,1.18,0,0,0,.5-.49Z" transform="translate(-0.71 -0.07)"/><path class="a" d="M90.63,12.36a2.22,2.22,0,0,1,2.19-2.19,2.07,2.07,0,0,1,1.52.65,2.15,2.15,0,0,1,0,3.07,2.05,2.05,0,0,1-1.53.64,2.19,2.19,0,0,1-2.19-2.17Zm4-3.16H91L90.87.35h3.88Z" transform="translate(-0.71 -0.07)"/></svg></div></div><div class="'+this.className+'-idvArea mtjInputBox mtjPt"><div class="'+this.className+'-idvHeader"><div class="mtjSwitchBtns">'+t+'</div><div class="mtjIconBtns"><span class="'+this.className+'-idvSettingBtn mtjIconBtn">'+u.getHtml("setting","iconBtn")+'</span><span class="'+this.className+'-idvCloseBtn mtjIconBtn">'+u.getHtml("close","iconBtn")+'</span></div><div class="mtjOptions"><select class="mtjSort" name="mtjSort"><option value="0">標準</option><option value="1">正確な順</option><option value="2">不正確な順</option><option value="3">速い順</option><option value="4">遅い順</option></select></div></div><div class="'+this.className+'-idvResults mtjPt"><div class="'+this.className+'-idvQuestions"></div><div class="'+this.className+'-idvKanas"></div><div class="'+this.className+'-idvRomas"></div><div class="'+this.className+'-idvBtns"><div class="'+this.className+'-filterRetryBtn mtjRectBtn"><span>'+u.getHtml("check")+'<span>問題を再挑戦</span></span></div><div class="'+this.className+'-returnIdvRomaBtn mtjRectBtn"><span>'+u.getHtml("turn")+'<span>戻る</span></span></div><div class="'+this.className+'-returnIdvKanaBtn mtjRectBtn"><span>'+u.getHtml("turn")+'<span>戻る</span></span></div></div></div></div><div class="'+this.className+'-modalLayer"></div><div class="'+this.className+'-settingIdvBox mtjModalBox mtjInputBox"><h3>◆設定を選んでください</h3><div class="'+this.className+'-settingList mtjSettingList"><div class="mtjCategory"><div class="mtjTitle">・集計する文字</div><div class="mtjItems"><div class="'+this.className+'-excludeStats"><select class="'+this.className+'-excludeStatsSelect" name="'+this.className+'-excludeStatsSelect"><option value="0">すべての文字</option><option value="1">各問題の一文字目('+this.strKana+')を除外</option><option value="2">一問目の一文字目('+this.strKana+')を除外</option></select><span class="mtjHelpBtn">'+u.getHtml("help")+'</span><div class="mtjMemo">※'+this.strKanaRoma+'の詳細結果のみ影響します。</div></div></div></div><div class="mtjCategory"><div class="mtjTitle">・問題一覧</div><div class="mtjItems"><div class="'+this.className+'-hideMishitRoma"><label><input type="checkbox" class="'+this.className+'-hideMishitRomaCheck" name="'+this.className+'-hideMishitRomaCheck">誤入力したローマ字を表示しない</label></div></div></div></div><div class="mtjModalBtnArea"><div class="mtjModalLine"><div class="'+this.className+'-settingIdvBtn mtjRectBtn"><span>'+u.getHtml("check")+'<span>OK</span></span></div><div class="'+this.className+'-cancelSettingIdvBtn mtjRectBtn"><span>'+u.getHtml("turn")+'<span>キャンセル</span></span></div></div></div></div><div class="'+this.className+'-rankingBox mtjModalBox mtjInputBox"><h3>・ニックネームを入力してください</h3><div class="mtjModalLine"><input class="mtjNickName" type="text" name="mtjNickName" maxlength="8" value="'+h(_.playerName)+'" /></div><h3>・このタイピングのレビュー</h3><div class="mtjModalLine"><select class="mtjReviewPoint" name="mtjReviewPoint"><option value="0">なし</option><option value="5">★★★★★</option><option value="4">★★★★</option><option value="3">★★★</option><option value="2">★★</option><option value="1">★</option></select></div><div class="mtjModalBtnArea"><div class="mtjModalLine"><span class="'+this.className+'-rankingSendBtn mtjRectBtn"><span>'+u.getHtml("send")+'<span>送信</span></span></span><span class="'+this.className+'-rankingSending mtjRectBtn mtjDisabled"><span>'+u.getHtml("send")+'<span>送信中…</span></span></span><span class="'+this.className+'-returnResultBtn mtjRectBtn"><span>'+u.getHtml("prev")+'<span>戻る</span></span></span></div></div></div><div class="'+this.className+'-rankedBox mtjModalBox"><h3>・ランキング登録完了</h3><div class="mtjRankedInfo"></div><div class="mtjModalBtnArea"><div class="mtjModalLine"><span class="'+this.className+'-rankingBtn mtjRectBtn"><span>'+u.getHtml("crown")+'<span>ランキング</span></span></span><span class="'+this.className+'-tweetBtn mtjRectBtn"><span>'+u.getHtml("tweet")+'<span>ツイート</span></span></span><span class="'+this.className+'-returnResultBtn mtjRectBtn"><span>'+u.getHtml("prev")+'<span>戻る</span></span></span><span class="'+this.className+'-nextBtn mtjRectBtn"><span>'+u.getHtml("next")+'<span class="mtjBtnText"></span></span></span></div></div></div>';r.append('<div id="mtjModalLayer"></div>'),this.screenSelector[0].innerHTML=s;this.initStyles={screen:{opacity:1},backgroundImage:{opacity:0},btnArea:{left:12,top:10,opacity:0},resultArea:{left:180,top:9},pr:{opacity:0},speed:{left:this.offStageRight,top:80},successRate:{left:this.offStageRight,top:113},passedTime:{left:this.offStageRight,top:146},questionCount:{left:this.offStageRight+230+30,top:80},keyCount:{left:this.offStageRight+230+30,top:113},missCount:{left:this.offStageRight+230+30,top:146},score:{left:this.offStageRight,top:180},bestScore:{left:this.offStageRight,top:232},isBestScore:{left:this.offStageRight,top:204},level1:{left:this.offStageRight,top:258},level2:{left:this.offStageRight,top:280},adviceArea:{left:this.offStageRight,top:238},testArea:{left:this.offStageRight,top:250},success:{left:0,top:266,opacity:0},failure:{left:20,top:266,opacity:0},successCondition:{left:this.offStageRight,top:327},successAdvice:{left:this.offStageRight,top:354},successLevel:{left:this.offStageRight,top:388},idvArea:{left:180,top:9},idvResults:{left:0,top:45},settingIdvBox:{top:80},rankingBox:{top:80},rankedBox:{top:115}};var i=0,n=100;this.openAnimes={backgroundImage:{params:{opacity:.8},delay:200,duration:1e3},speed:{params:{left:10},delay:i+=n},successRate:{params:{left:10},delay:i+=n},passedTime:{params:{left:10},delay:i+=n},questionCount:{params:{left:260},delay:i+=n},keyCount:{params:{left:260},delay:i+=n},missCount:{params:{left:260},delay:i+=n},score:{params:{left:0},delay:i+=n},bestScore:{params:{left:0},delay:i+=n},btnArea:{params:{opacity:1},delay:800}},this.animeDelay=800,this.animeSpan=n,this.blinks={registRankingBlink:{showTime:1050,hideTime:150,intervalTime:150,startTime:500}},this.openCustomAnime={},this.shortCuts=[{key:"SPACE、↓",name:"スクロール",linkPartsName:"returnScoreBtn"},{key:"SHIFT+SPACE、↑",name:"逆スクロール",linkPartsName:"returnScoreBtn"},{key:"←&thinsp;→",name:"表示切り替え",linkPartsName:"returnScoreBtn"},{key:"S、SHIFT+S",name:"表示順変更",linkPartsName:"returnScoreBtn",after:"<br>"},{key:"ENTER",name:"ランキング送信",linkPartsName:"registRankingBtn"},{key:"SPACE",name:"詳細結果",linkPartsName:"detailBtn"},{key:"ESC",name:"<NAME>・キャンセル",linkPartsName:"retryBtn"},{key:"ESC",name:"キャンセル"},{key:"T",name:"<NAME>",linkPartsName:"tweetBtn"},{key:"M",name:"<NAME>",linkPartsName:"missRetryBtn"},{key:"R",name:"<NAME>",linkPartsName:"rankingBtn"},{key:"B",name:"タイトル",linkPartsName:"returnBtn"},{key:"N",name:"<NAME>",linkPartsName:"nextBtn"},{key:"D",name:"<NAME>",linkPartsName:"returnEditDetailBtn"},{key:"Q",name:"<NAME>",linkPartsName:"returnEditQuestionBtn"}]};U(me,re),me.prototype.initScreen=function(){re.prototype.initScreen.call(this),_.gameIni.isEnglish&&this.screenSelector.addClass("mtjIsEnglish"),isSp()&&$.cookie("app","j",{expires:3650,path:"/"}),this.selector("retryBtn").click({self:this},function(e){e.data.self.retry()}),this.selector("missRetryBtn").click({self:this},function(e){e.data.self.missRetry()}),this.selector("nextBtn").click({self:this},function(e){e.data.self.openNext()}),this.selector("rankingBtn").click({self:this},function(e){e.data.self.openRanking()}),this.selector("returnBtn").click({self:this},function(e){e.data.self.openStart()}),this.selector("registRankingBtn").click({self:this},function(e){e.data.self.openResistRanking()}),this.selector("registRankingBtn").mouseenter({self:this},function(e){e.data.self.stopBlink("registRankingBlink",!0)}),this.selector("registRankingBtn").mouseleave({self:this},function(e){e.data.self.startBlink("registRankingBlink")}),this.selector("rankingSendBtn").click({self:this},function(e){e.data.self.sendRanking()}),this.selector("returnResultBtn").click({self:this},function(e){e.data.self.closeResistRanking()}),this.selector("tweetBtn").click({self:this},function(e){e.data.self.openTwitter()}),this.selector("returnEditDetailBtn").click({self:this},function(e){e.data.self.returnEditDetail()}),this.selector("returnEditQuestionBtn").click({self:this},function(e){e.data.self.returnEditQuestion()}),this.selector("detailBtn").click({self:this},function(e){e.data.self.showIdvQuestion()}),this.selector("idvQuestionBtn").click({self:this},function(e){e.data.self.showIdvQuestion(e.data.self.selector("idvArea").find(".mtjSort").val())}),this.selector("idvKanaBtn").click({self:this},function(e){e.data.self.showIdvKana(e.data.self.selector("idvArea").find(".mtjSort").val())}),this.selector("idvRomaBtn").click({self:this},function(e){e.data.self.showIdvRoma(e.data.self.selector("idvArea").find(".mtjSort").val())}),this.selector("idvArea").find(".mtjSort").change({self:this},function(e){e.data.self.nowIdvFunc($(this).val())}),this.selector("returnScoreBtn").click({self:this},function(e){e.data.self.closeIdv()}),this.selector("idvCloseBtn").click({self:this},function(e){e.data.self.closeIdv()}),$(document).on("click","."+this.className+"-kanas .mtjIndex",{self:this},function(e){e.data.self.preIdvSortNo=e.data.self.selector("idvArea").find(".mtjSort").val(),e.data.self.preIdvScrollTop=e.data.self.selector("idvResults ").scrollTop(),e.data.self.showIdvQuestion(0,{kana:$(this).html()})}),$(document).on("click","."+this.className+"-romas .mtjIndex",{self:this},function(e){e.data.self.preIdvSortNo=e.data.self.selector("idvArea").find(".mtjSort").val(),e.data.self.preIdvScrollTop=e.data.self.selector("idvResults").scrollTop(),e.data.self.showIdvQuestion(0,{roma:$(this).html()})}),this.selector("returnIdvKanaBtn").click({self:this},function(e){e.data.self.returnIdvKana()}),this.selector("returnIdvRomaBtn").click({self:this},function(e){e.data.self.returnIdvRoma()}),this.selector("filterRetryBtn").click({self:this},function(e){e.data.self.filterRetry()}),this.selector("idvSettingBtn").click({self:this},function(e){e.data.self.settingIdv()}),this.selector("settingIdvBtn").click({self:this},function(e){e.data.self.endSettingIdv()}),this.selector("cancelSettingIdvBtn").click({self:this},function(e){e.data.self.cancelSettingIdv()}),this.selector("excludeStats").find(".mtjHelpBtn").click({self:this},function(e){var t='<h3>集計する文字</h3><div class="mtjText">タイピングの時間には文章を読んでいる時間も含まれます。<br>'+e.data.self.strKanaRoma+"の集計から問題の一文字目を集計から除外することで、その影響を少なく出来ます。<br></div>";d.showAlert(t)})},me.prototype.openScreen=function(){if(this.selector("modalLayer").hide(),this.selector("rankingBox").hide(),this.selector("rankedBox").hide(),this.selector("ranking").hide(),this.selector("registRankingBtn").show(),this.selector("registRankingBtn").removeClass("mtjActive"),this.selector("tweetBtn").show(),this.selector("btnSpace").show(),this.selector("adviceArea").hide(),this.selector("levelArea").hide(),this.selector("successArea").hide(),this.selector("isBestScore").hide(),this.selector("missRetryBtn").hide(),this.selector("testArea").hide(),this.selector("returnEditQuestionBtn").hide(),this.selector("returnEditDetailBtn").hide(),this.selector("idvArea").hide(),this.selector("resultArea").show(),this.selector("detailBtn").show(),this.selector("returnScoreBtn").hide(),this.selector("settingIdvBox").hide(),this.selector("pr").hide(),delete this.openAnimes.successCondition,delete this.openAnimes.failure,delete this.openAnimes.successAdvice,delete this.openAnimes.successLevel,delete this.openAnimes.level1,delete this.openAnimes.level2,delete this.openCustomAnime.success,delete this.openCustomAnime.isBestScore,delete this.openAnimes.pr,this.selector("speed").children(".mtjValue").html(_.speedText()),this.selector("successRate").children(".mtjValue").html(_.successRateText()),this.selector("questionCount").children(".mtjValue").html(_.questionCount()),this.selector("keyCount").children(".mtjValue").html(_.romaCount()),this.selector("missCount").children(".mtjValue").html(_.missCount()),this.selector("passedTime").children(".mtjValue").html(_.passedTimeText()+"秒"),_.isTest)this.selector("retryBtn").find(".mtjBtnText").html("再テスト"),this.selector("rankingBtn").hide(),this.selector("returnBtn").hide(),this.selector("returnEditQuestionBtn").show(),this.selector("returnEditDetailBtn").show(),this.selector("nextBtn").hide(),this.selector("detailBtn").hide(),this.selector("registRankingBtn").hide(),this.selector("tweetBtn").hide(),this.selector("score").html("&nbsp;"),this.selector("testArea").show(),this.openAnimes.testArea={params:{left:0},delay:this.animeDelay+this.animeSpan};else{if(this.selector("retryBtn").find(".mtjBtnText").html("再挑戦"),this.selector("rankingBtn").hide(),this.selector("returnBtn").find(".mtjBtnText").html("タイトルへ戻る"),this.selector("nextBtn").hide(),this.selector("score").find(".mtjValue").html(_.score()),0<_.missCount()&&this.selector("missRetryBtn").show(),_.wasSuccess&&null!=_.gameIni.successUrl&&""!=_.gameIni.successUrl&&(_.gameIni.isTraining?this.selector("nextBtn").find(".mtjBtnText").html("次の練習へ"):this.selector("nextBtn").children(".mtjBtnText").html("次のタイピング"),this.selector("nextBtn").show()),_.score()>_.bestScore()&&!_.isPartRetry){this.openCustomAnime.isBestScore={startFrame:G(this.animeDelay+700),spanFrame:G(500),startLeft:this.initStyles.isBestScore.left,endLeft:132},_.bestScore(_.score()),this.selector("isBestScore").show()}if(this.selector("bestScore").html("(Best:"+_.bestScore()+")"),_.isSuccessMode()&&_.isRankOk&&!_.isPartRetry){this.setSuccess(),this.selector("successArea").show();this.openAnimes.successCondition={params:{left:0},delay:this.animeDelay+this.animeSpan},_.isSuccess()?this.openCustomAnime.success={startFrame:G(this.animeDelay+1e3),spanFrame:G(350)}:this.openAnimes.failure={params:{left:0,opacity:1},delay:this.animeDelay+1e3},this.openAnimes.successAdvice={params:{left:0},delay:this.animeDelay+1e3},this.openAnimes.successLevel={params:{left:0},delay:this.animeDelay+1e3}}else this.setLevel(),this.selector("levelArea").show(),_.isSuccessMode()||(this.setAdvice(),this.selector("adviceArea").show()),this.openAnimes.level1={params:{left:0},delay:this.animeDelay+this.animeSpan},this.openAnimes.level2={params:{left:0},delay:this.animeDelay+2*this.animeSpan},this.openAnimes.adviceArea={params:{left:0},delay:this.animeDelay+3*this.animeSpan};_.isRankOk||this.selector("registRankingBtn").hide(),_.isRankOk&&!_.gameIni.isLimitOpened||this.selector("tweetBtn").hide(),_.keyLog.aggregateLogs(),_.getStats(),!_.isLoggedIn||_.isTest||_.isPartRetry||this.sendPlayLog()}isVisible(this.selector("detailBtn"))||isVisible(this.selector("registRankingBtn"))||isVisible(this.selector("tweetBtn"))||this.selector("btnSpace").hide(),!isVisible(this.selector("nextBtn"))&&_.gameIni.hasOwnProperty("prUrl")&&_.gameIni.prUrl&&(this.selector("pr").html('<a href="'+_.gameIni.prUrl+'" rel="nofollow" target="_blank" title="Amazonへ"><img src="'+_.gameIni.prImage.croppedImageUrl1+'"></a><span class="mtjText">&lt;PR&gt;</span>'),this.openAnimes.pr={params:{opacity:1},delay:this.animeDelay},this.selector("pr").show()),_.save(),_.saveDbSetting(),re.prototype.openScreen.call(this),isVisible(this.selector("isBestScore"))||(this.stopBlink("registRankingBlink",!0),this.blinks.registRankingBlink.enabled=!1)},me.prototype.keyDown=function(e){var t;if(this.rankingPhase!=this.RANKING_PHASE_CLOSE||isVisible(this.selector("modalLayer")))this.rankingPhase==this.RANKING_PHASE_OPEN?e.keyCode==w||e.keyCode==F?this.sendRanking():e.keyCode==R&&this.closeResistRanking():this.rankingPhase==this.RANKING_PHASE_SENT?e.keyCode==R||e.keyCode==w||e.keyCode==F?this.closeResistRanking():82==e.keyCode?this.openRanking():84==e.keyCode&&this.openTwitter():isVisible(this.selector("settingIdvBox"))&&(e.keyCode==w||e.keyCode==F?this.endSettingIdv():e.keyCode==R&&this.cancelSettingIdv());else if(_.isTest||e.keyCode!=w&&38!=e.keyCode&&40!=e.keyCode)if(83==e.keyCode)isVisible(this.selector("returnScoreBtn"))&&(t=Number(this.selector("idvArea").find(".mtjSort").val()),e.shiftKey&&0<t?(t-=1,this.selector("idvArea").find(".mtjSort").val(t),this.nowIdvFunc(t)):!e.shiftKey&&t<this.IDV_SORT_KEYS.length-1&&(t+=1,this.selector("idvArea").find(".mtjSort").val(t),this.nowIdvFunc(t)));else if(37==e.keyCode){if(isVisible(this.selector("returnScoreBtn")))return e.preventDefault(),e.stopPropagation(),t=this.selector("idvArea").find(".mtjSort").val(),isVisible(this.selector("idvKanaBtn"))?this.selector("idvQuestionBtn").hasClass("mtjActive")?this.showIdvRoma(t):this.selector("idvKanaBtn").hasClass("mtjActive")?this.showIdvQuestion(t):this.showIdvKana(t):this.selector("idvQuestionBtn").hasClass("mtjActive")?this.showIdvRoma(t):this.showIdvQuestion(t),!1}else if(39==e.keyCode){if(isVisible(this.selector("returnScoreBtn")))return e.preventDefault(),e.stopPropagation(),t=this.selector("idvArea").find(".mtjSort").val(),isVisible(this.selector("idvKanaBtn"))?this.selector("idvQuestionBtn").hasClass("mtjActive")?this.showIdvKana(t):this.selector("idvKanaBtn").hasClass("mtjActive")?this.showIdvRoma(t):this.showIdvQuestion(t):this.selector("idvQuestionBtn").hasClass("mtjActive")?this.showIdvRoma(t):this.showIdvQuestion(t),!1}else e.keyCode==F?this.openResistRanking():e.keyCode==R&&isVisible(this.selector("idvArea"))?this.closeIdv():e.keyCode==R?this.retry():77==e.keyCode?this.missRetry():66==e.keyCode?this.openStart():78==e.keyCode?this.openNext():82==e.keyCode?this.openRanking():84==e.keyCode?this.openTwitter():68==e.keyCode&&_.isTest?this.returnEditDetail():81==e.keyCode&&_.isTest&&this.returnEditQuestion();else if(isVisible(this.selector("returnScoreBtn"))||e.keyCode!=w){if(isVisible(this.selector("returnScoreBtn"))){if(37<=e.keyCode&&e.keyCode<=40&&(e.preventDefault(),e.stopPropagation()),this.isScrolling)return;var s,i,n=this.selector("idvResults").scrollTop();e.keyCode==w&&e.shiftKey||38==e.keyCode?"repeat"in e&&e.repeat?(s=n-this.IDV_SCROLL_HEIGHT/2,i=10):(s=n-this.IDV_SCROLL_HEIGHT,i=100):"repeat"in e&&e.repeat?(s=n+this.IDV_SCROLL_HEIGHT/2,i=10):(s=n+this.IDV_SCROLL_HEIGHT,i=100),this.selector("idvResults").animate({scrollTop:s},i),this.isScrolling=!0;var a=this;if(setTimeout(function(){a.isScrolling=!1},i),37<=e.keyCode&&e.keyCode<=40)return!1}}else this.showIdvQuestion()},me.prototype.onFrame=function(){for(var e in re.prototype.onFrame.call(this),this.openCustomAnime){var t=this.openCustomAnime[e].startFrame,s=this.openCustomAnime[e].spanFrame,i=this.frame-t;if(0<=i){if("success"==e){var n=360*(s-i)*2/7;this.selector(e).css("transform","rotate("+n+"deg) scale("+(5*(s-i)/s+1)+")"),this.selector(e).css("opacity",i/s)}else if("isBestScore"==e){n=i/s*360*-3-20;var a=(this.openCustomAnime[e].startLeft-this.openCustomAnime[e].endLeft)*(s-i)/s+this.openCustomAnime[e].endLeft;this.selector("isBestScore").css("transform","rotate("+n+"deg)"),this.selector("isBestScore").css("left",a+"px")}s<=i&&delete this.openCustomAnime[e]}}this.isOpened&&this.rankingPhase==this.RANKING_PHASE_CLOSE&&this.blink("registRankingBlink")},me.prototype.retry=function(){_.isPartRetry||_.resetGame(),this.closeScreen(M)},me.prototype.missRetry=function(){if(isVisible(this.selector("missRetryBtn"))){_.isPartRetry=!0,_.partRetryQuestionNos=[];for(var e=0;e<_.questionStats.getOrderIndexes("no").length;e++){var t=_.questionStats.getOrderIndexes("no")[e];0<_.questionStats.stats()[t].missCount&&_.partRetryQuestionNos.push(t)}this.closeScreen(M)}},me.prototype.filterRetry=function(){if(isVisible(this.selector("filterRetryBtn"))){_.isPartRetry=!0,_.partRetryQuestionNos=[];for(var e=0;e<this.filterQuestionNos.length;e++)_.partRetryQuestionNos.indexOf(this.filterQuestionNos[e])&&_.partRetryQuestionNos.push(this.filterQuestionNos[e]);this.closeScreen(M)}},me.prototype.openNext=function(){isVisible(this.selector("nextBtn"))&&(location.href="/"+_.gameIni.successUrl)},me.prototype.openRanking=function(){isVisible(this.selector("rankingBtn"))&&(location.href=_.getRankingUrl())},me.prototype.openStart=function(){this.closeScreen(x)},me.prototype.returnEditDetail=function(){_.isTest&&(location.href="/make/detail?gameId="+_.gameId)},me.prototype.returnEditQuestion=function(){_.isTest&&(location.href="/make/question?gameId="+_.gameId)},me.prototype.initIdv=function(e){this.selector("resultArea").hide(),this.selector("idvQuestions").hide(),this.selector("idvKanas").hide(),this.selector("idvRomas").hide(),this.selector("idvArea").find(".mtjSwitchBtn").removeClass("mtjActive"),this.selector("returnIdvRomaBtn").hide(),this.selector("returnIdvKanaBtn").hide(),this.selector("idvBtns").hide(),_.gameIni.useFurigana?this.selector("idvKanaBtn").show():this.selector("idvKanaBtn").hide(),this.selector("idvArea").show(),this.selector("idvArea").find(".mtjSort").prop("disabled",!1),this.selector("detailBtn").hide(),this.selector("returnScoreBtn").show(),this.selector("idvResults").scrollTop(0),this.showShortCuts(),this.selector("idvArea").find(".mtjSort").val(e)},me.prototype.showIdvQuestion=function(e,t){e=Number(J(e));var s,i=this.IDV_SORT_KEYS[e],n=_.getStats().questionStats,a=n.getOrderIndexes(i);this.filterQuestionNos=[];var o="";t&&(t.hasOwnProperty("kana")&&(0<=t.kana.search(/space/i)?_.gameIni.isEnglish?(t.kana=" ",o+="<h3>"+this.strKana+"「 」を含む問題</h3>"):(t.kana="　",o+="<h3>"+this.strKana+"「□」を含む問題</h3>"):(t.kana=hd(t.kana),o+="<h3>"+this.strKana+"「"+h(t.kana)+"」を含む問題</h3>")),t.hasOwnProperty("roma")&&(0<=t.roma.search(/space/i)?(t.roma=" ",o+="<h3>ローマ字「"+K+"」を含む問題</h3>"):(t.roma=hd(t.roma),o+="<h3>ローマ字「"+h(t.roma)+"」を含む問題</h3>")));for(var l=!1,r=0;r<a.length;r++){var c=a[r],u=n.stats[c],d=_.gameIni.questions[u.questionNo],p=_.keyLog.resultQuestionLogs[u.resultQuestionLogNo],m=[],g="",y="",f="",S=!1,v=!1,I=!1;for(s=0;s<p.length;s++){var x=p[s],M=x.key;if(m.length<=x.kanaNo&&(m.push({missCount:0,kana:x.kana}),0<x.kanaNo&&(y+="</span>"),y+='<span class="mtjUnit">')," "===M?(M=K,I=!0):M=_.isCaseSensitive?h(M):_.isRomaLower?h(M.toLowerCase()):h(M.toUpperCase()),1&x.result){var k=[];S&&k.push("mtjMiss"),t&&t.hasOwnProperty("roma")&&x.key.toLowerCase()==t.roma.toLowerCase()&&(k.push("mtjHit"),v=!0),0<k.length?y+='<span class="'+k.join(" ")+'">'+M+"</span>":y+=M,S=!1}else y+='<span class="mtjMishit">'+M+"</span>",m[x.kanaNo].missCount++,S=!0}if(y+="</span>",_.gameIni.useFurigana)for(s=0;s<m.length;s++){var N=[],T=m[s].kana;0<m[s].missCount&&N.push("mtjMiss"),t&&t.hasOwnProperty("kana")&&m[s].kana==t.kana&&(N.push("mtjHit"),v=!0),"　"===T?(T="□",I=!0):" "===T?(T=" ",I=!0):T=h(T),0<N.length?f+='<span class="'+N.join(" ")+'">'+T+"</span>":f+=T}if(t){if(!v)continue;this.filterQuestionNos.push(u.questionNo)}I&&(l=!0),g+='<div class="mtjQuestion">',g+='<div class="mtjKanji">'+h(d.kanji)+"</div>",_.gameIni.useFurigana&&(g+='<div class="mtjKana">'+f+"</div>"),g+='<div class="mtjRoma">'+y+"</div>",g+='<div class="mtjInfo"><span class="mtjName">打鍵/秒</span><span class="mtjValue">'+_.speedText(u.romaCount,u.passedTime/100,2)+'</span><span class="mtjName">時間</span><span class="mtjValue">'+_.passedTimeText(u.passedTime/100,2)+'秒</span><span class="mtjName">正誤率</span><span class="mtjValue">'+_.successRateText(u.romaCount,u.missCount)+'</span><span class="mtjName">ミス</span><span class="mtjValue">'+u.missCount+"打</span></div>",g+="</div>",u.passedTime,u.missCount,o+=g}l&&(o+='<div class="'+this.className+'-idvMemo">□はスペースを表しています。</div>'),this.selector("idvQuestions").empty(),this.initIdv(e),t&&(this.selector("idvArea").find(".mtjSort").prop("disabled",!0),t.hasOwnProperty("kana")?(this.selector("idvBtns").show(),this.selector("returnIdvKanaBtn").show()):t.hasOwnProperty("roma")&&(this.selector("idvBtns").show(),this.selector("returnIdvRomaBtn").show())),this.nowIdvFunc=this.showIdvQuestion,this.selector("idvQuestionBtn").addClass("mtjActive"),this.selector("idvQuestions").html(o),_.hideMishitRoma?this.selector("idvQuestions").addClass("mtjHideMishitRoma"):this.selector("idvQuestions").removeClass("mtjHideMishitRoma"),this.selector("idvQuestions").show()},me.prototype.showIdvKana=function(e,t){e=Number(J(e));for(var s=this.IDV_SORT_KEYS[e],i=_.getStats(_.excludeStats).kanaStats,n=i.getOrderIndexes(s),a='<table class="'+this.className+'-kanas mtjResultTable"><tr><th>'+this.strKana+'<th>出現<th>打鍵/秒<th><div class="mtjSuccess">成功</div><div class="mtjMiss">ミス</div>',o=0;o<n.length;o++){var l=n[o],r=i.stats[l],h=l;h.match(/[ 　]/)&&(h=_.isRomaLower?'<span class="mtjSpace">space</span>':'<span class="mtjSpace">SPACE</span>');var c=Math.floor(r.romaCount/(r.romaCount+r.missCount)*240),u=240-Math.floor(r.romaCount/(r.romaCount+r.missCount)*240);a+='<tr><td class="mtjIndex">'+h+'</div><td class="mtjCount">'+r.count+'回<td class="mtjSpeed">'+_.speedText(r.romaCount,r.passedTime/100,2)+'<td class="mtjRate"><div class="mtjRateInfo"><div class="mtjSuccess"><span class="mtjValue">'+_.successRateText(r.romaCount,r.missCount)+"</span>("+r.romaCount+'打)</div><div class="mtjMiss">('+r.missCount+'打)</div></div><div class="mtjRateBar">',0<c&&(a+='<span class="mtjRateBarA" style="width:'+c+'px;"></span>'),0<u&&(a+='<span class="mtjRateBarB" style="width:'+u+'px;"></span>'),a+="</div>"}a+="</table>",this.initIdv(e),this.nowIdvFunc=this.showIdvKana,this.selector("idvKanaBtn").addClass("mtjActive"),this.selector("idvKanas").html(a),this.selector("idvKanas").show()},me.prototype.showIdvRoma=function(e,t){e=Number(J(e));for(var s=this.IDV_SORT_KEYS[e],i=_.getStats(_.excludeStats).romaStats,n=i.getOrderIndexes(s),a='<table class="'+this.className+'-romas mtjResultTable"><tr><th>ローマ字<th>出現<th>打鍵/秒<th><div class="mtjSuccess">成功</div><div class="mtjMiss">ミス</div>',o=0;o<n.length;o++){var l=n[o],r=i.stats[l],c=l;c=" "===c?_.isRomaLower?'<span class="mtjSpace">space</span>':'<span class="mtjSpace">SPACE</span>':_.isRomaLower?h(c.toLowerCase()):h(c.toUpperCase());var u=Math.floor(r.romaCount/(r.romaCount+r.missCount)*240),d=240-Math.floor(r.romaCount/(r.romaCount+r.missCount)*240);a+='<tr><td class="mtjIndex">'+c+'</div><td class="mtjCount">'+r.count+'回<td class="mtjSpeed">'+_.speedText(r.romaCount,r.passedTime/100,2)+'<td class="mtjRate"><div class="mtjRateInfo"><div class="mtjSuccess"><span class="mtjValue">'+_.successRateText(r.romaCount,r.missCount)+"</span>("+r.romaCount+'打)</div><div class="mtjMiss">('+r.missCount+'打)</div></div><div class="mtjRateBar">',0<u&&(a+='<span class="mtjRateBarA" style="width:'+u+'px;"></span>'),0<d&&(a+='<span class="mtjRateBarB" style="width:'+d+'px;"></span>'),a+="</div>"}a+="</table>",this.initIdv(e),this.nowIdvFunc=this.showIdvRoma,this.selector("idvRomaBtn").addClass("mtjActive"),this.selector("idvRomas").html(a),this.selector("idvRomas").show()},me.prototype.closeIdv=function(){this.selector("returnScoreBtn").hide(),this.selector("idvArea").hide(),this.selector("resultArea").show(),this.selector("detailBtn").show(),this.showShortCuts()},me.prototype.returnIdvKana=function(){this.selector("idvArea").find(".mtjSwitchBtn").removeClass("mtjActive"),this.selector("idvKanaBtn").addClass("mtjActive"),this.selector("idvQuestions").hide(),this.selector("idvKanas").show(),this.selector("idvRomas").hide(),this.selector("idvBtns").hide(),this.selector("idvArea").find(".mtjSort").prop("disabled",!1),this.selector("idvArea").find(".mtjSort").val(this.preIdvSortNo),this.selector("idvResults").scrollTop(this.preIdvScrollTop),this.preIdvScrollTop=0,this.nowIdvFunc=this.showIdvKana},me.prototype.returnIdvRoma=function(){this.selector("idvArea").find(".mtjSwitchBtn").removeClass("mtjActive"),this.selector("idvRomaBtn").addClass("mtjActive"),this.selector("idvQuestions").hide(),this.selector("idvKanas").hide(),this.selector("idvRomas").show(),this.selector("idvBtns").hide(),this.selector("idvArea").find(".mtjSort").prop("disabled",!1),this.selector("idvArea").find(".mtjSort").val(this.preIdvSortNo),this.selector("idvResults").scrollTop(this.preIdvScrollTop),this.preIdvScrollTop=0,this.nowIdvFunc=this.showIdvRoma},me.prototype.settingIdv=function(){this.selector("excludeStatsSelect").val(_.excludeStats),this.selector("hideMishitRomaCheck").prop("checked",Boolean(_.hideMishitRoma)),this.selector("modalLayer").show(),this.selector("settingIdvBox").show()},me.prototype.endSettingIdv=function(){_.excludeStats=this.selector("excludeStatsSelect").val(),_.hideMishitRoma=Number(this.selector("hideMishitRomaCheck").prop("checked")),_.save(),_.saveDbSetting(),this.selector("modalLayer").hide(),this.selector("settingIdvBox").hide(),this.nowIdvFunc(this.selector("idvArea").find(".mtjSort").val())},me.prototype.cancelSettingIdv=function(){this.selector("modalLayer").hide(),this.selector("settingIdvBox").hide()},me.prototype.openResistRanking=function(){_.isRankOk&&isVisible(this.selector("registRankingBtn"))&&(this.rankingPhase=this.RANKING_PHASE_OPEN,this.selector("rankingSendBtn").show(),this.selector("rankingSending").hide(),this.selector("modalLayer").show(),this.selector("rankingBox").show(),this.selector("registRankingBtn").addClass("mtjActive"),this.selector("rankingBox").find(".mtjNickName").val()||this.selector("rankingBox").find(".mtjNickName").focus())},me.prototype.sendRanking=function(){if(6e4<_.score()&&20<_.romaCount()){var e=this;d.showConfirm("高すぎるスコアを登録するとチート行為と判定され、規制される場合があります。\nそれでもスコアを送信しますか？",{func:function(){e.runSendRanking()}})}else this.runSendRanking()},me.prototype.runSendRanking=function(){if(_.isRankOk&&isVisible(this.selector("registRankingBtn"))){var e=this.selector("rankingBox").find(".mtjNickName").val();if(0==(e=(e=e.replace(/^[\s　]+|[\s　]+$/g,"")).substring(0,8)).length)d.showAlert("名前を入力してください");else{this.selector("rankingSendBtn").hide(),this.selector("rankingSending").show(),_.playerName=e;var t={};t.gameId=_.gameId,t.enc=1,t.t=+new Date,$.ajax({type:"POST",url:"prepare-score-json",data:t,dataType:"json",context:this}).done(function(e,t,s){if("OK"!=e.status)return e.hasOwnProperty("message")?d.showAlert(e.message):d.showAlert("ランキング登録に失敗しました。\n時間を置いてから再度お試し下さい。"),this.selector("rankingSendBtn").show(),void this.selector("rankingSending").hide();_.rankingKeyId=e.rankingKeyId;var i=new Blowfish(T);_.rankingKey=i.base64Decode(i.decrypt(i.base64Decode(e.data))),_.rankingUserId||(_.rankingUserId=_.rankingKeyId),this.sendScore()}).fail(function(e,t,s){this.selector("rankingSendBtn").show(),this.selector("rankingSending").hide(),d.showAlert("通信に失敗しました")})}}},me.prototype.closeResistRanking=function(){this.rankingPhase=this.RANKING_PHASE_CLOSE,this.selector("registRankingBtn").removeClass("mtjActive"),this.selector("modalLayer").hide(),this.selector("rankingBox").hide(),this.selector("rankedBox").hide()},me.prototype.openTwitter=function(){isVisible(this.selector("tweetBtn"))&&window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(this.tweetText()),"_blank")},me.prototype.sendScore=function(){var e={};e.gameId=_.gameId,e.rankingUserId=_.rankingUserId,e.score=_.score(),e.timeMax=_.gameIni.timeMax,e.questionCount=_.questionCount(),e.romaCount=_.romaCount(),e.missCount=_.missCount(),e.playerName=encodeURIComponent(_.playerName),e.reviewPoint=this.selector("rankingBox").find(".mtjReviewPoint").val(),e.passedTime=_.passedTime(),e.endMode=_.gameIni.endMode,e.isSuccess=_.isSuccess(),e.gameVersion=_.gameIni.gameVersion,e.applicationId=y,e.uuId=_.uuId,e.clientType=1,e.clientId="",e.model="",e.os=window.navigator.userAgent;var t={};t.rankingKeyId=_.rankingKeyId;var s=new Blowfish(_.rankingKey);t.data=s.base64Encode(s.encrypt(s.base64Encode(JSON.stringify(e)))),t.enc=1,t.t=+new Date,$.ajax({type:"POST",url:"send-score-json",data:t,dataType:"json",context:this}).done(function(e,t,s){if(this.selector("rankingSendBtn").show(),this.selector("rankingSending").hide(),"OK"==e.status){e.isNewBestScore?this.selector("rankedBox").find(".mtjRankedInfo").html('<div class="mjtBestResult">'+e.rank+"位にランクインしました！</div><div>"+e.rank+"位／"+e.rankCount+"人中</div>"):this.selector("rankedBox").find(".mtjRankedInfo").html("記録更新ならず・・・"),_.rank(e.rank),this.selector("ranking").html(e.rank+"位／"+e.rankCount+"人中"),this.selector("ranking").show(),this.selector("registRankingBtn").removeClass("mtjActive"),this.selector("registRankingBtn").hide(),this.selector("rankingBtn").show();var i=0;this.selector("rankedBox").find(".mtjModalLine .mtjRectBtn").each(function(){"none"!=$(this).css("display")&&i++}),3<i?this.selector("rankedBox").find(".mtjModalLine").addClass("mtjDouble"):this.selector("rankedBox").find(".mtjModalLine").removeClass("mtjDouble"),_.save(),_.saveDbSetting(),this.rankingPhase=this.RANKING_PHASE_SENT,this.selector("rankingBox").hide(),this.selector("rankedBox").show(),this.showShortCuts()}else"NG-WORD"==e.status?(d.showAlert(e.message),this.selector("registRankingBtn").hide(),this.selector("tweetBtn").hide(),this.selector("btnSpace").hide(),_.isRankOk=!1,this.closeResistRanking()):e.hasOwnProperty("message")?d.showAlert(e.message):d.showAlert("通信エラーが発生しました")}).fail(function(e,t,s){this.selector("rankingSendBtn").show(),this.selector("rankingSending").hide(),d.showAlert("通信に失敗しました")})},me.prototype.setAdvice=function(){this.selector("adviceArea").hide();var e=[],t="",s="",i=Math.floor(_.romaCount()/100)+1;for(var n in i<3&&(i=3),_.keyStats.stats())_.keyStats.stats()[n].missCount>=i&&e.push({roma:n,count:_.keyStats.stats()[n].missCount});e.sort(function(e,t){return e.count<t.count?1:e.count>t.count?-1:0});var a=_.score();if(a<2e3)t="タイピングの基礎からしっかり学びましょう。<br>まずはタイピング講座で練習方法をチェック！",_.trainingUrl="training",s='<a class="mtjTagBtn" href="/'+_.trainingUrl+'">タイピング講座へ</a>';else if(a<3e3&&!_.gameIni.isEnglish){t="上達するには、50音の反復練習をして<br>ひらがなの打ち方を指で記憶しましょう！",_.trainingUrl="training/practice#repeat-sec";s='<a class="mtjTagBtn" href="/training/practice#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E7%B7%B4%E7%BF%92%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%EF%BC%81">タイピング練習へ</a>'}else{if(0<e.length)for(var o=0;o<this.SP_TRAININGS.length;o++)for(var l=0;l<this.SP_TRAININGS[o].keys.length;l++)if(e[0].roma==this.SP_TRAININGS[o].keys[l]){t=this.SP_TRAININGS[o].advice,_.trainingUrl=this.SP_TRAININGS[o].trainingUrl,s+='<a class="mtjTagBtn" href="/'+_.trainingUrl+'">特訓スタート！</a>';break}if(""==t)if(a<4e3)t="基本はできています！実践練習でさらにスピードアップしましょう！",_.trainingUrl="list/series/56433?sort=old",s='<a class="mtjTagBtn" href="/'+_.trainingUrl+'">実践練習へ</a>';else if(1==_.gameIni.isSkillCheck){t="好きなジャンルを選んでもっとタイピングを楽しもう！";var r=_.getValuationNo(a);_.valuationInis[r].comment&&0==e.length&&(t=_.valuationInis[r].comment+"<br>"+t);for(var c=0;c<this.MASTAR_TAGS.length;c++)_.valuationInis[r].comment||0<e.length?1&this.MASTAR_TAGS[c].multi&&(s+='<a class="mtjTagBtn" href="'+this.MASTAR_TAGS[c].href+'">'+this.MASTAR_TAGS[c].name+"</a>"):(s+='<a class="mtjTagBtn" href="'+this.MASTAR_TAGS[c].href+'">'+this.MASTAR_TAGS[c].name+"</a>",2&this.MASTAR_TAGS[c].multi&&(s+="<br>"))}}var u="";if(0<e.length){var d='<span class="missAdviceTitle">ミスの多い文字</span>';for(o=0;o<e.length&&!(5<=o);o++)d+='<span class="mtjMissRoma">'+h(e[o].roma.toUpperCase())+"("+e[o].count+"回)</span>";u='<div class="'+this.className+'-missAdvice">'+d+"</div>"}u+='<div class="'+this.className+'-advice">'+t+"</div>",s&&(s&&0<=t.search(/<br>/gi)&&0<e.length?u+='<div class="'+this.className+'-tagBtnArea mtjTagBtnAreaUp">'+s+"</div>":u+='<div class="'+this.className+'-tagBtnArea">'+s+"</div>"),this.selector("adviceArea").html(u),this.selector("adviceArea").show()},me.prototype.setLevel=function(){1==_.gameIni.isSkillCheck?this.selector("level1").html("あなたのタイピングレベルは…"):this.selector("level1").html("あなたの"+h(_.gameIni.title)+"レベルは…"),this.selector("level2").html("「"+h(_.getLevel(_.score()))+"」です！")},me.prototype.setSuccess=function(){if(_.isSuccess())this.selector("successAdvice").html("合格です！"),this.selector("success").show(),this.selector("failure").hide(),this.selector("registRankingBtn").show();else{var e="";_.successIni.hasOwnProperty("S")&&_.score()<_.successIni.S?e+="合格まであと"+(_.successIni.S-_.score())+"点！":_.successIni.hasOwnProperty("R")&&_.romaCount()/(_.romaCount()+_.missCount())*100<_.successIni.R?e+="もう少し正確に打ってみよう！":_.successIni.hasOwnProperty("T")&&10*Number(_.successIni.T)<_.passedTime()&&(e+="合格まであと"+Number((_.passedTime()-10*_.successIni.T)/10).toFixed(1)+"秒！"),this.selector("successAdvice").html(e),this.selector("success").hide(),this.selector("failure").show(),this.selector("registRankingBtn").hide()}this.selector("successLevel").html("レベル「"+_.getLevel(_.score())+"」 "),this.selector("successCondition").html("(合格条件："+_.successCondition()+")")},me.prototype.sendPlayLog=function(){var e={};e.gameId=_.gameId,e.gameVersion=_.gameIni.gameVersion,e.rankingUserId=_.rankingUserId,e.score=_.score(),e.timeMax=_.gameIni.timeMax,e.questionCount=_.questionCount(),e.romaCount=_.romaCount(),e.missCount=_.missCount(),e.passedTime=_.passedTime(),e.endMode=_.gameIni.endMode,e.isSuccess=_.isSuccess(),e.keyResult=JSON.stringify(_.keyStats.csvStats()),e.wordResult=JSON.stringify(_.questionStats.csvStats()),e.t=+new Date,$.ajax({type:"POST",url:"/player/log-play-json",data:e,dataType:"json",context:this}).done(function(e,t,s){"OK"!=e.status&&(e.hasOwnProperty("message")?d.showAlert(e.message):d.showAlert("通信エラーが発生しました"))}).fail(function(e,t,s){d.showAlert("通信に失敗しました")})},me.prototype.tweetText=function(){var e="";return""!=_.playerName&&(e=_.playerName+"は"),_.isSuccessMode()&&_.isSuccess()?e+=_.gameIni.title+"に合格しました！":e+="「"+_.getLevel(_.score())+"」でした！",0<_.rank()&&(e+="ランキング"+_.rank()+"位獲得！"),e+=" #"+_.gameIni.title+"\n",e+=_.siteUrl+"game/"+_.gameId+"\n",e+="  スコア　"+_.score()+"点\n",e+="  正誤率　"+_.successRateText()+" (ミス "+_.missCount()+"打)\n",e+="  速度　　"+_.speedText()+"打/秒\n",e+="  時間　　"+_.passedTimeText()+"秒\n",e+="  #mytyping"};var ge=function(e){this.INPUT_SUCCESS=1,this.INPUT_END_LETTER=2,this.INPUT_END_SENTENCE=4,this.INPUT_LETTER_RETURN=8,this.INPUT_FIRST_N=16,this.INPUT_XLTUN=32,this.INPUT_NXN=64,this._letters=[],this._letterCount=0,this._kana=e.replace(/(\r\n|\r|\n)/g,"\n");for(var t=this._kana.length-1,s="";0<=t;)if(0==t)if(this.unshiftLetter(this._kana.substr(t,1),s))s="",t--;else{if("\n"!=this._kana.substr(t,1))throw new Error("Sentence Error 1");this._letters[0].prefixCtrl+="\n"+s,t--}else if(this.unshiftLetter(this._kana.substr(t-1,2),s))s="",t-=2;else if(this.unshiftLetter(this._kana.substr(t,1),s))s="",t--;else{if("\n"!=this._kana.substr(t,1))throw new Error("Sentence Error 2");s+="\n",t--}};ge.prototype.letters=function(){return this._letters},ge.prototype.letterCount=function(e){if(void 0===e)return this._letterCount;this._letterCount=e},ge.prototype.kana=function(e){return e?this._kana:this._kana.replace(/\n/gi,"")},ge.prototype.remainKana=function(e){var t="";this._letterCount<this._letters.length&&(t+=this._letters[this._letterCount].remainKana(e));for(var s=this._letterCount+1;s<this._letters.length;s++)t+=this._letters[s].kana(e);return t},ge.prototype.inputtedKana=function(e){for(var t="",s=0;s<this._letterCount;s++)t+=this._letters[s].kana(e);return this._letterCount<this._letters.length&&(t+=this._letters[this._letterCount].inputtedKana(e)),t},ge.prototype.nowKana=function(e){return this._letterCount<this._letters.length?this._letters[this._letterCount].remainKana(e):""},ge.prototype.nowLetter=function(){return this._letterCount<this._letters.length?this._letters[this._letterCount]:new ye},ge.prototype.roma=function(){for(var e="",t=0;t<this._letters.length;t++)e+=this._letters[t].roma();return e},ge.prototype.remainRoma=function(){for(var e="",t=this._letterCount;t<this._letters.length;t++)e+=this._letters[t].remainRoma();return e},ge.prototype.remainRomaForQb=function(){for(var e="",t=this._letterCount;t<this._letters.length;t++)e+=this._letters[t].remainRomaForQb();return e},ge.prototype.inputtedRoma=function(){for(var e="",t=Math.min(this._letterCount+1,this._letters.length),s=0;s<t;s++)e+=this._letters[s].inputtedRoma();return e},ge.prototype.unshiftLetter=function(e,t){if(_.isValidKana(e)){var s=new ye;this._letters.unshift(s);for(var i=0;i<this._letters.length;i++)this._letters[i].index(i);return s.initLetter(this,e),s.suffixCtrl=t,!0}return!1},ge.prototype.input=function(e){var t=0,s=this._letters[this._letterCount],i=s.input(e);return i&s.INPUT_SUCCESS?(t=this.INPUT_SUCCESS,i&s.INPUT_FIRST_N?t+=this.INPUT_FIRST_N:i&s.INPUT_XLTUN?t+=this.INPUT_XLTUN:i&s.INPUT_NXN&&(t+=this.INPUT_NXN),i&s.INPUT_END_LETTER&&(this._letterCount++,t+=this.INPUT_END_LETTER,this._letters.length<=this._letterCount&&(t+=this.INPUT_END_SENTENCE))):i&s.INPUT_LETTER_RETURN&&(this._letterCount--,this._letters[this._letterCount].isInputEnd=!1,t=this.INPUT_LETTER_RETURN),t};var ye=function(){this.INPUT_SUCCESS=1,this.INPUT_END_LETTER=2,this.INPUT_LETTER_RETURN=8,this.INPUT_FIRST_N=16,this.INPUT_XLTUN=32,this.INPUT_NXN=64,this.isInputEnd=!1,this._kana,this._kanaToRomaIni,this._roma,this._romaCount=0,this.parentSentence,this._index=0,this.isSingleTsu=!0,this.mustSingleTsu=!1,this.tsuReferenceLetter=null,this.isLockFirstRoma=!1,this.isFirstNOk=!1,this.prefixCtrl="",this.suffixCtrl="",this.isCaseSensitive=!1};ye.prototype.initLetter=function(e,t){this.parentSentence=e,this.isInputEnd=!1,_.isValidKana(t)?(this._kanaToRomaIni=_.kanaToRomaInis[t],this._kana=t,_.isCaseSensitive&&t.match(/^[a-zA-Zａ-ｚＡ-Ｚ]$/)&&(this.isCaseSensitive=!0)):(this._kanaToRomaIni={separateFlag:0,xlMode:1,romaInis:{uniXl:{0:""}}},this._kana=""),this.decideRoma(_.separateView)},ye.prototype.index=function(e){if(void 0===e)return this._index;this._index=e},ye.prototype.romaCount=function(e){if(void 0===e)return this._romaCount;this._romaCount=e},ye.prototype.kana=function(e){return e?this.prefixCtrl+this._kana+this.suffixCtrl:this._kana},ye.prototype.remainKana=function(e){return this.isInputEnd?"":0<=this._roma.search(/[a-z][xl](y?[aiueo]|ts?u)$/i)?0<=this.remainRoma().search(/[a-z][xl](y?[aiueo]|ts?u)$/i)?this.kana(e):e?this._kana.substr(1,1)+this.suffixCtrl:this._kana.substr(1,1):this.kana(e)},ye.prototype.inputtedKana=function(e){return this.isInputEnd?this.kana(e):0<=this._roma.search(/[a-z][xl](y?[aiueo]|ts?u)$/i)?0<=this.remainRoma().search(/[a-z][xl](y?[aiueo]|ts?u)$/i)?"":e?this.prefixCtrl+this._kana.substr(0,1):this._kana.substr(0,1):""},ye.prototype.roma=function(e){if(void 0===e)return this._roma;this._roma=e},ye.prototype.remainRoma=function(){return this._roma.substr(this._romaCount)},ye.prototype.remainRomaForQb=function(){return this.isCaseSensitive?this.remainRoma():_.isRomaLower?this.remainRoma().toLowerCase():this.remainRoma().toUpperCase()},ye.prototype.inputtedRoma=function(){return this._roma.substr(0,this._romaCount)},ye.prototype.kanaToRomaIni=function(){return this._kanaToRomaIni},ye.prototype.prevLetter=function(){return 0<this._index?this.parentSentence.letters()[this._index-1]:null},ye.prototype.nextLetter=function(){return this._index+1<this.parentSentence.letters().length?this.parentSentence.letters()[this._index+1]:null},ye.prototype.decideRoma=function(e){var t;t=1==e&&this._kanaToRomaIni.separateFlag!=_.inputMode.SEPARATE_NONE?"uniXl":_.inputMode.getRomaIniKey(this._kanaToRomaIni);var s=this._kanaToRomaIni.romaInis[t],i=_.getAllTypeFlag(this._kana,t)&_.inputMode.typeFlag;s.hasOwnProperty(i)||(i=0),this._roma=s[i],this.nextLetter()&&("っ"==this._kana?!this.mustSingleTsu&&this.nextLetter().roma().match(/^[bcdfghjklmpqrstvwxyzBCDFGHJKLMPQRSTVWXYZ]/)&&(this._roma=this.nextLetter().roma().charAt(0),this.isSingleTsu=!1,this.nextLetter().tsuReferenceLetter?this.tsuReferenceLetter=this.nextLetter().tsuReferenceLetter:this.tsuReferenceLetter=this.nextLetter()):"ん"==this._kana&&"xn"!=this._roma&&this.nextLetter().roma().match(/^[^aiueonyAIUEONY]/)&&(this._roma="n",this.nextLetter().isFirstNOk=!0))},ye.prototype.input=function(e){var t,s,i,n,a,o,l,r,h=0,c=!1,u=!1,d=!1,p="";if(this._roma.length>this._romaCount&&(p=this._roma.charAt(this._romaCount)),0<p.length&&(p==e||!this.isCaseSensitive&&p.toLowerCase()==e.toLowerCase()))h=this.INPUT_SUCCESS,this._romaCount++;else{if(!this.prevLetter()||this.prevLetter().isSingleTsu||"っ"!=this.prevLetter().kana()||0!=this._romaCount||!this.prevLetter().tsuReferenceLetter){if(this.isFirstNOk&&"n"==e)h=this.INPUT_SUCCESS,this.isFirstNOk=!1,this.prevLetter().roma("nn"),this.prevLetter().romaCount(this.prevLetter().romaCount()+1),c=!0;else if(!this.isSingleTsu&&"っ"==this._kana&&"n"!=e){if(this.tsuReferenceLetter&&!this.tsuReferenceLetter.kanaToRomaIni().onlyOne)for(t=_.inputMode.getOrderRomaIniKeys(this.tsuReferenceLetter.kanaToRomaIni()),a=0;a<t.length;a++)if(this.tsuReferenceLetter.kanaToRomaIni().romaInis.hasOwnProperty(t[a])){for(n in s=[],i=_.getAllTypeFlag(this.tsuReferenceLetter.kana(),t[a])&_.inputMode.typeFlag,s.push(i),this.tsuReferenceLetter.kanaToRomaIni().romaInis[t[a]])n!=i&&s.push(n);for(o=0;o<s.length;o++)if(this.tsuReferenceLetter.kanaToRomaIni().romaInis[t[a]].hasOwnProperty(s[o])&&(r=this.tsuReferenceLetter.kanaToRomaIni().romaInis[t[a]][s[o]].charAt(0))==e&&0<r.length){for(this._roma=r,h=this.INPUT_SUCCESS,this._romaCount++,_.inputMode.changeMode(this.tsuReferenceLetter.kana(),this.tsuReferenceLetter.kanaToRomaIni(),t[a],s[o]),this.tsuReferenceLetter.decideRoma(),l=this.index()+1;l<this.tsuReferenceLetter.index();l++)"っ"==this.parentSentence.letters()[l].kana()&&0==this.parentSentence.letters()[l].isSingleTsu&&this.parentSentence.letters()[l].roma(r);break}if(h==this.INPUT_SUCCESS)break}if(h!=this.INPUT_SUCCESS&&this.nextLetter()&&"っ"==this.nextLetter().kana()&&e.match(/[xl]/)&&this.tsuReferenceLetter&&"っ"!=this.tsuReferenceLetter.kana())for(_.inputMode.xlFlag="x"==e?_.inputMode.XL_X:_.inputMode.XL_L,h=this.INPUT_SUCCESS,this._romaCount=1,this._roma=e,l=this.tsuReferenceLetter.index()-1;l>this.index();l--)"っ"==this.parentSentence.letters()[l].kana()&&0==this.parentSentence.letters()[l].isSingleTsu&&(this.parentSentence.letters()[l].tsuReferenceLetter=null,l==this.tsuReferenceLetter.index()-1&&(this.parentSentence.letters()[l].isSingleTsu=!0,this.parentSentence.letters()[l].mustSingleTsu=!0),this.parentSentence.letters()[l].decideRoma())}if(h!=this.INPUT_SUCCESS&&"ん"==this._kana&&this.nextLetter()&&"ん"==this.nextLetter().kana()&&"x"==e&&1==this._romaCount&&"xn"!=this._roma?(h=this.INPUT_SUCCESS,this._roma="n",this.nextLetter().romaCount(this.nextLetter().romaCount()+1),_.inputMode.changeMode(this._kana,this._kanaToRomaIni,_.inputMode.getRomaIniKey(this._kanaToRomaIni),_.inputMode.TYPE_XN),this.nextLetter().decideRoma(),d=!0):h!=this.INPUT_SUCCESS&&"っ"==this._kana&&this.nextLetter()&&"ん"==this.nextLetter().kana()&&"x"==e&&1==this._romaCount&&"l"!=this.inputtedRoma()&&(h=this.INPUT_SUCCESS,u=!0,this._roma="x",this.romaCount(1),_.inputMode.changeMode("ん",this.nextLetter().kanaToRomaIni(),_.inputMode.getRomaIniKey(this.nextLetter().kanaToRomaIni),_.inputMode.TYPE_XN),this.nextLetter().decideRoma(),this.nextLetter().romaCount(1)),h!=this.INPUT_SUCCESS&&!this._kanaToRomaIni.onlyOne){var m=this._roma.substr(0,this._romaCount)+e;for(t=_.inputMode.getOrderRomaIniKeys(this._kanaToRomaIni),a=0;a<t.length;a++)if(this._kanaToRomaIni.romaInis.hasOwnProperty(t[a])){for(n in s=[],i=_.getAllTypeFlag(this._kana,t[a])&_.inputMode.typeFlag,s.push(i),this._kanaToRomaIni.romaInis[t[a]])n!=i&&s.push(n);for(o=0;o<s.length;o++)if(this._kanaToRomaIni.romaInis[t[a]].hasOwnProperty(s[o])&&this._kanaToRomaIni.romaInis[t[a]][s[o]].length>this._romaCount&&(r=this._kanaToRomaIni.romaInis[t[a]][s[o]].substr(0,this._romaCount+1))==m&&0<r.length){h=this.INPUT_SUCCESS,this._romaCount++,"っ"!=this._kana||this.isSingleTsu||(this.mustSingleTsu=!0,this.isSingleTsu=!0),_.inputMode.changeMode(this._kana,this._kanaToRomaIni,t[a],s[o]),this.decideRoma();break}if(h==this.INPUT_SUCCESS)break}}}if(h!=this.INPUT_SUCCESS&&this.prevLetter()&&"っ"==this.prevLetter().kana()&&1==this.prevLetter().inputtedRoma().length&&0==this._romaCount&&"t"==e&&this._kana.match(/[ぁぃぅぇぉゃゅょゎっん]/)&&(h=this.INPUT_LETTER_RETURN,this.prevLetter().mustSingleTsu=!0,this.prevLetter().isSingleTsu=!0,this.prevLetter().decideRoma(),"っ"==this._kana)){var g=this.index();for(l=this.index()+1;l<this.parentSentence.letters().length;l++)"っ"==this.parentSentence.letters()[l].kana()&&(g=l);for(this.parentSentence.letters()[g].isSingleTsu=!1,this.parentSentence.letters()[g].mustSingleTsu=!1,l=g;l>=this.index();l--)this.parentSentence.letters()[l].decideRoma()}}return h==this.INPUT_SUCCESS&&(this.isFirstNOk=!1,c?h+=this.INPUT_FIRST_N:u?h+=this.INPUT_XLTUN:d&&(h+=this.INPUT_NXN),this._roma.length<=this._romaCount&&(h+=this.INPUT_END_LETTER,this.isInputEnd=!0)),h};var fe=function(){this.KEYSET_NO_FLAT=0,this.KEYSET_NO_SHIFT=1,this.KEYSET_NO_FINGER=2,this.KEY_INIS={1:{code:49,useShift:!1,finger:1,shiftKey:"!"},2:{code:50,useShift:!1,finger:2,shiftKey:'"'},3:{code:51,useShift:!1,finger:3,shiftKey:"#"},4:{code:52,useShift:!1,finger:4,shiftKey:"$"},5:{code:53,useShift:!1,finger:4,shiftKey:"%"},6:{code:54,useShift:!1,finger:7,shiftKey:"&"},7:{code:55,useShift:!1,finger:7,shiftKey:"'"},8:{code:56,useShift:!1,finger:8,shiftKey:"("},9:{code:57,useShift:!1,finger:9,shiftKey:")"},0:{code:48,useShift:!1,finger:10,shiftKey:""},"-":{code:189,useShift:!1,finger:10,shiftKey:"="},"^":{code:222,useShift:!1,finger:10,shiftKey:"~"},"\\220":{code:220,useShift:!1,finger:10,shiftKey:"|"},q:{code:81,useShift:!1,finger:1,shiftKey:"Q"},w:{code:87,useShift:!1,finger:2,shiftKey:"W"},e:{code:69,useShift:!1,finger:3,shiftKey:"E"},r:{code:82,useShift:!1,finger:4,shiftKey:"R"},t:{code:84,useShift:!1,finger:4,shiftKey:"T"},y:{code:89,useShift:!1,finger:7,shiftKey:"Y"},u:{code:85,useShift:!1,finger:7,shiftKey:"U"},i:{code:73,useShift:!1,finger:8,shiftKey:"I"},o:{code:79,useShift:!1,finger:9,shiftKey:"O"},p:{code:80,useShift:!1,finger:10,shiftKey:"P"},"@":{code:192,useShift:!1,finger:10,shiftKey:"`"},"[":{code:219,useShift:!1,finger:10,shiftKey:"{"},a:{code:65,useShift:!1,finger:1,shiftKey:"A"},s:{code:83,useShift:!1,finger:2,shiftKey:"S"},d:{code:68,useShift:!1,finger:3,shiftKey:"D"},f:{code:70,useShift:!1,finger:4,shiftKey:"F"},g:{code:71,useShift:!1,finger:4,shiftKey:"G"},h:{code:72,useShift:!1,finger:7,shiftKey:"H"},j:{code:74,useShift:!1,finger:7,shiftKey:"J"},k:{code:75,useShift:!1,finger:8,shiftKey:"K"},l:{code:76,useShift:!1,finger:9,shiftKey:"L"},";":{code:187,useShift:!1,finger:10,shiftKey:"+"},":":{code:186,useShift:!1,finger:10,shiftKey:"*"},"]":{code:221,useShift:!1,finger:10,shiftKey:"}"},z:{code:90,useShift:!1,finger:1,shiftKey:"Z"},x:{code:88,useShift:!1,finger:2,shiftKey:"X"},c:{code:67,useShift:!1,finger:3,shiftKey:"C"},v:{code:86,useShift:!1,finger:4,shiftKey:"V"},b:{code:66,useShift:!1,finger:4,shiftKey:"B"},n:{code:78,useShift:!1,finger:7,shiftKey:"N"},m:{code:77,useShift:!1,finger:7,shiftKey:"M"},",":{code:188,useShift:!1,finger:8,shiftKey:"<"},".":{code:190,useShift:!1,finger:9,shiftKey:">"},"/":{code:191,useShift:!1,finger:10,shiftKey:"?"},"\\226":{code:226,useShift:!1,finger:10,shiftKey:"_"}," ":{code:32,useShift:!1,finger:5,shiftKey:" "},"!":{code:49,useShift:!0,finger:1,shiftKey:""},'"':{code:50,useShift:!0,finger:2,shiftKey:""},"#":{code:51,useShift:!0,finger:3,shiftKey:""},$:{code:52,useShift:!0,finger:4,shiftKey:""},"%":{code:53,useShift:!0,finger:4,shiftKey:""},"&":{code:54,useShift:!0,finger:7,shiftKey:""},"'":{code:55,useShift:!0,finger:7,shiftKey:""},"(":{code:56,useShift:!0,finger:8,shiftKey:""},")":{code:57,useShift:!0,finger:9,shiftKey:""},"*":{code:186,useShift:!0,finger:10,shiftKey:""},"+":{code:187,useShift:!0,finger:10,shiftKey:""},"<":{code:188,useShift:!0,finger:8,shiftKey:""},"=":{code:189,useShift:!0,finger:10,shiftKey:""},">":{code:190,useShift:!0,finger:9,shiftKey:""},"?":{code:191,useShift:!0,finger:10,shiftKey:""},"`":{code:192,useShift:!0,finger:10,shiftKey:""},"{":{code:219,useShift:!0,finger:10,shiftKey:""},"|":{code:220,useShift:!0,finger:10,shiftKey:""},"}":{code:221,useShift:!0,finger:10,shiftKey:""},"~":{code:222,useShift:!0,finger:10,shiftKey:""},_:{code:226,useShift:!0,finger:10,shiftKey:""},"shift-left":{code:16,useShift:!1,finger:1,shiftKey:""},"shift-right":{code:16,useShift:!1,finger:10,shiftKey:""},Q:{code:81,useShift:!0,finger:1,shiftKey:""},W:{code:87,useShift:!0,finger:2,shiftKey:""},E:{code:69,useShift:!0,finger:3,shiftKey:""},R:{code:82,useShift:!0,finger:4,shiftKey:""},T:{code:84,useShift:!0,finger:4,shiftKey:""},Y:{code:89,useShift:!0,finger:7,shiftKey:""},U:{code:85,useShift:!0,finger:7,shiftKey:""},I:{code:73,useShift:!0,finger:8,shiftKey:""},O:{code:79,useShift:!0,finger:9,shiftKey:""},P:{code:80,useShift:!0,finger:10,shiftKey:""},A:{code:65,useShift:!0,finger:1,shiftKey:""},S:{code:83,useShift:!0,finger:2,shiftKey:""},D:{code:68,useShift:!0,finger:3,shiftKey:""},F:{code:70,useShift:!0,finger:4,shiftKey:""},G:{code:71,useShift:!0,finger:4,shiftKey:""},H:{code:72,useShift:!0,finger:7,shiftKey:""},J:{code:74,useShift:!0,finger:7,shiftKey:""},K:{code:75,useShift:!0,finger:8,shiftKey:""},L:{code:76,useShift:!0,finger:9,shiftKey:""},Z:{code:90,useShift:!0,finger:1,shiftKey:""},X:{code:88,useShift:!0,finger:2,shiftKey:""},C:{code:67,useShift:!0,finger:3,shiftKey:""},V:{code:86,useShift:!0,finger:4,shiftKey:""},B:{code:66,useShift:!0,finger:4,shiftKey:""},N:{code:78,useShift:!0,finger:7,shiftKey:""},M:{code:77,useShift:!0,finger:7,shiftKey:""}},this.KEY_POSITIONS=[["1","2","3","4","5","6","7","8","9","0","-","^","\\220"],["q","w","e","r","t","y","u","i","o","p","@","["],["a","s","d","f","g","h","j","k","l",";",":","]"],["shift-left","z","x","c","v","b","n","m",",",".","/","\\226","shift-right"],[" "]],_.Os==_.OS_MAC&&(delete this.KEY_INIS["\\226"],this.KEY_INIS._={code:167,useShift:!1,finger:10,shiftKey:"_"},this.KEY_POSITIONS[3]=["shift-left","z","x","c","v","b","n","m",",",".","/","_","shift-right"]),this.nowOnKey,this._selectors={},this.code2KeyList=null,this.code2ShiftKeyList=null};fe.prototype.initKeyboard=function(){for(var e='<div class="mtjKeyset-0">',t='<div class="mtjKeyset-1">',s=0;s<this.KEY_POSITIONS.length;s++){e+='<div class="mtjKeyset-line'+(s+1)+'">',t+='<div class="mtjKeyset-line'+(s+1)+'">';for(var i=0;i<this.KEY_POSITIONS[s].length;i++){var n=this.KEY_POSITIONS[s][i],a=n.toUpperCase(),o=this.KEY_INIS[n].shiftKey.toUpperCase();16==this.KEY_INIS[n].code?o=a="Shift":_.isCaseSensitive&&(a=h(n),o=h(this.KEY_INIS[n].shiftKey)),"\\220"!=a&&"\\226"!=a||(a="￥"),a||(a='<span class="mtjBlackSpace">&nbsp;</span>'),o||(o='<span class="mtjBlackSpace">&nbsp;</span>'),e+='<span class="mtjKey mtjKey-'+this.KEY_INIS[n].code+'">'+a+"</span>",t+='<span class="mtjKey mtjKey-'+this.KEY_INIS[n].code+'">'+o+"</span>"}e+="</div>",t+="</div>"}e+="</div>",t+="</div>";var l='<div class="mtjKeyset-2">';for(s=1;s<=10;s++)l+='<span class="mtjFinger mtjFinger-'+s+'"></span>';return e+t+(l+="</div>")},fe.prototype.code2Key=function(e,t){if(!this.code2KeyList)for(var s in this.code2KeyList={},this.code2ShiftKeyList={},this.KEY_INIS)16!=this.KEY_INIS[s].code&&(this.KEY_INIS[s].useShift?this.code2ShiftKeyList[this.KEY_INIS[s].code]=s.charAt(0):this.code2KeyList[this.KEY_INIS[s].code]=s.charAt(0));return t&&this.code2KeyList.hasOwnProperty(e)?this.code2ShiftKeyList[e]:this.code2KeyList.hasOwnProperty(e)?this.code2KeyList[e]:null},fe.prototype.key2Code=function(e,t){return this.KEY_INIS.hasOwnProperty(e)?"\\"==e?this.KEY_INIS["\\220"].code:this.KEY_INIS[e].code:t},fe.prototype.getTypingEvent=function(e){var t={};return t.key=e.key,t.keyCode=e.keyCode,t.keyCode||(e.which?t.keyCode=e.which:t.keyCode=e.charCode),t.key||(t.keyCode&&"safari"!=_.browser?t.key=this.code2Key(t.keyCode,e.shiftKey):e.keyIdentifier?(t.key=String.fromCharCode(parseInt(e.keyIdentifier.substr(2),16)),t.keyCode=this.key2Code(t.key,e.keyCode)):(t.key="\\",t.keyCode=220)),t.keyCode==w?t.key=" ":t.key&&165==t.key.charCodeAt(0)?(t.key="\\",t.keyCode=220):t.key&&1<t.key.length&&t.keyCode in B?t.key=B[t.keyCode]:t.key||(t.key=""),1!=t.key.length||_.isCaseSensitive||(t.key=t.key.toLowerCase()),t},fe.prototype.setOnKey=function(e){this.setKey(this.nowOnKey,!1),this.setKey(e,!0),this.nowOnKey=e},fe.prototype.setKey=function(e,t){null!=e&&(_.isCaseSensitive||(e=e.toLowerCase()),this.KEY_INIS.hasOwnProperty(e)?(this.switchKey(this.KEYSET_NO_FLAT,this.KEY_INIS[e].code,t),this.switchKey(this.KEYSET_NO_SHIFT,this.KEY_INIS[e].code,t),this.switchKey(this.KEYSET_NO_FINGER,this.KEY_INIS[e].finger,t)," "==e?this.switchKey(this.KEYSET_NO_FINGER,6,t):"6"!=e&&"&"!=e||this.switchKey(this.KEYSET_NO_FINGER,4,t),this.KEY_INIS[e].useShift&&(this.switchKey(this.KEYSET_NO_FLAT,16,t),this.switchKey(this.KEYSET_NO_SHIFT,16,t),this.switchKey(this.KEYSET_NO_FINGER,1,t),this.switchKey(this.KEYSET_NO_FINGER,10,t))):"\\"==e&&(this.switchKey(this.KEYSET_NO_FLAT,this.KEY_INIS["\\220"].code,t),this.switchKey(this.KEYSET_NO_SHIFT,this.KEY_INIS["\\220"].code,t),this.switchKey(this.KEYSET_NO_FINGER,this.KEY_INIS["\\220"].finger,t),_.Os!=_.OS_MAC&&(this.switchKey(this.KEYSET_NO_FLAT,this.KEY_INIS["\\226"].code,t),this.switchKey(this.KEYSET_NO_SHIFT,this.KEY_INIS["\\226"].code,t),this.switchKey(this.KEYSET_NO_FINGER,this.KEY_INIS["\\226"].finger,t))))},fe.prototype.switchKey=function(e,t,s){s?this.selector(e,t).addClass("mtjHit"):this.selector(e,t).removeClass("mtjHit")},fe.prototype.selector=function(e,t){void 0===t&&(t=0);var s=e+"-"+t;return this._selectors.hasOwnProperty(s)||(t?e==this.KEYSET_NO_FINGER?this._selectors[s]=r.find(".mtjKeyset-"+e+" .mtjFinger-"+t):this._selectors[s]=r.find(".mtjKeyset-"+e+" .mtjKey-"+t):this._selectors[s]=r.find(".mtjKeyset-"+e)),this._selectors[s]},fe.prototype.setMiss=function(e,t,s){if(null!=e)if("\\"==(e=e.toLowerCase())&&(e+=t),this.KEY_INIS.hasOwnProperty(e)){this.selector(this.KEYSET_NO_FLAT,this.KEY_INIS[e].code).addClass("mtjMiss"),this.selector(this.KEYSET_NO_SHIFT,this.KEY_INIS[e].code).addClass("mtjMiss");var i=this.selector(this.KEYSET_NO_FLAT,this.KEY_INIS[e].code),n=this.selector(this.KEYSET_NO_SHIFT,this.KEY_INIS[e].code);setTimeout(function(){i.removeClass("mtjMiss"),n.removeClass("mtjMiss")},1500)}else{new RegExp(/^[ぁ-んァ-ンｦ-ﾟ]*$/).test(e)?d.showAlert("かな入力になっています。ローマ字入力(英数)にしてください。"):ee("KEY_INISに「"+e+"」が見つかりません。("+s+")")}},fe.prototype.shiftDown=function(){this.selector(this.KEYSET_NO_FLAT).hide(),this.selector(this.KEYSET_NO_SHIFT).show()},fe.prototype.shiftUp=function(){this.selector(this.KEYSET_NO_FLAT).show(),this.selector(this.KEYSET_NO_SHIFT).hide()};var Se=function(){this.TYPE_KEY_DOWN=1,this.TYPE_KEY_UP=2,this.ADD_UP_BASIC=0,this.ADD_UP_EX_QUESTION_0=1,this.ADD_UP_EX_GAME_0=2,this._logs=[],this.preTime=0,this.resultQuestionLogs=[],this.resultkeyLogs=[],this.lastInputQuestionCount=0,this.inputLogs=[]};Se.prototype.logKeyDown=function(e,t,s,i,n,a){this.log(this.TYPE_KEY_DOWN,e,t,s,i,n,a)},Se.prototype.logKeyUp=function(e,t,s,i,n,a){this.log(this.TYPE_KEY_UP,e,t,s,i,n,a)},Se.prototype.log=function(e,t,s,i,n,a,o){this._logs.push({type:e,count:t,no:s,time:o-this.preTime,kana:i,key:n,code:a}),this.preTime=o},Se.prototype.logs=function(){return this._logs},Se.prototype.setLastLogResult=function(e,t){var s=this._logs[this._logs.length-1];if(s.result=e,t)for(var i in t)s[i]=t[i];this.lastInputQuestionCount!=s.count&&(this.inputLogs=[]),this.inputLogs.push(s),this.lastInputQuestionCount=s.count},Se.prototype.aggregateLogs=function(){this.resultQuestionLogs=[];for(var e=0,t=0,s=0,i=0,n=!(this.resultkeyLogs=[]),a=0;a<this._logs.length;a++){var o=this._logs[a];o.type==this.TYPE_KEY_DOWN&&o.hasOwnProperty("result")?(n=!1,8&o.result&&(s--,this.returnResultkeyLogsKanaNo(s,o.kana)),16&o.result?(s--,o.kana="ん",this.returnResultkeyLogsKanaNo(s,o.kana),n=!0):32&o.result?(o.kana="ん",s++,o.result-=2):64&o.result&&(o.kana="ん",s++,o.result-=2),o.totalRomaNo=e,o.kanaNo=s,o.romaNo=t,o.passedTime=o.time+i,i=0,1&o.result&&(e++,t++),(2&o.result||n)&&s++,4&o.result&&(s=t=0),this.resultQuestionLogs.length<=o.count&&this.resultQuestionLogs.push([]),this.resultQuestionLogs[o.count].push(o),this.resultkeyLogs.push(o)):i+=o.time}},Se.prototype.returnResultkeyLogsKanaNo=function(e,t){for(var s=this.resultkeyLogs.length-1;0<=s&&this.resultkeyLogs[s].kanaNo-1==e;s--)this.resultkeyLogs[s].kanaNo=e,this.resultkeyLogs[s].kana=t},Se.prototype.makeStats=function(e){var t={};t.questionStats=new ve,t.questionNoStats=new ve,t.kanaStats=new ve,t.romaStats=new ve;for(var s=0;s<this.resultQuestionLogs.length;s++){for(var i={questionNo:this.resultQuestionLogs[s][0].no,resultQuestionLogNo:s,passedTime:0,romaCount:0,missCount:0,successCount:0},n=(_.gameIni.questions[i.questionNo],0),a="",o={passedTime:0,romaCount:0,missCount:0},l={passedTime:0,romaCount:0,missCount:0},r=0;r<this.resultQuestionLogs[s].length;r++){var h=this.resultQuestionLogs[s][r],c=h.kana;e==this.ADD_UP_EX_GAME_0&&0==s&&0==h.kanaNo||(e==this.ADD_UP_EX_QUESTION_0&&0==h.kanaNo||(a&&n!=h.kanaNo&&(t.kanaStats.addUp(a,o),o={passedTime:0,romaCount:0,missCount:0}),n=h.kanaNo,a=c,i.passedTime+=h.passedTime,o.passedTime+=h.passedTime,l.passedTime+=h.passedTime,1&h.result?(i.romaCount++,o.romaCount++,l.romaCount=1,t.romaStats.addUp(h.key,l),l={passedTime:0,romaCount:0,missCount:0}):(i.missCount++,o.missCount++,l.missCount++),4&h.result&&(t.kanaStats.addUp(c,o),o={passedTime:0,romaCount:0,missCount:0},n=0,a="",i.successCount=1)))}t.questionNoStats.addUp(i.questionNo,i),t.questionStats.addUp(s,i)}return t.questionStats.calculate(),t.questionNoStats.calculate(),t.kanaStats.calculate(),t.romaStats.calculate(),t};var ve=function(){this.stats={},this._orderIndexes={}};ve.prototype.csvStats=function(e){var t={};for(var s in this.stats){t[s]="";for(var i=0;i<e.length;i++)t[s]&&(t[s]+=","),t[s]+=this.stats[s][e[i]]}return t},ve.prototype.calculate=function(){for(var e in this.stats)this.stats[e].sp=Number(this.stats[e].romaCount/this.stats[e].passedTime*1e3),this.stats[e].sr=Number(this.stats[e].romaCount/(this.stats[e].romaCount+this.stats[e].missCount)*1e3/10)},ve.prototype.addUp=function(e,t){var s;if(this.stats.hasOwnProperty(e)){for(s in t)this.stats[e][s]+=t[s];this.stats[e].count++}else{for(s in this.stats[e]={},t)this.stats[e][s]=t[s];this.stats[e].no=Object.keys(this.stats).length-1,this.stats[e].index=e,this.stats[e].count=1}},ve.prototype.getOrderIndexes=function(e){if(!this._orderIndexes.hasOwnProperty(e)){this._orderIndexes[e]=[];var n=1,a=-1,o=e;0<=o.search(/^-/)&&(n=-1,a=1,o=e.replace(/^-/,""));var t=[];for(var s in this.stats)t.push(this.stats[s]);t=t.sort(function(e,t){var s=e[o],i=t[o];return i<s?n:s<i?a:0});for(var i=0;i<t.length;i++)this._orderIndexes[e].push(t[i].index)}return this._orderIndexes[e]};var Ie=function(){this.MODE_CLOSE=0,this.MODE_ALERT=1,this.MODE_CONFIRM=2,this.popUpMode=this.MODE_CLOSE,this.okFunc=null,this.cancelFunc=null,this.layer,this.area,this.box,this.init()};Ie.prototype.init=function(){r.append('<div class="mtjPopUpLayer"></div>'),r.append('<div class="mtjPopUpArea"><div class="mtjPopUpBox"></div></div>'),this.layer=r.find(".mtjPopUpLayer"),this.area=r.find(".mtjPopUpArea"),this.box=r.find(".mtjPopUpBox"),this.layer.hide(),this.area.hide()},Ie.prototype.showPopup=function(e,t,s){r.find(".mtjPopUpLayer").length||this.init(),this.box.empty(),this.box.append('<div class="mtjPopUpBoxMessage">'+e.replace("\n","<br />")+"</div>"),this.box.append('<div class="mtjPopUpBoxBtnArea"></div>'),r.find(".mtjPopUpBoxOk").off("click"),r.find(".mtjPopUpBoxCancel").off("click"),this.okFunc=null,this.cancelFunc=null,t&&(this.popUpMode=this.MODE_ALERT,t.hasOwnProperty("func")&&(this.okFunc=t.func),r.find(".mtjPopUpBoxBtnArea").append('<div class="mtjRectBtn mtjPopUpBoxOk"><span>'+u.getHtml(t.icon)+"<span>"+t.html.replace("\n","<br />")+"</span></span></div>"),r.find(".mtjPopUpBoxOk").click({self:this},this.closeOk)),s&&(this.popUpMode=this.MODE_CONFIRM,s.hasOwnProperty("func")&&(this.cancelFunc=s.func),r.find(".mtjPopUpBoxBtnArea").append('<div class="mtjRectBtn mtjPopUpBoxCancel"><span>'+u.getHtml(s.icon)+"<span>"+s.html.replace("\n","<br />")+"</span></span></div>"),r.find(".mtjPopUpBoxCancel").click({self:this},this.closeCancel)),this.layer.show(),this.area.show(),this.box.css({"margin-left":(724-this.box.outerWidth())/2+"px","margin-top":(451-this.box.outerHeight())/2+"px"})},Ie.prototype.showAlert=function(e,t){void 0===t&&(t="OK"),this.showPopup(e,{icon:"check",html:t})},Ie.prototype.showConfirm=function(e,t,s){void 0===t&&(t={}),t.hasOwnProperty("html")||(t.html="OK"),t.hasOwnProperty("icon")||(t.icon="check"),void 0===s&&(s={}),s.hasOwnProperty("html")||(s.html="キャンセル"),s.hasOwnProperty("icon")||(s.icon="turn"),this.showPopup(e,t,s)},Ie.prototype.closeOk=function(e){var t=this;e&&(t=e.data.self),t.okFunc&&t.okFunc(),t.closePopUp()},Ie.prototype.closeCancel=function(e){var t=this;e&&(t=e.data.self),t.cancelFunc&&t.cancelFunc(),t.closePopUp()},Ie.prototype.closePopUp=function(){this.layer.hide(),this.area.hide(),r.find(".mtjPopUpBoxOk").off("click"),r.find(".mtjPopUpBoxCancel").off("click"),this.okFunc=null,this.cancelFunc=null,this.popUpMode=this.MODE_CLOSE};var xe=function(){this.ICON_GROUPS={miniIconBtn:{width:14,height:14,viewBox:"0 0 512 512"},rectBtn:{width:16,height:16,viewBox:"0 0 512 512"},largeBtn:{width:42,height:42,viewBox:"0 0 512 512"},iconBtn:{width:24,height:24,viewBox:"0 0 512 512"}},this.ICON_DATAS={setting:'<path d="M500.781,224.245L447,211.561c-4.93-21.263-13.289-41.202-24.509-59.193l29.053-46.992c3.552-5.763,2.685-13.184-2.097-17.965l-24.86-24.86c-4.772-4.772-12.202-5.64-17.956-2.088L359.64,89.517C341.648,78.298,321.719,69.929,300.456,65l-12.693-53.78C286.211,4.649,280.334,0,273.588,0h-35.166c-6.755,0-12.623,4.649-14.176,11.219L211.553,65c-21.263,4.93-41.194,13.29-59.175,24.509l-47.001-29.053c-5.745-3.544-13.193-2.675-17.956,2.088L62.553,87.412c-4.781,4.78-5.641,12.211-2.088,17.956l29.044,47C78.289,170.36,69.929,190.289,65,211.552l-53.772,12.684C4.657,225.798,0,231.676,0,238.412v35.166c0,6.763,4.649,12.623,11.228,14.175L65,300.447c4.93,21.264,13.299,41.194,24.518,59.185l-29.053,46.991c-3.544,5.746-2.684,13.202,2.08,17.965l24.868,24.86c4.781,4.789,12.21,5.64,17.965,2.087l47.001-29.044c17.982,11.22,37.912,19.579,59.175,24.508l12.692,53.781c1.553,6.58,7.421,11.22,14.176,11.22h35.166c6.746,0,12.623-4.64,14.175-11.22l12.693-53.781c21.254-4.93,41.192-13.288,59.176-24.508l47,29.053c5.754,3.552,13.184,2.684,17.956-2.096l24.869-24.86c4.772-4.772,5.64-12.21,2.088-17.956l-29.053-47c11.22-17.983,19.579-37.921,24.509-59.176l53.781-12.693c6.588-1.561,11.219-7.429,11.219-14.184V238.42C512,231.666,507.36,225.798,500.781,224.245z M256,390.614c-74.334,0-134.606-60.272-134.606-134.614c0-74.342,60.272-134.615,134.606-134.615c74.359,0,134.623,60.272,134.623,134.615C390.623,330.342,330.359,390.614,256,390.614z"></path><path d="M256,170.684c-47.114,0-85.316,38.194-85.316,85.316s38.202,85.315,85.316,85.315c47.123,0,85.316-38.192,85.316-85.315S303.123,170.684,256,170.684z M256,297.859c-23.114,0-41.86-18.746-41.86-41.859c0-23.114,18.746-41.86,41.86-41.86c23.114,0,41.859,18.746,41.859,41.86C297.859,279.114,279.114,297.859,256,297.859z"></path>',start:'<path d="M184.2,121c-1.5-0.9-3.5-1-5.1,0c-1.5,0.9-2.5,2.6-2.5,4.4v128.5v128.5c0,1.8,1,3.5,2.5,4.4c1.6,0.9,3.6,0.9,5.1,0l215.3-128.5c1.5-0.9,2.5-2.5,2.5-4.3c0-1.8-0.9-3.4-2.5-4.3L184.2,121z"/><path d="M256,0C114.6,0,0,114.6,0,256s114.6,256,256,256s256-114.6,256-256S397.4,0,256,0z M256,448c-105.9,0-192-86.1-192-192S150.1,64,256,64s192,86.1,192,192S361.9,448,256,448z"/>',check:'<path d="M469.402,35.492C334.09,110.664,197.114,324.5,197.114,324.5L73.509,184.176L0,254.336l178.732,222.172l65.15-2.504C327.414,223.414,512,55.539,512,55.539L469.402,35.492z"></path>',triangleR:'<path d="M96.9,55.7c-3.8-2.2-8.6-1-10.8,2.7c-0.8,1.2-1.2,2.6-1.2,4v401.6c0,2.9,1.4,5.4,3.9,6.9c2.5,1.4,5.6,1.4,7.9-0.1L433.3,270c3.8-2.2,4.9-7.1,2.7-10.9c-0.6-1.2-1.6-2.1-2.7-2.7L96.9,55.7z"/>',next2:'<path d="M478.875,191.126L271.008,41.066l-1.295-0.928l-1.337-0.87c-12.67-8.17-27.324-12.49-42.395-12.49c-16.196,0-31.754,4.925-44.994,14.254c-25.755,18.105-38.015,49.441-31.464,80.18H85.77C38.476,121.212,0,159.687,0,206.981v98.038c0,47.285,38.476,85.761,85.77,85.761h63.754c-6.586,30.688,5.666,62.058,31.498,80.214c13.205,9.295,28.771,14.228,44.959,14.228c15.072,0,29.726-4.32,42.395-12.491l1.337-0.869l1.295-0.928l207.799-150.009C499.62,305.854,512,281.597,512,255.995C512,230.401,499.62,206.146,478.875,191.126z M443.057,271.407l-207.798,150.01c-2.829,1.823-6.058,2.735-9.278,2.735c-3.45,0-6.893-1.048-9.841-3.119c-5.708-4.012-8.4-11.084-6.807-17.866l17.159-73.458H85.77c-13.64,0-24.699-11.05-24.699-24.69v-98.038c0-13.64,11.059-24.699,24.699-24.699h140.722l-17.159-73.44c-1.585-6.799,1.098-13.862,6.807-17.875c2.948-2.079,6.39-3.118,9.841-3.118c3.22,0,6.449,0.912,9.278,2.735l207.798,150.008c4.941,3.579,7.873,9.304,7.873,15.404C450.93,262.096,447.998,267.83,443.057,271.407z"></path>',next:'<path d="M499.436,225.905L295.858,24.536c-16.623-16.438-43.428-16.305-59.866,0.328c-16.438,16.613-16.294,43.418,0.329,59.856l130.356,128.958H42.329C18.956,213.679,0,232.624,0,255.997c0,23.383,18.956,42.328,42.329,42.328h324.347L236.321,427.273c-16.623,16.438-16.767,43.254-0.329,59.867c16.438,16.622,43.243,16.766,59.866,0.328l203.578-201.368c8.044-7.963,12.564-18.792,12.564-30.102C512,244.685,507.479,233.866,499.436,225.905z"></path>',prev:'<path d="M469.672,213.675H145.324L275.68,84.727c16.623-16.438,16.767-43.253,0.329-59.866c-16.438-16.624-43.243-16.767-59.867-0.328L12.566,225.901C4.52,233.863,0,244.691,0,256.003c0,11.312,4.52,22.13,12.566,30.093l203.576,201.368c16.624,16.438,43.428,16.304,59.867-0.33c16.438-16.613,16.294-43.417-0.329-59.855L145.324,298.322h324.347c23.374,0,42.328-18.945,42.328-42.319C512,232.62,493.045,213.675,469.672,213.675z"></path>',crown:'<path d="M512,152.469c0-21.469-17.422-38.875-38.891-38.875c-21.484,0-38.906,17.406-38.906,38.875c0,10.5,4.172,20.016,10.938,27c-26.453,54.781-77.016,73.906-116.203,56.594c-34.906-15.438-47.781-59.563-52.141-93.75c14.234-7.484,23.938-22.391,23.938-39.594C300.734,78.016,280.719,58,256,58c-24.703,0-44.734,20.016-44.734,44.719c0,17.203,9.703,32.109,23.938,39.594c-4.359,34.188-17.234,78.313-52.141,93.75c-39.188,17.313-89.75-1.813-116.203-56.594c6.766-6.984,10.938-16.5,10.938-27c0-21.469-17.422-38.875-38.891-38.875C17.422,113.594,0,131,0,152.469c0,19.781,14.781,36.078,33.875,38.547l44.828,164.078h354.594l44.828-164.078C497.234,188.547,512,172.25,512,152.469z"></path><path d="M455.016,425.063c0,15.984-12.953,28.938-28.953,28.938H85.938C69.953,454,57,441.047,57,425.063v-2.406c0-16,12.953-28.953,28.938-28.953h340.125c16,0,28.953,12.953,28.953,28.953V425.063z"></path>',turn:'<path d="M448.115,240.956c-39.306-39.389-94.166-63.913-154.235-63.885h-51.026V86.142c0-8.058-4.506-15.439-11.674-19.125c-7.172-3.677-15.8-3.047-22.352,1.64L8.983,211.746C3.343,215.784,0,222.295,0,229.232s3.343,13.448,8.983,17.486l199.844,143.088c6.552,4.687,15.18,5.316,22.352,1.64c7.169-3.686,11.674-11.068,11.674-19.125v-90.929h51.026c31.59,0.019,59.708,12.651,80.467,33.331c20.676,20.755,33.305,48.882,33.332,80.473c0,28.803,23.353,52.16,52.16,52.16S512,424,512,395.196C512.028,335.127,487.508,280.271,448.115,240.956z"></path>',reload:'<path d="M446.025,92.206c-40.762-42.394-97.487-69.642-160.383-72.182c-15.791-0.638-29.114,11.648-29.752,27.433c-0.638,15.791,11.648,29.114,27.426,29.76c47.715,1.943,90.45,22.481,121.479,54.681c30.987,32.235,49.956,75.765,49.971,124.011c-0.015,49.481-19.977,94.011-52.383,126.474c-32.462,32.413-76.999,52.368-126.472,52.382c-49.474-0.015-94.025-19.97-126.474-52.382c-32.405-32.463-52.368-76.992-52.382-126.474c0-3.483,0.106-6.938,0.302-10.364l34.091,16.827c3.702,1.824,8.002,1.852,11.35,0.086c3.362-1.788,5.349-5.137,5.264-8.896l-3.362-149.834c-0.114-4.285-2.88-8.357-7.094-10.464c-4.242-2.071-9.166-1.809-12.613,0.738L4.008,182.45c-3.05,2.221-4.498,5.831-3.86,9.577c0.61,3.759,3.249,7.143,6.966,8.974l35.722,17.629c-1.937,12.166-3.018,24.602-3.018,37.279c-0.014,65.102,26.475,124.31,69.153,166.944C151.607,465.525,210.8,492.013,275.91,492c65.095,0.014,124.302-26.475,166.937-69.146c42.678-42.635,69.167-101.842,69.154-166.944C512.014,192.446,486.844,134.565,446.025,92.206z"></path>',tweet:'<path d="M161,457.7c193.21,0,298.89-160.07,298.89-298.88,0-4.55,0-9.08-.31-13.58A213.54,213.54,0,0,0,512,90.86a209.49,209.49,0,0,1-60.33,16.53,105.46,105.46,0,0,0,46.18-58.1,210.44,210.44,0,0,1-66.71,25.5,105.14,105.14,0,0,0-179,95.8A298.21,298.21,0,0,1,35.64,60.84,105.12,105.12,0,0,0,68.16,201.07a104.37,104.37,0,0,1-47.68-13.15v1.33a105.08,105.08,0,0,0,84.28,103A104.91,104.91,0,0,1,57.32,294,105.16,105.16,0,0,0,155.46,367,210.7,210.7,0,0,1,25,412a215.5,215.5,0,0,1-25-1.51,297.41,297.41,0,0,0,161,47.1"/>',send:'<path d="M427.258,244.249c0.204-2.604,0.338-5.228,0.338-7.885c0-55.233-44.775-100.008-100.008-100.008c-17.021,0-33.042,4.264-47.072,11.764c-15.136-42.633-55.81-73.172-103.633-73.172c-60.729,0-109.96,49.231-109.96,109.96c0,11.416,1.741,22.425,4.97,32.778C29.804,234.254,0,275.238,0,323.21c0,62.627,50.769,113.396,113.396,113.396h292.642c3.021,0.284,6.079,0.445,9.175,0.445c53.454,0,96.788-43.333,96.788-96.788C512,290.891,475.024,250.183,427.258,244.249z M311.709,296.227h-20.452c-6.044,0-10.989,4.945-10.989,10.99v58.074c0,6.044-4.946,10.99-10.989,10.99h-26.558c-6.044,0-10.989-4.946-10.989-10.99v-58.074c0-6.044-4.945-10.99-10.989-10.99h-20.452c-6.044,0-8-3.94-4.347-8.755l53.414-70.405c3.652-4.816,9.631-4.816,13.284,0l53.414,70.405C319.709,292.288,317.753,296.227,311.709,296.227z"></path>',trophy:'<path d="M493.379,55.416c-11.458-11.479-27.441-18.63-44.952-18.62h-29.049h-14.736H107.358H92.632H63.573c-17.502-0.01-33.494,7.142-44.952,18.62C7.142,66.874-0.01,82.866,0,100.368v33.297c0,40.979,24.949,77.828,62.994,93.045l0.569,0.225l66.065,20.24c3.286,4.258,6.75,8.427,10.615,12.41c24.537,25.233,48.386,42.177,64.82,55.931c8.221,6.848,14.481,12.881,18.15,18.013c1.854,2.561,3.08,4.846,3.856,6.956c0.766,2.119,1.128,4.061,1.128,6.327c0,31.983,0,13.5,0,45.483c0,6.612-0.932,12.292-2.482,16.982c-2.364,7.054-5.954,11.831-10.37,15.089c-4.455,3.218-10.007,5.141-17.424,5.17c-26.449,0-26.704,0-26.724,0h-14.736v45.669h199.078v-45.669h-14.736c0,0-0.265,0-26.715,0c-4.945,0-9.075-0.893-12.577-2.403c-5.23-2.306-9.282-5.916-12.47-11.528c-3.139-5.602-5.238-13.372-5.238-23.31c0-31.983,0-13.5,0-45.483c0.009-2.266,0.373-4.208,1.128-6.327c1.324-3.66,4.179-8.016,9.046-13.107c7.23-7.653,18.65-16.541,32.267-27.382c13.616-10.88,29.402-23.84,45.511-40.41c3.866-3.983,7.338-8.152,10.616-12.41l66.074-20.24l0.56-0.225C487.061,211.494,512,174.644,512,133.665v-33.297C512.01,82.866,504.867,66.874,493.379,55.416z M73.55,199.191c-26.646-10.841-44.089-36.732-44.089-65.526v-33.297c0.01-9.458,3.797-17.904,9.987-24.115c6.23-6.201,14.657-9.987,24.125-9.997h29.01c-0.03,6.858-0.07,13.725-0.07,20.554c0.02,31.59,0.736,62.749,6.956,92.22c2.237,10.556,5.229,20.887,9.154,30.903L73.55,199.191z M181.733,225.101c0,0-42.696-40.185-42.696-80.369s0-77.858,0-77.858h42.696V225.101z M482.548,133.665c0,28.794-17.453,54.685-44.099,65.526l-35.093,10.742c6.672-16.992,10.596-34.916,12.882-53.301c2.815-22.682,3.237-46.13,3.247-69.823c0-6.828-0.04-13.696-0.069-20.554h29.01c9.468,0.01,17.904,3.796,24.124,9.997c6.191,6.21,9.988,14.647,9.998,24.115V133.665z"></path>',help:'<path d="M256,0C114.616,0,0,114.612,0,256s114.616,256,256,256s256-114.612,256-256S397.385,0,256,0z M207.678,378.794c0-17.612,14.281-31.893,31.893-31.893c17.599,0,31.88,14.281,31.88,31.893c0,17.595-14.281,31.884-31.88,31.884C221.959,410.678,207.678,396.389,207.678,378.794z M343.625,218.852c-3.596,9.793-8.802,18.289-14.695,25.356c-11.847,14.148-25.888,22.718-37.442,29.041c-7.719,4.174-14.533,7.389-18.769,9.769c-2.905,1.604-4.479,2.95-5.256,3.826c-0.768,0.926-1.029,1.306-1.496,2.826c-0.273,1.009-0.558,2.612-0.558,5.091c0,6.868,0,12.512,0,12.512c0,6.472-5.248,11.728-11.723,11.728h-28.252c-6.475,0-11.732-5.256-11.732-11.728c0,0,0-5.645,0-12.512c0-6.438,0.752-12.744,2.405-18.777c1.636-6.008,4.215-11.718,7.508-16.694c6.599-10.083,15.542-16.802,23.984-21.48c7.401-4.074,14.723-7.455,21.516-11.281c6.789-3.793,12.843-7.91,17.302-12.372c2.988-2.975,5.31-6.05,7.087-9.52c2.335-4.628,3.955-10.067,3.992-18.389c0.012-2.463-0.698-5.702-2.632-9.405c-1.926-3.686-5.066-7.694-9.264-11.29c-8.45-7.248-20.843-12.545-35.054-12.521c-16.285,0.058-27.186,3.876-35.587,8.62c-8.36,4.776-11.029,9.595-11.029,9.595c-4.268,3.718-10.603,3.85-15.025,0.314l-21.71-17.397c-2.719-2.173-4.322-5.438-4.396-8.926c-0.063-3.479,1.425-6.81,4.061-9.099c0,0,6.765-10.43,22.451-19.38c15.62-8.992,36.322-15.488,61.236-15.429c20.215,0,38.839,5.562,54.268,14.661c15.434,9.148,27.897,21.744,35.851,36.876c5.281,10.074,8.525,21.43,8.533,33.38C349.211,198.042,347.248,209.058,343.625,218.852z"></path>',window:'<path d="M464,32H48C21.492,32,0,53.493,0,80v352c0,26.508,21.492,48,48,48h416c26.508,0,48-21.492,48-48V80C512,53.493,490.508,32,464,32z M444.664,67c10.492,0,19,8.508,19,19c0,10.493-8.508,19-19,19s-19-8.507-19-19C425.664,75.508,434.172,67,444.664,67z M374.164,67c10.492,0,19,8.508,19,19c0,10.493-8.508,19-19,19s-19-8.507-19-19C355.164,75.508,363.672,67,374.164,67z M303.664,67c10.492,0,19,8.508,19,19c0,10.493-8.508,19-19,19s-19-8.507-19-19C284.664,75.508,293.172,67,303.664,67z M472,432c0,4.406-3.586,8-8,8H48c-4.414,0-8-3.594-8-8V136h432V432z"></path><rect x="112" y="208" width="288" height="32"></rect><rect x="112" y="272" width="288" height="32"></rect><rect x="112" y="336" width="152" height="32"></rect>',close:'<polygon points="326.253,147.826 256,218.08 185.747,147.826 147.819,185.747 218.072,256 147.819,326.253 185.747,364.182 256,293.929 326.262,364.182 364.19,326.253 293.928,256 364.19,185.738 "></polygon><path d="M437.018,74.99C390.76,28.699,326.624-0.008,256,0.009C185.385-0.008,121.24,28.699,74.982,74.99C28.699,121.231-0.008,185.385,0,256c-0.008,70.615,28.699,134.76,74.982,181.01C121.24,483.301,185.385,512.009,256,511.991c70.624,0.017,134.76-28.69,181.018-74.982C483.301,390.76,512.008,326.615,512,256C512.016,185.385,483.301,121.231,437.018,74.99z M405.071,405.071c-38.222,38.181-90.774,61.739-149.071,61.739c-58.289,0-110.849-23.558-149.071-61.739C68.747,366.84,45.198,314.281,45.181,256c0.016-58.28,23.566-110.848,61.748-149.071C145.151,68.739,197.711,45.19,256,45.19c58.298,0,110.849,23.55,149.071,61.739c38.182,38.223,61.74,90.791,61.748,149.071C466.811,314.281,443.253,366.84,405.071,405.071z"></path>'}};xe.prototype.getHtml=function(e,t){return void 0===t&&(t="rectBtn"),'<svg class="mtjIc-'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="'+this.ICON_GROUPS[t].viewBox+'" style="width:'+this.ICON_GROUPS[t].width+"px; height:"+this.ICON_GROUPS[t].height+'px;" xml:space="preserve"><g>'+this.ICON_DATAS[e]+"</g></svg>"}}();